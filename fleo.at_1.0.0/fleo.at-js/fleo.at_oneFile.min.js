function connect(){console.log("Initializing ..."),toastr.info("Connecting to the communication-system."),$.getScript("/fleo.at-audio/files/socket.io.slim.js",function(){$.getScript("/fleo.at-audio/files/api/easyrtc.js",function(){audioStarted()})})}function audioStarted(){function e(e){$("#clicksChatCont").append('<p><span style="width:300px;margin-left:100px;">'+e+"</span></p>")}function t(e){easyrtc.joinRoom((myNumber[0]+myNumber[2]).replace("#","")),console.log("Connected to the audio-/chat-system."),$.ajax({beforeSend:function(){$("#flash").addClass("f")},type:"POST",url:"/fleo.at-php/present.php",dataType:"html",data:{doing:9,number:(myNumber[0]+myNumber[2]).replace("#",""),name:myNumber[1],color:myNumber[2],audioSession:e}}).done(function(t){function o(e){ledsVol["callerAudio-Own"]=[...$(".led-callerAudio-Own")];let t=ledsVol["callerAudio-Own"].slice(0,Math.round(e));for(var o=0;o<ledsVol["callerAudio-Own"].length;o++)ledsVol["callerAudio-Own"][o].style.background="#a7a7a700";for(o=0;o<t.length;o++)t[o].style.background=`${r[o]}`}function a(e){ledsGrayVol["callerAudio-Own"]=[...$(".ledGray-callerAudio-Own")];let t=ledsGrayVol["callerAudio-Own"].slice(0,Math.round(e));for(var o=0;o<ledsGrayVol["callerAudio-Own"].length;o++)ledsGrayVol["callerAudio-Own"][o].style.background="#a7a7a73d";for(o=0;o<t.length;o++)t[o].style.background=`${s[o]}`}async function n(e){await audioCtxVolume["callerAudio-Own"].audioWorklet.addModule("/fleo.at-js/fleo.at_volumeMeterProcessor.js"),fleoNodeSource["callerAudio-Own"]=audioCtxVolume["callerAudio-Own"].createMediaStreamSource(e),volumeMeterNode["callerAudio-Own"]=new AudioWorkletNode(audioCtxVolume["callerAudio-Own"],"vumeter"),volumeMeterGrayNode["callerAudio-Own"]=new AudioWorkletNode(audioCtxVolume["callerAudio-Own"],"vumeter"),volumeMeterNode["callerAudio-Own"].port.onmessage=(e=>{let t=0,a=1;e.data.volume&&(t=e.data.volume,o(100*t/a))}),volumeMeterGrayNode["callerAudio-Own"].port.onmessage=(e=>{let t=0,o=1;e.data.volume&&(t=e.data.volume,a(100*t/o))}),gainNode["callerAudio-Own"]=audioCtxVolume["callerAudio-Own"].createGain(),fleoDestination["callerAudio-Own"]=audioCtxVolume["callerAudio-Own"].createMediaStreamDestination(),fleoNodeSource["callerAudio-Own"].connect(volumeMeterGrayNode["callerAudio-Own"]),fleoNodeSource["callerAudio-Own"].connect(gainNode["callerAudio-Own"]),fleoMediaStream["callerAudio-Own"]=gainNode["callerAudio-Own"].connect(fleoDestination["callerAudio-Own"]),gainNode["callerAudio-Own"].connect(volumeMeterNode["callerAudio-Own"])}toastr.success("Connected to the communication-system."),$("#flash").removeClass("f"),audioConferenceConnected=1,$("body").append('<audio class="videoWallManAudio" crossOrigin="anonymous" id="callerAudio-Own" src="" playsinline="playsinline" style="display:none;" data-audiosesplayer="'+e+'"  data-audiosessionname="'+encodeURI(myNumber[1])+' (me)"></audio>'),$("body").append('<audio id="callerAudio-ReplaySound" crossOrigin="anonymous" src="" playsinline="playsinline" style="display:none;"></audio>'),$("body").append('<audio id="callerAudio-ReplayPlaySound" crossOrigin="anonymous" src="" playsinline="playsinline" style="display:none;"></audio>'),audioCtxVolume["callerAudio-Own"]||(audioCtxVolume["callerAudio-Own"]=new AudioContext),n(easyrtc.getLocalStream()),$(document).on("click",".volumeClickcallerAudio-Own",function(e){let t=$(".volumeClickcallerAudio-Own").offset(),o=-2*(e.pageY-t.top-120);gainNode["callerAudio-Own"].gain.setValueAtTime(parseFloat(o/120),audioCtxVolume["callerAudio-Own"].currentTime+.005),$("#callerAudio-Own")[0].volume=1/240*o,$(".volumecallerAudio-Own").css("height",10/24*o+"%"),$(".volumeReccallerAudio-Own").css("width",5*o*.25+"px")})})}function o(t,o){e(o)}function a(t,o,a){var n=easyrtc.idToName(t);a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),a=a.replace(/\n/g,"<br />"),e($("#maennikenTextWall-"+n).html()+":<br />"+a+" <span style='text-decoration:underline;pointer-events:auto;cursor:pointer;' onClick='openChat(\""+t+"\");'>reply</span>"),window.focus()||Push.create("Chat!",{body:$("#maennikenTextWall-"+n).html()+": "+a,requireInteraction:!0,icon:"/icon.png",tag:"incomingChat",onClick:function(){window.focus(),this.close()}}),i.play()}$("body").append('<audio id="ringring" src="/fleo.at-medien/audioSystem/37281f8a38_audio_recording_1661279175085.mp3"></audio>'),$("body").append('<audio id="tock" src="/fleo.at-medien/layout/tock.mp3"></audio>');var n=document.getElementById("ringring"),i=document.getElementById("tock");i.volume=1,n.volume=.4,easyrtc._presetMediaConstraints={audio:{sampleSize:16,sampleRate:48e3,echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}};const r=["#064dac","#064dac","#064dac","#06ac5b","#15ac06","#4bac06","#80ac06","#acaa06","#ac8b06","#ac5506"],s=["#064dac3f","#064dac3f","#064dac3f","#06ac5b3f","#15ac063f","#4bac063f","#80ac063f","#acaa063f","#ac8b063f","#ac55063f"];var l;Push.config({serviceWorker:"/fleo.at-js/jquery-ui/serviceWorker.min.js"}),easyrtc.setStreamAcceptor(function(e,t){function o(t){ledsVol["callerAudio-"+e]=[...$(".led-callerAudio-"+e)];let o=ledsVol["callerAudio-"+e].slice(0,Math.round(t));for(var a=0;a<ledsVol["callerAudio-"+e].length;a++)ledsVol["callerAudio-"+e][a].style.background="#a7a7a700";for(a=0;a<o.length;a++)o[a].style.background=`${r[a]}`}function a(t){ledsGrayVol["callerAudio-"+e]=[...$(".ledGray-callerAudio-"+e)];let o=ledsGrayVol["callerAudio-"+e].slice(0,Math.round(t));for(var a=0;a<ledsGrayVol["callerAudio-"+e].length;a++)ledsGrayVol["callerAudio-"+e][a].style.background="#a7a7a700";for(a=0;a<o.length;a++)o[a].style.background=`${s[a]}`}async function n(n){await audioCtxVolume["callerAudio-"+e].audioWorklet.addModule("/fleo.at-js/fleo.at_volumeMeterProcessor.js"),fleoNodeSource["callerAudio-"+e]=audioCtxVolume["callerAudio-"+e].createMediaStreamSource(n),volumeMeterNode["callerAudio-"+e]=new AudioWorkletNode(audioCtxVolume["callerAudio-"+e],"vumeter"),volumeMeterGrayNode["callerAudio-"+e]=new AudioWorkletNode(audioCtxVolume["callerAudio-"+e],"vumeter"),volumeMeterNode["callerAudio-"+e].port.onmessage=(e=>{let t=0,a=1;e.data.volume&&(t=e.data.volume,o(100*t/a))}),volumeMeterGrayNode["callerAudio-"+e].port.onmessage=(e=>{let t=0,o=1;e.data.volume&&(t=e.data.volume,a(100*t/o))}),gainNode["callerAudio-"+e]=audioCtxVolume["callerAudio-"+e].createGain(),fleoDestination["callerAudio-"+e]=audioCtxVolume["callerAudio-"+e].createMediaStreamDestination(),fleoNodeSource["callerAudio-"+e].connect(volumeMeterGrayNode["callerAudio-"+e]),fleoNodeSource["callerAudio-"+e].connect(gainNode["callerAudio-"+e]),fleoMediaStream["callerAudio-"+e]=gainNode["callerAudio-"+e].connect(fleoDestination["callerAudio-"+e]),easyrtc.setVideoObjectSrc(document.getElementById("callerAudio-"+e),t),gainNode["callerAudio-"+e].connect(volumeMeterNode["callerAudio-"+e]);var i=easyrtc.idToName(e);changeVolumeMeMoving(i)}$("#callerAudio-"+e).length||(document.querySelector("[data-audioses='"+e+"']").innerHTML+='<audio crossOrigin="anonymous" class="videoWallManAudio" id="callerAudio-'+e+'" src="" autoplay="true" playsinline="playsinline" style="display:none;" data-audiosesplayer="'+e+'" data-audiosessionnumber="'+encodeURI(easyrtc.idToName(e))+'" data-audiosessionname="'+encodeURI($("#maennikenTextWall-"+easyrtc.idToName(e)).html())+'"></audio>'),audioCtxVolume["callerAudio-"+e]||(audioCtxVolume["callerAudio-"+e]=new AudioContext),n(t),$(document).on("click",".volumeClickcallerAudio-"+e,function(t){let o=$(".volumeClickcallerAudio-"+e).offset(),a=-2*(t.pageY-o.top-84*thisAllScale);a>110?(gainNode["callerAudio-"+e].gain.setValueAtTime(2.4,audioCtxVolume["callerAudio-"+e].currentTime+.005),$("#callerAudio-"+e)[0].volume=1,$(".volumecallerAudio-"+e).css("height","100%"),$(".volumeReccallerAudio-"+e).css("width","300px")):a<20?(gainNode["callerAudio-"+e].gain.setValueAtTime(0,audioCtxVolume["callerAudio-"+e].currentTime+.005),$("#callerAudio-"+e)[0].volume=0,$(".volumecallerAudio-"+e).css("height","0%"),$(".volumeReccallerAudio-"+e).css("width","0px")):(gainNode["callerAudio-"+e].gain.setValueAtTime(2*parseFloat(a/84*thisAllScale),audioCtxVolume["callerAudio-"+e].currentTime+.005),$("#callerAudio-"+e)[0].volume=1/(168*thisAllScale)*a,$(".volumecallerAudio-"+e).css("height",100/(168*thisAllScale)*a+"%"),$(".volumeReccallerAudio-"+e).css("width",a*(300/(84*thisAllScale))*.5+"px"))})}),easyrtc.setOnStreamClosed(function(t){var o=easyrtc.idToName(t);$(".maennikenConferenceHangup-"+o).hide(),$(".maennikenConferenceVolume-"+o).hide(),$(".maennikenConferenceCall-"+o).show(),e("Call with "+$("#maennikenTextWall-"+o).html()+" ended"),toastr.warning("Call with "+$("#maennikenTextWall-"+o).html()+" ended"),$("#hangup-"+t).remove(),setTimeout(function(){$(".endCallHangUp:visible").length||$("#hangUpButton2").hide()},1500)}),easyrtc.setAcceptChecker(function(t,o){var a=$("#maennikenTextWall-"+easyrtc.idToName(t)).html();e("You are called by "+a),$("#bgbg").addClass("flashBGBG"),window.focus()||Push.create("Incoming Call!",{body:"You are called by "+a,icon:"/icon.png",requireInteraction:!0,tag:"incomingCall",onClick:function(){window.focus(),this.close()}}),l=0,n.volume=.2;var i=setTimeout(function(){n.play()},2500),r=setInterval(function(){l<8?(n.play(),l++):clearInterval(r)},7e3);$("#menuBottom").append('<div id="accept-'+t+'" class="menuItem acceptButton" whocalls="'+t+'">'+a+" annehmen</div>"),$("#menuBottom").append('<div id="reject-'+t+'" class="menuItem rejectButton" whocalls="'+t+'">'+a+" ablehnen</div>");var s=function(a){Push.close("incomingCall");var n=easyrtc.idToName(t);a?($("#accept-"+t).remove(),$("#reject-"+t).remove(),e("You are in a call with: "+$("#maennikenTextWall-"+n).html()),toastr.accepted("You are in a call with: "+$("#maennikenTextWall-"+n).html()),$("#bgbg").removeClass("flashBGBG")):($("#accept-"+t).remove(),$("#reject-"+t).remove(),e("You rejected a call by "+$("#maennikenTextWall-"+n).html()),toastr.warning("You rejected a call by "+$("#maennikenTextWall-"+n).html()),$("#bgbg").removeClass("flashBGBG")),o(a)};document.getElementById("accept-"+t).onclick=function(){n.volume=0,clearTimeout(i),clearInterval(r),s(!0);var e=easyrtc.idToName(t);$(".maennikenConferenceCall-"+e).hide(),$(".maennikenConferenceHangup-"+e).show(),$(".maennikenConferenceVolume-"+e).show(),$("#hangUpButton2").show(),$("#hangup-"+t).length||($("#menuBottom").append('<div id="hangup-'+t+'" class="menuItem hangupButton" whocalls="'+t+'">'+a+" auflegen</div>"),document.getElementById("hangup-"+t).onclick=function(){easyrtc.hangup(t)})},document.getElementById("reject-"+t).onclick=function(){n.volume=0,clearTimeout(i),clearInterval(r),s(!1)},toastr.info("You are called by "+a,mainDomain,{onclick:function(){$("#accept-"+t).click()}}),"on"==audioAutoAccept&&$("#accept-"+t).click(),"on"==audioAutoReject&&$("#reject-"+t).click()}),callRoom=function(t){easyrtc.joinRoom(t),setTimeout(function(){var o=easyrtc.getRoomOccupantsAsArray(t);for(let t=0;t<o.length;t++){var a=easyrtc.idToName(o[t]);a!==(myNumber[0]+myNumber[2]).replace("#","")&&(e("You are calling "+$("#maennikenTextWall-"+a).html()),easyrtc.call(o[t],function(e){a=easyrtc.idToName(e);let t=$("#maennikenTextWall-"+a).html();$(".maennikenConferenceCall-"+a).hide(),$(".maennikenConferenceHangup-"+a).show(),$(".maennikenConferenceVolume-"+a).show(),$("#hangUpButton2").show(),$("#hangup-"+e).length||($("#menuBottom").append('<div id="hangup-'+e+'" class="menuItem hangupButton" whocalls="'+e+'">'+t+" auflegen</div>"),document.getElementById("hangup-"+e).onclick=function(){easyrtc.hangup(e)})},function(e,t){toastr.info("Info: "+t)},function(t,o){o=easyrtc.idToName(o),t?(toastr.accepted("Call accepted by "+$("#maennikenTextWall-"+o).html()+"."),e("Call established with "+$("#maennikenTextWall-"+o).html()+".")):(toastr.warning("Call rejected by "+$("#maennikenTextWall-"+o).html()+"."),e("Call rejected by "+$("#maennikenTextWall-"+o).html()+"."))}))}},1200)},callSingle=function(t){easyrtc.joinRoom(t),setTimeout(function(){var o=easyrtc.getRoomOccupantsAsArray(t);for(let n=0;n<o.length;n++){var a=easyrtc.idToName(o[n]);t==easyrtc.idToName(o[n])&&(e("You are calling Felix central call"),easyrtc.call(o[n],function(e){a=easyrtc.idToName(e);$("#maennikenTextWall-"+a).html();$(".maennikenConferenceCall-"+a).hide(),$(".maennikenConferenceHangup-"+a).show(),$(".maennikenConferenceVolume-"+a).show(),$("#hangUpButton2").show(),$("#hangup-"+e).length||($("#menuBottom").append('<div id="hangup-'+e+'" style="width:auto;height:auto;" class="menuItem hangupButton" whocalls="'+e+'">Felix central call auflegen</div>'),document.getElementById("hangup-"+e).onclick=function(){easyrtc.hangup(e)})},function(e,t){toastr.info("Info: "+t)},function(t,o){o=easyrtc.idToName(o),t?(toastr.accepted("Call accepted by Felix central call."),e("Call established with Felix central call.")):(toastr.warning("Call rejected by Felix central call."),e("Call rejected by Felix central call."))}))}},200)},openChat=function(e){spacebarText=1,chatKeysOn=1;var t=easyrtc.idToName(e);$("#writeChat").attr("receiver",e),$("#writeChat").find("h2").html("Write message to:<br />"+$("#maennikenTextWall-"+t).html()),$("#writeChat").show()},sendStuffWS=function(t){var o=easyrtc.idToName(t),a=document.getElementById("sendMessageText").value;0!==a.replace(/\s/g,"").length&&(void 0===$("#maennikenTextWall-"+o).html()&&(a="Konnte nicht senden. Empf√§nger scheint fort."),easyrtc.sendDataWS(t,"message",a),a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),a=a.replace(/\n/g,"<br />"),e("Me to "+$("#maennikenTextWall-"+o).html()+":<br />"+a),document.getElementById("sendMessageText").value="",spacebarText=0,chatKeysOn=0,$("#writeChat").hide())},easyrtc.enableVideo(!1),easyrtc.enableVideoReceive(!1),easyrtc.setPeerListener(a),easyrtc.initMediaSource(function(){easyrtc.setUsername((myNumber[0]+myNumber[2]).replace("#","")),easyrtc.setSocketUrl(easyrtcSocketUrl),easyrtc.connect("tCupSpace",t,o)},function(t,o){e(o+" and "+t)})}function eee(e,t,o,a){$(a).toggleClass("scale"+o).toggleClass("scale"+e),$(a).attr("distance",e)}function startupJavascriptVSPHP(){if(niceAddress=1,placeToOpenWN=historyCoords,placeToOpenDN=sMMssM,"1"==niceAddress){function e(){if(1==readyWorlds){for(var t=0;t<iii.length;t++)that1=iii.item(t),scaleNow=parseInt($(that1).attr("distance")),scaleNowNumber=scaleNow,scaleNowNumber+=placeToOpenDN,eee(scaleNowNumber,t,scaleNow,that1),$(that1).find(".tree").animate({left:"+="+placeToOpenWN},800);historyCoords=placeToOpenWN,sMMssM=placeToOpenDN,ready=1}else setTimeout(e,250)}e()}else console.log("Something missing (niceAddress).")}function getThingsStraight(){1!==yeahStartup&&$("html").animate({scrollTop:$("body").css("height")},0,function(){w=$(window).width(),h=$(window).height(),thisAllScale=w/1800,$("#wrapperContainer").transition({scale:thisAllScale,duration:0},function(){pointZero=$(window).scrollTop()-parseInt($("body").css("height")),relationToBackground=$(window).scrollTop()-parseInt($("body").css("height"))-pointZero+35,$("html").animate({scrollTop:$("body").css("height")},0,function(){$("#wrapper").animate({height:"5000px"},0,function(){$("html").animate({scrollTop:$("body").css("height")},0,function(){$("body").animate({height:parseInt($("#wrapper").css("height"))*thisAllScale},0,function(){$("#waldf").animate({bottom:Math.round(relationToBackground/5)*thisAllScale+"px"},0,function(){$("#haeuserf").animate({bottom:Math.round(relationToBackground/8)*thisAllScale+"px"},0,function(){$("html").animate({scrollTop:$("body").css("height")},0,function(){w=$(window).width(),h=$(window).height(),thisAllScale=w/1800,$("#wrapperContainer").transition({scale:thisAllScale,duration:0},function(){pointZero=$(window).scrollTop()-parseInt($("body").css("height")),relationToBackground=$(window).scrollTop()-parseInt($("body").css("height"))-pointZero+35,$("html").animate({scrollTop:$("body").css("height")},0,function(){$("#wrapper").animate({height:"5000px"},0,function(){$("#bgbgsterne").animate({left:($(window).width()-$("#bgbgsterne").width())/2+"px"},0,function(){$("html").animate({scrollTop:$("body").css("height")},0,function(){$("body").animate({height:parseInt($("#wrapper").css("height"))*thisAllScale},0,function(){$("#waldf").animate({bottom:Math.round(relationToBackground/5)*thisAllScale+"px"},0,function(){$("#haeuserf").animate({bottom:Math.round(relationToBackground/8)*thisAllScale+"px"},0,function(){"b"==will?$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px",bottom:mySpotterMapLocationY-200+"px",left:w/2-mySpotterMapLocationX-16+"px"}).transition({perspective:"100px",rotate:turn/9e3*90+"deg"},{duration:0}):$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px",bottom:mySpotterMapLocationY-200+"px",left:w/2-mySpotterMapLocationX-16+"px"}).transition({perspective:"100px",rotate:turn/9e3*-90+180+"deg"},{duration:0}),$("#menuBottom")[0].offsetWidth<450?($(".menuItem").css({"font-size":"14px","line-height":"18px",height:"22px"}),$("#maennikenBag-"+(myNumber[0]+myNumber[2]).replace("#","")).css({top:"55px"})):($(".menuItem").css({"font-size":"18px","line-height":"25px",height:"28px"}),$("#maennikenBag-"+(myNumber[0]+myNumber[2]).replace("#","")).css({top:"68px"}))})})})})})})})})})})})})})})})})})}function changeVolumeMeMoving(e){$(".maennikenConferenceHangup-"+e).is(":visible")&&(Math.abs(parseInt($("#personCode-"+e).find(".tree").css("left"))-800)>Math.abs(parseInt($("#personCode-"+e).attr("distance")))?othPersonDistanceSelf[e]=Math.abs(parseInt($("#personCode-"+e).find(".tree").css("left"))-800):othPersonDistanceSelf[e]=Math.abs(parseInt($("#personCode-"+e).attr("distance"))),othPersonDistanceSelf[e]>15e3?othPersonDistanceSelfId[e]=0:(othPersonDistanceSelfId[e]=Math.round(90+othPersonDistanceSelf[e]/13500*-96),1==hearLikeOwl&&(othPersonDistanceSelfId[e]=84),othPersonDistanceSelfId[e]<0&&(othPersonDistanceSelfId[e]=0),othPersonDistanceSelfId[e]>84&&(othPersonDistanceSelfId[e]=84),othPersonDistanceSelfId[e]!==othPersonDistanceSelfOld[e]&&(otherVolume[e]=othPersonDistanceSelfId[e]),gainNode["callerAudio-"+$("#videoWallMan-"+e).attr("data-audioses")].gain.setValueAtTime(2*parseFloat(otherVolume[e]/84),audioCtxVolume["callerAudio-"+$("#videoWallMan-"+e).attr("data-audioses")].currentTime+.005),othAudioSes[e]=$("#videoWallMan-"+e).attr("data-audioses"),$("#callerAudio-"+othAudioSes[e])[0].volume=1/84*otherVolume[e],$(".volumecallerAudio-"+othAudioSes[e]).css("height",100/84*otherVolume[e]+"%"),$(".volumeSoundReccallerAudio-"+othAudioSes[e]).css("width",otherVolume[e]*(300/84)*1+"px"),$(".volumeReccallerAudio-"+othAudioSes[e]).css("width",otherVolume[e]*(300/84)*.5+"px"),othPersonDistanceSelfOld[e]=othPersonDistanceSelf[e]))}function isInt(e){return!isNaN(e)&&parseInt(Number(e))==e&&!isNaN(parseInt(e,10))}function whereAmI(e,t,o,a,n,i,r){ws.readyState===WebSocket.OPEN?(moveWithSocket(e,t,a,o,n),isInt(n)||(n=0),ws.send(JSON.stringify({doing:9,hiCo:e,sMMs:t,level:o,duration:a,turn:parseInt(n),turnX:0,turnZ:0,whoC:i}))):$.ajax({beforeSend:function(){$("#flash").addClass("ffff")},type:"POST",url:"/fleo.at-php/moving.php",dataType:"json",data:{doing:9,hiCo:e,sMMs:t,duration:a,level:o,turn:n,whoC:i,colorC:r}}).always(function(){$("#flash").removeClass("ffff")}),$(".person").each(function(){changeVolumeMeMoving($(this).attr("id").replace("personCode-",""))}),$(".audioStation").each(function(){sideVolume[$(this)]=(1-Math.abs(parseInt($(this).parent(".tree").css("left"))*(1/7500))).toFixed(2),doordsVolume[$(this)]=(1-Math.abs(parseInt($(this).parent(".tree").parent(".move").attr("distance"))*(1/7500))).toFixed(2),sideVolume[$(this)]<doordsVolume[$(this)]?setVolume[$(this)]=sideVolume[$(this)]:setVolume[$(this)]=doordsVolume[$(this)],setVolume[$(this)]<0&&(setVolume[$(this)]=0),"ytplayer"==$(this).attr("id")?ytplayer.setVolume(100*setVolume[$(this)]):$(this)[0].volume=setVolume[$(this)]}),mySpotterMapLatitude=-1*Math.trunc(parseInt(historyCoords)/1e3),mySpotterMapLongitude=-1*parseInt(sMMssM)/300,mySpotterMapLocationX=720*(mySpotterMapLatitude/360+.5),mySpotterMapLocationY=360*(1-(mySpotterMapLongitude/180+.5)),"b"==will?$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px",bottom:mySpotterMapLocationY-200+"px",left:w/2-mySpotterMapLocationX+"px"}).transition({perspective:"100px",rotate:n/9e3*90+"deg"},{duration:0}):$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px",bottom:mySpotterMapLocationY-200+"px",left:w/2-mySpotterMapLocationX+"px"}).transition({perspective:"100px",rotate:n/9e3*-90+180+"deg"},{duration:0}),$("#maennikenSpotter-Own").css({top:mySpotterMapLocationY-5+"px",left:mySpotterMapLocationX-5+"px"}),0==mapIsWorld&&(mapIsWorld=1,$("#mapForLocator").show(),"Mobile"!==Device_Type()&&Device_Type(),$("#mapBody2").css("transform","rotateX(34deg) scale(1)"),$("#mapBody").css({transform:"scale(1);"}))}function Device_Type(){var e;return e=/(up.browser|up.link|mmp|symbian|smartphone|midp|wap|phone|android|iemobile|w3c|acs\-|alav|alca|amoi|audi|avan|benq|bird|blac|blaz|brew|cell|cldc|cmd\-|dang|doco|eric|hipt|inno|ipaq|java|jigs|kddi|keji|leno|lg\-c|lg\-d|lg\-g|lge\-|maui|maxo|midp|mits|mmef|mobi|mot\-|moto|mwbp|nec\-|newt|noki|palm|pana|pant|phil|play|port|prox|qwap|sage|sams|sany|sch\-|sec\-|send|seri|sgh\-|shar|sie\-|siem|smal|smar|sony|sph\-|symb|t\-mo|teli|tim\-|tosh|tsm\-|upg1|upsi|vk\-v|voda|wap\-|wapa|wapi|wapp|wapr|webc|winw|winw|xda|xda\-) /i.test(navigator.userAgent)?/(tablet|ipad|playbook)|(android(?!.*(mobi|opera mini)))/i.test(navigator.userAgent)?"Tablet":"Mobile":/(tablet|ipad|playbook)|(android(?!.*(mobi|opera mini)))/i.test(navigator.userAgent)?"Tablet":"Desktop",e}function turnAround(e){if("b"==e){for(var t=0;t<iii.length;t++)that1=iii.item(t),scaleNow=parseInt($(that1).attr("distance")),scaleNowNumber=scaleNow,scaleNowNumber*=-1,eee(scaleNowNumber,t,scaleNow,that1);$("#wrapper").css("transform","scaleX(-1)"),$("#maennikenWall").css("transform","scaleX(-1)"),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:"+=180deg"},{duration:0}),$("#waldff").hide(),$("#waldfb").show(),$("#infot").css("background","skyblue")}if("f"==e){for(t=0;t<iii.length;t++)that1=iii.item(t),scaleNow=parseInt($(that1).attr("distance")),scaleNowNumber=scaleNow,scaleNowNumber*=-1,eee(scaleNowNumber,t,scaleNow,that1);$("#wrapper").css("transform","scaleX(1)"),$("#maennikenWall").css("transform","scaleX(1)"),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:"-=180deg"},{duration:0}),$("#waldfb").hide(),$("#waldff").show(),$("#infot").css("background","rgb(214, 214, 195)")}$.ajax({beforeSend:function(){$("#flash").addClass("f")},type:"POST",url:"/fleo.at-php/person_TA.php",dataType:"html",data:{doing:1,will:e,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")}}).always(function(e){$("#flash").removeClass("f")})}function moveWithTrain(e,t,o,a,n){whereAmI(e,t,a,o,n,(myNumber[0]+myNumber[2]).replace("#",""),myNumber[2])}function move(e,t,o,a){t*=3;var n=o/1e3;for($("#wrapper").addClass("navigating-md"),"f"==am&&(went+=t-sMMssM,moveMeTrainsMMssM=t-sMMssM),"b"==am&&(wentZ-=t-sMMssM,moveMeTrainsMMssM=-1*(t-sMMssM)),$(".move").css("transition","bottom "+n+"s linear 0s, transform "+n+"s linear 0s, margin-bottom "+n+"s linear 0s"),aaa=0;aaa<iii.length;aaa++)that1=iii.item(aaa),scaleNow=parseInt($(that1).attr("distance")),scaleNowNumber=scaleNow,scaleNowNumber+=moveMeTrainsMMssM,eee(scaleNowNumber,aaa,scaleNow,that1);a&&($("html").animate({scrollTop:parseInt($("body").css("height"))-h-w/1800*(a-50)},o),worldHeight=a-50),$(".move > .tree").animate({left:"-="+parseInt(historyCoords-e)},{queue:!0,duration:o,complete:function(){}}),$(".move").css("transition","bottom 0.0s linear 0s, transform 0.0s linear 0s, margin-bottom 0.0s linear 0s"),sMMssM=t,historyCoords=e,whereAmI(e,t,0,250,turn,(myNumber[0]+myNumber[2]).replace("#",""),myNumber[2]),$(".maennikenLocator").each(function(){let e=$(this).attr("id"),t=e.replace("maennikenLocator-","");locateHorizontal=parseInt($("#personCode-"+t).find(".tree").css("left")),locateHorizontal=150+locateHorizontal/300;let o=parseInt($("#personCode-"+t).attr("distance"));locateVertical=150+o/300,bottomLocate=locateVertical-2.5+"px",leftLocate=locateHorizontal-2.5+"px",locateVertical<150?($("#"+e).css("background","red"),bottomLocate=150-Math.abs(locateVertical)+150+"px"):$("#"+e).css("background","white"),$("#"+e).css({left:leftLocate,bottom:bottomLocate})}),$("#wrapper").removeClass("navigating-md")}function moveWithSocket(e,t,o,a,n){for(durationSec=o/1e3,$("#wrapper").addClass("navigating-md"),"f"==am&&(went+=t-sMMssM,moveMeTrainsMMssM=t-sMMssM),"b"==am&&(wentZ-=t-sMMssM,moveMeTrainsMMssM=-1*(t-sMMssM)),$(".move").css("transition","bottom "+durationSec+"s linear 0s, transform "+durationSec+"s linear 0s, margin-bottom "+durationSec+"s linear 0s"),aaa=0;aaa<iii.length;aaa++)that1=iii.item(aaa),scaleNow=parseInt($(that1).attr("distance")),scaleNowNumber=scaleNow,scaleNowNumber+=moveMeTrainsMMssM,eee(scaleNowNumber,aaa,scaleNow,that1);a&&($("html").animate({scrollTop:parseInt($("body").css("height"))-h+a},o),worldHeight=a,$("#waldf").css("bottom",Math.round(a/-8)*thisAllScale-140+"px"),$("#haeuserf").css("bottom",Math.round(a/-8)*thisAllScale-140+"px")),$(".move > .tree").animate({left:"-="+parseInt(historyCoords-e)},{queue:!1,duration:o,complete:function(){}}),"b"==will?n<7800&&n>-7400?($("[class*='scale']").css({left:n+"px"}),$("#haeuserf, #waldf").css({left:n+"px"}),$("#bgbgbsterne").css({left:1.2*n+"px"}),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:n/9e3*90+"deg"},{duration:o})):(n>=7400||n<=-7800)&&($("#infot").click(),$("[class*='scale']").css({left:n+"px"}),$("#haeuserf, #waldf").css({left:n+"px"}),$("#bgbgbsterne").css({left:1.2*n+"px"}),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:n/9e3*90+"deg"},{duration:o})):n<7400&&n>-7800?($("[class*='scale']").css({left:n+"px"}),$("#haeuserf, #waldf").css({left:n+"px"}),$("#bgbgbsterne").css({left:1.2*n+"px"}),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:n/9e3*-90+180+"deg"},{duration:o})):(n>=7800||n<=-7400)&&($("#infot").click(),$("[class*='scale']").css({left:n+"px"}),$("#haeuserf, #waldf").css({left:n+"px"}),$("#bgbgbsterne").css({left:1.2*n+"px"}),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:n/9e3*-90+180+"deg"},{duration:o})),$(".move").css("transition","bottom 0.0s linear 0s, transform 0.0s linear 0s, margin-bottom 0.0s linear 0s"),sMMssM=t,historyCoords=e,hp%1==0&&history.replaceState("","","?doords="+parseInt(sMMssM/3)+"&coords="+parseInt(historyCoords)),hp++,Cookies.set("spacecoords",historyCoords,{secure:!0,sameSite:"none",expires:730}),Cookies.set("spacedoords",parseInt(sMMssM/3),{secure:!0,sameSite:"none",expires:730}),$(".maennikenLocator").each(function(){let e=$(this).attr("id"),t=e.replace("maennikenLocator-","");locateHorizontal=parseInt($("#personCode-"+t).find(".tree").css("left")),locateHorizontal=150+locateHorizontal/300;let o=parseInt($("#personCode-"+t).attr("distance"));locateVertical=150+o/300,bottomLocate=locateVertical-2.5+"px",leftLocate=locateHorizontal-2.5+"px",locateVertical<150?($("#"+e).css("background","red"),bottomLocate=150-Math.abs(locateVertical)+150+"px"):$("#"+e).css("background","white"),$("#"+e).css({left:leftLocate,bottom:bottomLocate})}),$("#wrapper").removeClass("navigating-md")}function roomChange(e){haltEverything=1,$.ajax({beforeSend:function(){$("#flash").addClass("f")},type:"POST",url:"/fleo.at-php/fleo.at_roomChange.php",dataType:"html",data:{doing:1,number:(myNumber[0]+myNumber[2]).replace("#","")}}).done(function(t){$(".thing").remove(),$(".floor").remove(),moveWithTrain(0,0,0,0,0),"b"==am&&$("#infot").click(),$("#flash").removeClass("f"),genesisDone=0,$(".maennikenLocator").hide(),setTimeout(function(){$.ajax({beforeSend:function(){$("#flash").addClass("fff")},type:"POST",url:"/fleo.at-php/fleo.at_roomChange.php",dataType:"html",data:{doing:2,number:(myNumber[0]+myNumber[2]).replace("#",""),room:e}}).done(function(t){window.history.pushState("","","/r/"+e+"?coords="+parseInt(historyCoords)+"&doords="+parseInt(sMMssM/3)),myRoom=e,$("#h1title").html("This is "+mainDomain+", room: "+myRoom),$("title").html(mainDomain+": "+myRoom+" // open-world with content-trees");for(var o=0;o<ppp.length;o++)$(ppp.item(o)).attr("room")==myRoom?$(ppp.item(o)).removeClass("otherroom"):$(ppp.item(o)).addClass("otherroom");$("#haeuserf").css({left:0}),$("#bgbgbsterne").css({left:0}),$("#mapForLocator").transition({rotate:"0deg"},{duration:0}),$("#flash").removeClass("fff")})},100)})}function stripslashes(e){return e=e.replace(/\\'/g,"'"),e=e.replace(/\\"/g,'"'),e=e.replace(/\\0/g,"\0"),e=e.replace(/\\\\/g,"\\"),e}function htmlDecode(e){var t=(new DOMParser).parseFromString(e,"text/html");return t.documentElement.textContent}function connectWorld(){function e(){var e=[],t=[],o="https://icecast.radiofrance.fr/fip-hifi.aac?id="+mainDomain,d="https://icecast.radiofrance.fr/fip-hifi.aac?id="+mainDomain;worldSrc.addEventListener("change",function(e){if(n=JSON.parse(e.data),"1465"==n.id&&(truckLetCoords=n.coordsW,truckLetDoords=n.coordsD),$("[data-attr="+n.id+"]").length){let e=sMMssM+parseInt(n.coordsD);"b"==am&&(e=-1*(sMMssM+parseInt(n.coordsD)+2*went)),scaleNowDoords=parseInt($("[data-attr="+n.id+"]").attr("distance")),fragileDoordsOld=scaleNowDoords,fragileCoordsGo=parseInt(historyCoords)+parseInt(n.coordsW),i=parseInt($("[data-attr="+n.id+"]").find(".tree").css("left"))!==fragileCoordsGo?1:0,r=e!==fragileDoordsOld?1:0,s=$("[data-attr="+n.id+"]").find(".tree").css("bottom")!==n.coordsH?1:0,l=$("[data-attr="+n.id+"]").find(".tree").css("width")!==n.width?1:0,1!=i&&1!=r&&1!=s&&1!=l||(1==s&&("1487"==n.id?$("[data-attr="+n.id+"]").find(".tree").animate({bottom:n.coordsH+"px"},{duration:5e3,queue:!1,easing:"linear"}):$("[data-attr="+n.id+"]").find(".tree").animate({bottom:n.coordsH+"px"},{duration:1e3,queue:!1,easing:"linear"})),1==i&&("1487"==n.id?$("[data-attr="+n.id+"]").find(".tree").animate({left:fragileCoordsGo+"px"},{duration:5e3,queue:!1,easing:"linear"}):$("[data-attr="+n.id+"]").find(".tree").animate({left:fragileCoordsGo+"px"},{duration:1e3,queue:!1,easing:"linear"}),"0"==n.minusPlusW&&"0"!==u[n.id]&&($("[data-attr='"+n.id+"']").find(".tree").css({transition:"transform 4.0s linear 0s","transform-origin":"center",transform:"scaleX(1)"}),u[n.id]="0"),"1"==n.minusPlusW&&"1"!==u[n.id]&&($("[data-attr='"+n.id+"']").find(".tree").css({transition:"transform 4.0s linear 0s","transform-origin":"center",transform:"scaleX(-1)"}),u[n.id]="1")),1==r&&("1487"==n.id?$("[data-attr="+n.id+"]").closest(".move").css("transition","bottom 5.0s linear 0s, transform 5.0s linear 0s, margin-bottom 5.0s linear 0s"):$("[data-attr="+n.id+"]").closest(".move").css("transition","bottom 1.0s linear 0s, transform 1.0s linear 0s, margin-bottom 1.0s linear 0s"),$("[data-attr="+n.id+"]").closest(".move").toggleClass("scale"+fragileDoordsOld).toggleClass("scale"+e),$("[data-attr="+n.id+"]").attr("distance",e)),1==l&&$("[data-attr="+n.id+"]").find(".tree").animate({width:n.width+"px"},500)),n.tick2-n.tick==2&&($("[data-attr="+n.id+"]").remove(),
"f"==am?n.whatIsThis.includes("audStat")?$("#wrapper").append('<div class="move thing scale'+(n.coordsD+sMMssM)+'" distance="'+(n.coordsD+sMMssM)+'" playing="'+n.play+'" data-attr="'+n.id+'" data-online="'+n.isOnline+'"><div '+n.object+" width: "+n.width+"px; min-height: 1000px; pointer-events: none; bottom: "+n.coordsH+"px; left: "+(n.coordsW+historyCoords)+'px;">'+stripslashes(htmlDecode(n.name))+"</div><script>"+stripslashes(htmlDecode(n.script))+"</script></div>"):"on"==n.floor?$("#wrapper").append('<div class="move floor scale'+(n.coordsD+sMMssM)+'" distance="'+(n.coordsD+sMMssM)+'" playing="'+n.play+'" data-attr="'+n.id+'" data-online="'+n.isOnline+'"><div '+n.object+" width: "+n.width+"px; bottom: "+n.coordsH+"px; left: "+(n.coordsW+historyCoords)+'px;">'+stripslashes(htmlDecode(n.name))+"</div></div><script>"+stripslashes(htmlDecode(n.script))+"</script>"):$("#wrapper").append('<div class="move thing scale'+(n.coordsD+sMMssM)+'" distance="'+(n.coordsD+sMMssM)+'" playing="'+n.play+'" data-attr="'+n.id+'" data-online="'+n.isOnline+'"><div '+n.object+" width: "+n.width+"px; bottom: "+n.coordsH+"px; left: "+(n.coordsW+historyCoords)+'px;">'+stripslashes(htmlDecode(n.name))+"</div><script>"+stripslashes(htmlDecode(n.script))+"</script></div>"):"b"==am&&(n.whatIsThis.includes("audStat")?$("#wrapper").append('<div class="move thing scale'+(-1*n.coordsD-sMMssM)+'" distance="'+(-1*n.coordsD-sMMssM)+'" playing="'+n.play+'" data-attr="'+n.id+'" data-online="'+n.isOnline+'"><div '+n.object+" width: "+n.width+"px; min-height: 1000px; pointer-events: none; bottom: "+n.coordsH+"px; left: "+(n.coordsW+historyCoords-n.width)+'px;">'+stripslashes(htmlDecode(n.name))+"</div><script>"+stripslashes(htmlDecode(n.script))+"</script></div>"):"on"==n.floor?$("#wrapper").append('<div class="move floor scale'+(-1*n.coordsD-sMMssM)+'" distance="'+(-1*n.coordsD-sMMssM)+'" playing="'+n.play+'" data-attr="'+n.id+'" data-online="'+n.isOnline+'"><div '+n.object+" width: "+n.width+"px; bottom: "+n.coordsH+"px; left: "+(n.coordsW+historyCoords-n.width)+'px;">'+stripslashes(htmlDecode(n.name))+"</div></div><script>"+stripslashes(htmlDecode(n.script))+"</script>"):$("#wrapper").append('<div class="move thing scale'+(-1*n.coordsD-sMMssM)+'" distance="'+(-1*n.coordsD-sMMssM)+'" playing="'+n.play+'" data-attr="'+n.id+'" data-online="'+n.isOnline+'"><div '+n.object+" width: "+n.width+"px; bottom: "+n.coordsH+"px; left: "+(n.coordsW+historyCoords-n.width)+'px;">'+stripslashes(htmlDecode(n.name))+"</div><script>"+stripslashes(htmlDecode(n.script))+"</script></div>")),u[n.id])}else"f"==am?n.whatIsThis.includes("audStat")?$("#wrapper").append('<div class="move thing scale'+(n.coordsD+sMMssM)+'" distance="'+(n.coordsD+sMMssM)+'" playing="'+n.play+'" data-attr="'+n.id+'" data-online="'+n.isOnline+'"><div '+n.object+" width: "+n.width+"px; min-height: 1000px; pointer-events: none; bottom: "+n.coordsH+"px; left: "+(n.coordsW+historyCoords)+'px;">'+stripslashes(htmlDecode(n.name))+"</div><script>"+stripslashes(htmlDecode(n.script))+"</script></div>"):"on"==n.floor?$("#wrapper").append('<div class="move floor scale'+(n.coordsD+sMMssM)+'" distance="'+(n.coordsD+sMMssM)+'" playing="'+n.play+'" data-attr="'+n.id+'" data-online="'+n.isOnline+'"><div '+n.object+" width: "+n.width+"px; bottom: "+n.coordsH+"px; left: "+(n.coordsW+historyCoords)+'px;">'+stripslashes(htmlDecode(n.name))+"</div></div><script>"+stripslashes(htmlDecode(n.script))+"</script>"):$("#wrapper").append('<div class="move thing scale'+(n.coordsD+sMMssM)+'" distance="'+(n.coordsD+sMMssM)+'" playing="'+n.play+'" data-attr="'+n.id+'" data-online="'+n.isOnline+'"><div '+n.object+" width: "+n.width+"px; bottom: "+n.coordsH+"px; left: "+(n.coordsW+historyCoords)+'px;">'+stripslashes(htmlDecode(n.name))+"</div><script>"+stripslashes(htmlDecode(n.script))+"</script></div>"):"b"==am&&(n.whatIsThis.includes("audStat")?$("#wrapper").append('<div class="move thing scale'+(-1*n.coordsD-sMMssM)+'" distance="'+(-1*n.coordsD-sMMssM)+'" playing="'+n.play+'" data-attr="'+n.id+'" data-online="'+n.isOnline+'"><div '+n.object+" width: "+n.width+"px; min-height: 1000px; pointer-events: none; bottom: "+n.coordsH+"px; left: "+(n.coordsW+historyCoords-n.width)+'px;">'+stripslashes(htmlDecode(n.name))+"</div><script>"+stripslashes(htmlDecode(n.script))+"</script></div>"):"on"==n.floor?$("#wrapper").append('<div class="move floor scale'+(-1*n.coordsD-sMMssM)+'" distance="'+(-1*n.coordsD-sMMssM)+'" playing="'+n.play+'" data-attr="'+n.id+'" data-online="'+n.isOnline+'"><div '+n.object+" width: "+n.width+"px; bottom: "+n.coordsH+"px; left: "+(n.coordsW+historyCoords-n.width)+'px;">'+stripslashes(htmlDecode(n.name))+"</div></div><script>"+stripslashes(htmlDecode(n.script))+"</script>"):$("#wrapper").append('<div class="move thing scale'+(-1*n.coordsD-sMMssM)+'" distance="'+(-1*n.coordsD-sMMssM)+'" playing="'+n.play+'" data-attr="'+n.id+'" data-online="'+n.isOnline+'"><div '+n.object+" width: "+n.width+"px; bottom: "+n.coordsH+"px; left: "+(n.coordsW+historyCoords-n.width)+'px;">'+stripslashes(htmlDecode(n.name))+"</div><script>"+stripslashes(htmlDecode(n.script))+"</script></div>")),u[n.id];$("[data-attr="+n.id+"]").animate({left:turn+"px"},0)});var c=0;worldSrc.addEventListener("move",function(p){if(n=JSON.parse(p.data),"1465"==n.id&&(truckLetCoords=a.coordsW,truckLetDoords=a.coordsD),"1678666308imagepng416842183436.png.webp"==n.whatIsThis&&1==n.mpChange&&n.seek==(myNumber[0]+myNumber[2]).replace("#","")&&($("#maennikenBag-"+(myNumber[0]+myNumber[2]).replace("#","")).find(".medal3").length&&$("#maennikenBag-"+(myNumber[0]+myNumber[2]).replace("#","")).find(".medal0").length||0==c&&(c=1)),$("[data-attr="+n.id+"]").length){let a=sMMssM+parseInt(n.coordsD);"b"==am&&(a=-1*(sMMssM+parseInt(n.coordsD)+2*went)),scaleNowDoords=parseInt($("[data-attr="+n.id+"]").attr("distance")),fragileDoordsOld=scaleNowDoords,fragileCoordsGo=parseInt(historyCoords)+parseInt(n.coordsW),i=parseInt($("[data-attr="+n.id+"]").find(".tree").css("left"))!==fragileCoordsGo?1:0,r=a!==fragileDoordsOld?1:0,s=$("[data-attr="+n.id+"]").find(".tree").css("bottom")!==n.coordsH?1:0,l=$("[data-attr="+n.id+"]").find(".tree").css("width")!==n.width?1:0,0==haltEverything&&((1==n.play&&0==n.seek&&n.whatIsThis.includes("audStat")||1==n.play&&t[n.whatIsThis]!==n.play&&n.whatIsThis.includes("audStat"))&&("audStat-16713162473-01Mete"==n.whatIsThis?(document.getElementById("audStat-16713162473-01Mete").src=o,document.getElementById(n.whatIsThis).currentTime=0,document.getElementById(n.whatIsThis).play()):"audStat45614724"==n.whatIsThis?(document.getElementById(n.whatIsThis).src=d,document.getElementById(n.whatIsThis).currentTime=0,document.getElementById(n.whatIsThis).play()):$(".audioStationAudioPlay-"+n.whatIsThis).hasClass("startedSelf")||(document.getElementById(n.whatIsThis).currentTime=n.seek,document.getElementById(n.whatIsThis).play())),2==n.play&&n.whatIsThis.includes("audStat")&&!$("#videoPlayerControlsOuter-"+n.whatIsThis).hasClass("startedSimple")&&document.getElementById(n.whatIsThis).pause(),(n.seek!==e[n.whatIsThis]&&n.whatIsThis.includes("audStat")||n.play!==t[n.whatIsThis]&&n.whatIsThis.includes("audStat"))&&(t[n.whatIsThis]=n.play,e[n.whatIsThis]=n.seek)),1!=i&&1!=r&&1!=s&&1!=l||(1==s&&("1487"==n.id?$("[data-attr="+n.id+"]").find(".tree").animate({bottom:n.coordsH+"px"},{duration:5e3,queue:!1,easing:"linear"}):("1246"==n.id&&$("[data-attr="+n.id+"]").closest(".move").css("transition","bottom .125s linear 0s, transform .125s linear 0s, margin-bottom .125s linear 0s"),$("[data-attr="+n.id+"]").find(".tree").animate({bottom:n.coordsH+"px"},{duration:1e3,queue:!1,easing:"linear"}))),1==i&&("1487"==n.id?$("[data-attr="+n.id+"]").find(".tree").animate({left:fragileCoordsGo+"px"},{duration:5e3,queue:!1,easing:"linear"}):("1246"==n.id&&$("[data-attr="+n.id+"]").closest(".move").css("transition","bottom .125s linear 0s, transform .125s linear 0s, margin-bottom .125s linear 0s"),$("[data-attr="+n.id+"]").find(".tree").animate({left:fragileCoordsGo+"px"},{duration:1e3,queue:!1,easing:"linear"})),"0"==n.minusPlusW&&"0"!==u[n.id]&&($("[data-attr='"+n.id+"']").find(".tree").css({transition:"transform 4.0s linear 0s","transform-origin":"center",transform:"scaleX(1)"}),u[n.id]="0"),"1"==n.minusPlusW&&"1"!==u[n.id]&&($("[data-attr='"+n.id+"']").find(".tree").css({transition:"transform 4.0s linear 0s","transform-origin":"center",transform:"scaleX(-1)"}),u[n.id]="1")),1==r&&("1487"==n.id?$("[data-attr="+n.id+"]").closest(".move").css("transition","bottom 5.0s linear 0s, transform 5.0s linear 0s, margin-bottom 5.0s linear 0s"):("1246"==n.id&&$("[data-attr="+n.id+"]").closest(".move").css("transition","bottom .125s linear 0s, transform .125s linear 0s, margin-bottom .125s linear 0s"),$("[data-attr="+n.id+"]").closest(".move").css("transition","bottom 1.0s linear 0s, transform 1.0s linear 0s, margin-bottom 1.0s linear 0s")),$("[data-attr="+n.id+"]").closest(".move").toggleClass("scale"+fragileDoordsOld).toggleClass("scale"+a),$("[data-attr="+n.id+"]").attr("distance",a)),1==l&&$("[data-attr="+n.id+"]").find(".tree").animate({width:n.width+"px"},500),(n.whatIsThis.includes("audStat")||"ytplayer"==n.whatIsThis)&&(sideVolume[$("#"+n.whatIsThis)]=(1-Math.abs(parseInt($("#"+n.whatIsThis).parent(".tree").css("left"))*(1/7500))).toFixed(2),doordsVolume[$("#"+n.whatIsThis)]=(1-Math.abs(parseInt($("#"+n.whatIsThis).parent(".tree").parent(".move").attr("distance"))*(1/7500))).toFixed(2),sideVolume[$("#"+n.whatIsThis)]<doordsVolume[$("#"+n.whatIsThis)]?setVolume[$("#"+n.whatIsThis)]=sideVolume[$("#"+n.whatIsThis)]:setVolume[$("#"+n.whatIsThis)]=doordsVolume[$("#"+n.whatIsThis)],setVolume[$("#"+n.whatIsThis)]<0&&(setVolume[$("#"+n.whatIsThis)]=0),"ytplayer"==n.whatIsThis?ytplayer.setVolume(100*setVolume[$("#"+n.whatIsThis)]):$("#"+n.whatIsThis)[0].volume=setVolume[$("#"+n.whatIsThis)]))}})}function t(e,t,o,a){$(a).toggleClass("scale"+o).toggleClass("scale"+e),$(a).attr("distance",e)}function o(e){$("#fleoAtHat"+e).length||$("[data-attr="+e+"]").find(".tree").append('<div id="fleoAtHat'+e+'" class="fleoAtHat" data-hat="'+e+'" style="position:absolute;bottom:680px;left:16px;pointer-events:auto;cursor:pointer;"><img src="https://usa.weltfernsehsender.de/fleo.at.hat.png" style="width:190px;height:152px" name="fleo.at.hat.webp" alt="fleo.at.hat.webp" /></div>')}var a,n,i,r,s,l,d,c,p,u=[],m=[],h=0,f=0,g=0;worldSrc="Mobile"!==Device_Type()&&"Tablet"!==Device_Type()?new EventSource("https://"+mainDomain+"/fleo.at-php/world.php?doing=0&spacenumber="+(myNumber[0]+myNumber[2]).replace("#","")):new EventSource("https://"+mainDomain+"/fleo.at-php/world.php?doing=0&spacenumber="+(myNumber[0]+myNumber[2]).replace("#","")+"&mobile=1"),worldSrc.onmessage=function(e){},worldSrc.addEventListener("remove",function(e){n=JSON.parse(e.data),$("[data-attr="+n.id+"]").length&&$("[data-attr="+n.id+"]").remove()}),d=[],worldSrc.addEventListener("lettercoins",function(e){c=JSON.parse(e.data);let t=c.whatIsThis,o=c.lettercoins,a=c.audioStationText;0==haltEverything?($("#audioStationText-"+c.whatIsThis).html(stripslashes(htmlDecode(a))),d[t]=o?o.split(","):[],d[t][1]?$("#letterCoinMillAudioStationTextLettercoin-1-"+t).html(d[t][1]):$("#letterCoinMillAudioStationTextLettercoin-1-"+t).html(""),d[t][2]?$("#letterCoinMillAudioStationTextLettercoin-2-"+t).html(d[t][2]):$("#letterCoinMillAudioStationTextLettercoin-2-"+t).html("")):setTimeout(function(){$("#audioStationText-"+t).html(stripslashes(htmlDecode(a))),d[t]=o?o.split(","):[],d[t][1]?$("#letterCoinMillAudioStationTextLettercoin-1-"+t).html(d[t][1]):$("#letterCoinMillAudioStationTextLettercoin-1-"+t).html(""),d[t][2]?$("#letterCoinMillAudioStationTextLettercoin-2-"+t).html(d[t][2]):$("#letterCoinMillAudioStationTextLettercoin-2-"+t).html("")},1e4)}),worldSrc.onopen=function(){console.log("Connection to server opened ("+mainDomain+"/ world)")},worldSrc.addEventListener("topic",function(e){p=JSON.parse(e.data);let t=p.whatIsThis,o=p.audioStationText;setTimeout(function(){$("#audioStationText-"+t).html(stripslashes(htmlDecode(o)))},1e4)}),worldSrc.addEventListener("genesis",function(e){0==genesisDone&&($("#flash").addClass("ff"),a=JSON.parse(e.data),"1465"==a.id&&(truckLetCoords=a.coordsW,truckLetDoords=a.coordsD),1==firstRoomLoaded&&($("#flash").addClass("fff"),$(".thing").remove(),$(".floor").remove()),$("[data-attr="+a.id+"]").length||(g++,a.whatIsThis.includes("audStat")?0!=haltEverything&&1!=haltEverything||(m[h]+='<div class="move thing scale'+a.coordsD+'" distance="'+a.coordsD+'" playing="'+a.play+'" data-attr="'+a.id+'" data-online="'+a.isOnline+'"><div '+a.object+" width: "+a.width+"px; min-height: 1000px; pointer-events: none; bottom: "+a.coordsH+"px; left: "+a.coordsW+'px;">'+stripslashes(htmlDecode(a.name))+"</div><script>"+stripslashes(htmlDecode(a.script))+"</script></div>"):"on"==a.floor?m[h]+='<div class="move floor scale'+a.coordsD+'" distance="'+a.coordsD+'" playing="'+a.play+'" data-attr="'+a.id+'" data-online="'+a.isOnline+'"><div '+a.object+" width: "+a.width+"px; bottom: "+a.coordsH+"px; left: "+a.coordsW+'px;">'+stripslashes(htmlDecode(a.name))+"</div></div><script>"+stripslashes(htmlDecode(a.script))+"</script>":m[h]+='<div class="move thing scale'+a.coordsD+'" distance="'+a.coordsD+'" playing="'+a.play+'" data-attr="'+a.id+'" data-online="'+a.isOnline+'"><div '+a.object+" width: "+a.width+"px; bottom: "+a.coordsH+"px; left: "+a.coordsW+'px;">'+stripslashes(htmlDecode(a.name))+"</div><script>"+stripslashes(htmlDecode(a.script))+"</script></div>",$("#wrapper").append(m[h]),f%10==0&&(console.log("*** World-Portion "+(h+1)+" loaded ***"),h++),f++,u[a.id]),$("#flash").removeClass("ff"))}),worldSrc.addEventListener("genesis-complete",function(o){if(toastr.success("Genesis done with "+g+" elements."),0==genesisDone&&0==firstRoomLoaded)$("#flash").addClass("fff"),$("body").append('<div id="startUpMessages" style="position:fixed;height:100%;width:100%;background:#00800000;color:blue;font-weight:bold;font-size:30px;bottom:0;left:0;z-index:9999999;perspective-origin:top right;perspective:460px;"><div style="transform-origin:center;transform:scale(1) rotateX(-3deg) rotateY(-1.55deg);position:absolute;text-align:center;height:auto;padding:30px;width:320px;top:120px;right:0;cursor:pointer;background:#ffffff8f;border:20px solid blue;">Let\'s collect and manage memories.<br />We need one click to start sounds.<br />When someone calls you, the browser will first ask for mic and cam. You do not have to accept anything.<br />Willkommen!</div></div>'),$("#startUpMessages").click(function(){$("#startUpMessages").fadeOut(500),setTimeout(function(){haltEverything=0},500),$("#maennikenBag-"+(myNumber[0]+myNumber[2]).replace("#","")).find(".medal2").length||$("#goBuild").click()}),e(),"",readyWorlds=1,firstRoomLoaded=1,genesisDone=1,f=0,h=0,g=0,$("#flash").removeClass("fff");else if(0==genesisDone&&1==firstRoomLoaded){toastr.success("Genesis done with "+g+" elements."),$("#flash").addClass("fff"),$("body").append('<div id="startUpMessages" style="position:fixed;height:100%;width:100%;background:#00800000;color:blue;font-weight:bold;font-size:30px;bottom:0;left:0;z-index:9999999;perspective-origin:top right;perspective:460px;"><div style="transform-origin:center;transform:scale(1) rotateX(-3deg) rotateY(-1.55deg);position:absolute;text-align:center;height:auto;padding:30px;width:320px;top:120px;right:0;cursor:pointer;background:#ffffff8f;border:20px solid blue;">Let\'s collect and manage memories.<br />We need one click to start sounds.<br />When someone calls you, the browser will first ask for mic and cam. You do not have to accept anything.<br />Willkommen!</div></div>'),$("#startUpMessages").click(function(){$("#startUpMessages").fadeOut(500),setTimeout(function(){haltEverything=0},500),$("#maennikenBag-"+(myNumber[0]+myNumber[2]).replace("#","")).find(".medal2").length||$("#goBuild").click()});for(var a=0;a<iii.length;a++)that=iii.item(a),scaleNow=parseInt($(that).attr("distance")),scaleNowNumber=scaleNow,scaleNowNumber+=sMMssM,t(scaleNowNumber,a,scaleNow,that),$(that).find(".tree").animate({left:"+="+parseInt(historyCoords)},0);setTimeout(function(){haltEverything=0},500),"",readyWorlds=1,firstRoomLoaded=1,genesisDone=1,f=0,h=0,g=0,$("#flash").removeClass("fff")}});var y=[],b=[];$("#wrapper").arrive(".audioStation",function(){let e=$(this).parent(".tree").parent(".move").attr("data-attr"),t=$(this).attr("id");o(e),y[t]=0,null==b[t]&&(b[t]=function(){}),$(this).is("video")&&(document.getElementById(t).onplay=function(){$("#"+t).parent(".tree").css({"transform-origin":"center left"}).transition({perspective:"10000px",rotateY:"+=.6deg",duration:350},function(){$("#"+t).parent(".tree").css({"transform-origin":"center left"}).transition({perspective:"10000px",rotateY:"0deg",duration:200})}),$(".audioStationAudioPlay-"+t).hide(),$(".audioStationAudioStop-"+t).show(),$(".audioStationAudioStopLargeSimple-"+t).show(),$(".audioStationAudioStopLargeAll-"+t).show(),$(".audioStationAudioPlayLargeSimple-"+t).hide(),$(".audioStationAudioPlayLargeAll-"+t).hide(),$("#videoPlayerControlsInner-"+t).fadeOut(1e3)},document.getElementById(t).onended=function(){$("#letterCoinMillAudioStationTextLettercoin-1-"+t).effect("pulsate",{times:4},1400,function(){$("#letterCoinMillAudioStationTextLettercoin-1-"+t).css({"pointer-events":"auto",background:"green"})}),$(".audioStationAudioStop-"+t).hide(),$(".audioStationAudioPlay-"+t).show(),$("#audioStationAudioDiv-"+t).animate({bottom:"350px"},1e3),b[t](),$.post("https://"+mainDomain+"/fleo.at-php/fleo.at_timeSeek.php",{doing:2,room:myRoom,audioStation:t,seek:0}),"audStat-16713162473-01Mete"!=$(this).attr("id")&&"audStat45614724"!=$(this).attr("id")||(document.getElementById(n.whatIsThis).src="")},document.getElementById(t).onpause=function(){$("#"+t).parent(".tree").css({"transform-origin":"bottom left"}).transition({perspective:"10000px",scale:"-=0.04",duration:200},function(){$("#"+t).parent(".tree").css({"transform-origin":"bottom left"}).transition({perspective:"10000px",scale:"+=0.04",duration:350})}),$(".audioStationAudioStop-"+t).hide(),$(".audioStationAudioPlay-"+t).show(),$(".audioStationAudioStopLargeSimple-"+t).hide(),$(".audioStationAudioStopLargeAll-"+t).hide(),$(".audioStationAudioPlayLargeSimple-"+t).show(),$(".audioStationAudioPlayLargeAll-"+t).show(),"audStat-16713162473-01Mete"!=$(this).attr("id")&&"audStat45614724"!=$(this).attr("id")||(document.getElementById(n.whatIsThis).src="")},$(this).css({"z-index":0}),$(this).parent().append('<div id="videoPlayerControlsOuter-'+t+'" class="startedSimple" style="position:absolute;width:calc(100% - 230px);margin-left:230px;left:0;bottom:0;min-height:600px;height:100%;pointer-events:auto;z-index:100000;"><div id="videoPlayerControlsInner-'+t+'" style="position:absolute;width:100%;left:0;bottom:50px;height:100%;z-index:300000;"><img class="audioStationAudioPlayLargeSimple-'+t+'" style="position:absolute;bottom:0;width:50%;height:auto;cursor:pointer;pointer-events:auto;filter:drop-shadow(0 -10px 40px #000000);" src="/fleo.at-medien/layout/audio/playforsimple.png" /><img class="audioStationAudioPlayLargeAll-'+t+'" style="position:absolute;left:50%;bottom:0;width:50%;height:auto;cursor:pointer;pointer-events:auto;filter:drop-shadow(0 -10px 40px #000000);" src="/fleo.at-medien/layout/audio/playforall.png" /><img class="audioStationAudioStopLargeSimple-'+t+'" style="position:absolute;bottom:0;width:50%;height:auto;cursor:pointer;pointer-events:auto;filter:drop-shadow(0 -10px 40px #000000);display:none;" src="/fleo.at-medien/layout/audio/stopforsimple.png" /><img class="audioStationAudioStopLargeAll-'+t+'" style="position:absolute;left:50%;bottom:0;width:50%;height:auto;cursor:pointer;pointer-events:auto;filter:drop-shadow(0 -10px 40px #000000);display:none;" src="/fleo.at-medien/layout/audio/stopforall.png" /><div id="videoPlayerInnerSeek-'+t+'" style="background:#00ff002f;position:absolute;width:100%;left:0;bottom:-50px;height:50px;"><div id="videoPlayerInnerSeekBar-'+t+'" style="background:#00ff002f;position:absolute;width:100%;left:0;bottom:0;height:50px;pointer-events:auto;"></div></div></div></div>'),$(".audioStationAudioPlay-"+t).click(function(){}),$(".audioStationAudioStop-"+t).click(function(){$("#videoPlayerControlsOuter-"+t).hasClass("startedSimple")?document.getElementById(t).pause():$.post("https://"+mainDomain+"/fleo.at-php/fleo.at_timeSeek.php",{doing:2,room:myRoom,audioStation:t,seek:document.getElementById(t).currentTime})}),$(".audioStationAudioPlayLargeSimple-"+t).click(function(){document.getElementById(t).play(),$("#videoPlayerControlsOuter-"+t).removeClass("startedAll").addClass("startedSimple")}),$(".audioStationAudioStopLargeSimple-"+t).click(function(){document.getElementById(t).pause()}),$(".audioStationAudioPlayLargeAll-"+t).click(function(){$("#videoPlayerControlsOuter-"+t).removeClass("startedSimple").addClass("startedAll"),$.post("https://"+mainDomain+"/fleo.at-php/fleo.at_timeSeek.php",{doing:4,room:myRoom,audioStation:t}).done(function(e){document.getElementById(t).currentTime=e,setTimeout(function(){$.post("https://"+mainDomain+"/fleo.at-php/fleo.at_timeSeek.php",{doing:1,room:myRoom,audioStation:t,seek:document.getElementById(t).currentTime})},1500)})}),$(".audioStationAudioStopLargeAll-"+t).click(function(){$.post("https://"+mainDomain+"/fleo.at-php/fleo.at_timeSeek.php",{doing:2,room:myRoom,audioStation:t,seek:document.getElementById(t).currentTime})}),document.getElementById(t).oncanplaythrough=function(){$("#videoPlayerInnerSeekBar-"+t).slider({animate:"fast",range:"max",min:0,max:Math.round(document.getElementById(t).duration),step:1,start:function(e,o){$("#videoPlayerControlsInner-"+t).addClass("seeking"),$("#videoPlayerControlsOuter-"+t).hasClass("startedSimple")?document.getElementById(t).pause():$.post("https://"+mainDomain+"/fleo.at-php/fleo.at_timeSeek.php",{doing:2,room:myRoom,audioStation:t,seek:o.value})},slide:function(e,o){document.getElementById(t).currentTime=o.value},stop:function(e,o){$("#videoPlayerControlsInner-"+t).removeClass("seeking"),$("#videoPlayerControlsOuter-"+t).hasClass("startedSimple")?document.getElementById(t).play():setTimeout(function(){$.post("https://"+mainDomain+"/fleo.at-php/fleo.at_timeSeek.php",{doing:1,room:myRoom,audioStation:t,seek:o.value})},500)},create:function(){$("#videoPlayerControlsOuter-"+t).mouseover(function(){$("#videoPlayerControlsInner-"+t).show()}),$(".audioStationAudioStopLargeSimple-"+t).mouseleave(function(){$("#videoPlayerControlsInner-"+t)[0].matches(".seeking")||$("#videoPlayerControlsInner-"+t).hide()}),$(".audioStationAudioStopLargeAll-"+t).mouseleave(function(){$("#videoPlayerControlsInner-"+t)[0].matches(".seeking")||$("#videoPlayerControlsInner-"+t).hide()}),$("#videoPlayerInnerSeekBar-"+t).mouseleave(function(){$(".audioStationAudioStopLargeSimple-"+t).is(":visible")&&($("#videoPlayerControlsInner-"+t)[0].matches(".seeking")||$("#videoPlayerControlsInner-"+t).hide())}),$("#videoPlayerControlsOuter-"+t).mouseleave(function(){$("#videoPlayerControlsInner-"+t)[0].matches(".seeking")||$("#videoPlayerControlsInner-"+t).hide()}),document.getElementById(t).ontimeupdate=function(){$("#audioStationAudioDiv-"+t).css("bottom",322-document.getElementById(t).currentTime/document.getElementById(t).duration*100*3.22+28),$("#videoPlayerInnerSeekBar-"+t).slider("value",document.getElementById(t).currentTime),y[t]%30==0&&$.post("https://"+mainDomain+"/fleo.at-php/fleo.at_timeSeek.php",{doing:3,room:myRoom,audioStation:t,seek:document.getElementById(t).currentTime}),y[t]++}}}),doLettercoinPayments($("#"+t).parent().find(".fleoAtHat").attr("id").replace("fleoAtHat",""),t),$("#"+t).parent(".tree").css({"min-height":$(this).height(),filter:"drop-shadow(0 -10px 40px #0000007f)"})}),$(this).is("audio")&&(document.getElementById(t).onplay=function(){$(".audioStationAudioPlay-"+t).hide(),$(".audioStationAudioStop-"+t).show()},document.getElementById(t).onended=function(){$("#letterCoinMillAudioStationTextLettercoin-1-"+t).effect("pulsate",{times:4},1400,function(){$("#letterCoinMillAudioStationTextLettercoin-1-"+t).css({"pointer-events":"auto",background:"green"})}),$(".audioStationAudioStop-"+t).hide(),$(".audioStationAudioPlay-"+t).show(),$("#audioStationAudioDiv-"+t).animate({bottom:"350px"},1e3),b[t](),$.post("https://"+mainDomain+"/fleo.at-php/fleo.at_timeSeek.php",{doing:2,room:myRoom,audioStation:t,seek:0}),$(".audioStationAudioPlay-"+t).removeClass("startedSelf")},document.getElementById(t).onpause=function(){$(".audioStationAudioStop-"+t).hide(),$(".audioStationAudioPlay-"+t).show(),$(".audioStationAudioPlay-"+t).removeClass("startedSelf")},$(".audioStationAudioPlay-"+t).click(function(){$(".audioStationAudioPlay-"+t).addClass("startedSelf"),"audStat-16713162473-01Mete"==t||"audStat45614724"==t?$.post("https://"+mainDomain+"/fleo.at-php/fleo.at_timeSeek.php",{doing:1,room:myRoom,audioStation:t,seek:0}):$.post("https://"+mainDomain+"/fleo.at-php/fleo.at_timeSeek.php",{doing:4,room:myRoom,audioStation:t}).done(function(e){document.getElementById(t).currentTime=e,document.getElementById(t).play(),$.post("https://"+mainDomain+"/fleo.at-php/fleo.at_timeSeek.php",{doing:1,room:myRoom,audioStation:t,seek:document.getElementById(t).currentTime})})}),$(".audioStationAudioStop-"+t).click(function(){$.post("https://"+mainDomain+"/fleo.at-php/fleo.at_timeSeek.php",{doing:2,room:myRoom,audioStation:t,seek:document.getElementById(t).currentTime})}),document.getElementById(t).oncanplaythrough=function(){document.getElementById(t).ontimeupdate=function(){"audStat-16713162473-01Mete"==t||"audStat45614724"==t||($("#audioStationAudioDiv-"+t).css("bottom",322-document.getElementById(t).currentTime/document.getElementById(t).duration*100*3.22+28),$("#videoPlayerInnerSeekBar-"+t).slider("value",document.getElementById(t).currentTime),$(".audioStationAudioPlay-"+t).hasClass("startedSelf")&&(y[t]%30==0&&$.post("https://"+mainDomain+"/fleo.at-php/fleo.at_timeSeek.php",{doing:3,room:myRoom,audioStation:t,seek:document.getElementById(t).currentTime}),y[t]++))},doLettercoinPayments($("#"+t).parent().find(".fleoAtHat").attr("id").replace("fleoAtHat",""),t)})})}function socketDataConnect(){function e(e){r=e.coords.latitude,s=e.coords.longitude,$("#sensorsLat").html(e.coords.latitude),ws.send(JSON.stringify({type:"geoLat",value:e.coords.latitude,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})),$("#sensorsLon").html(e.coords.longitude),ws.send(JSON.stringify({type:"geoLon",value:e.coords.longitude,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})),1==a&&moveWithTrain(Math.trunc(-1e3*e.coords.longitude),Math.trunc(-300*e.coords.latitude),200,0,0)}function t(){$("#unbindLocation").css("background","#ff0000").animate({"background-color":"rgb(214, 214, 195)"},5e3)}function o(){setTimeout(function(){function e(e){1==wsOk&&1==l&&$("#sensorsLat").html(e.coords.latitude),ws.send(JSON.stringify({type:"geoLat",value:e.coords.latitude,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})),1==wsOk&&1==l&&$("#sensorsLon").html(e.coords.longitude),ws.send(JSON.stringify({type:"geoLon",value:e.coords.longitude,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})),1==wsOk&&1==l&&$("#sensorsHeading").html(e.coords.heading),ws.send(JSON.stringify({type:"geoHeading",value:e.coords.heading,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")}))}function t(){}$("body").append('<div id="sensorsWall" style="pointer-events:none;position:fixed;width:300px;height:420px;bottom:0;right:0;background:#ffffff4f;color:#ffffff7f;display:none;"></div>'),$("#sensorsWall").append('<span>Lat</span><div id="sensorsLat">empty</div><span>Lon</span><div id="sensorsLon">empty</div><span>Heading</span><div id="sensorsHeading">empty</div>');var o={enableHighAccuracy:!0,timeout:5e3,maximumAge:200};watchPosition=navigator.geolocation.watchPosition(e,t,o);var a=FULLTILT.getDeviceOrientation({type:"world"});$("#sensorsWall").append('<span>orientationCompass</span><div id="orientationAlpha">empty</div><span>orientationUpDown</span><div id="orientationBeta">empty</div><span>orientationTurn</span><div id="orientationGamma">empty</div><span>webkitCompass</span><div id="webkitCompass">empty</div><span>webkitCompassAccuracy</span><div id="webkitCompassAccuracy">empty</div>'),a.then(function(e){e.listen(function(){var t=e.getLastRawEventData();1==wsOk&&1==l&&$("#orientationAlpha").html(t.alpha),ws.send(JSON.stringify({type:"orientationAlpha",value:t.alpha,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})),1==wsOk&&1==l&&$("#orientationBeta").html(t.beta),ws.send(JSON.stringify({type:"orientationBeta",value:t.beta,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})),1==wsOk&&1==l&&$("#orientationGamma").html(t.gamma),ws.send(JSON.stringify({type:"orientationGamma",value:t.gamma,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})),ws.send(JSON.stringify({type:"orientationCompass",value:t.absolute,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})),1==wsOk&&1==l&&$("#webkitCompass").html(t.beta),ws.send(JSON.stringify({type:"webkitCompass",value:t.beta,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})),1==wsOk&&1==l&&$("#webkitCompassAccuracy").html(t.webkitCompassAccuracy),ws.send(JSON.stringify({type:"webkitCompassAccuracy",value:t.webkitCompassAccuracy,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")}))})}),$("#sensorsWall").append('<span>AccX</span><div id="sensorsAccx">empty</div><span>AccY</span><div id="sensorsAccy">empty</div><span>AccZ</span><div id="sensorsAccz">empty</div>');let n=null;try{n=new Accelerometer({frequency:10}),n&&(n.addEventListener("reading",()=>{1==wsOk&&1==l&&$("#sensorsAccx").html(n.x),ws.send(JSON.stringify({type:"accX",value:n.x,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})),1==wsOk&&1==l&&$("#sensorsAccy").html(n.y),ws.send(JSON.stringify({type:"accY",value:n.y,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})),1==wsOk&&1==l&&$("#sensorsAccz").html(n.z),ws.send(JSON.stringify({type:"accZ",value:n.z,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")}))}),n.start())}catch(e){}$("#sensorsWall").append('<span>GraX</span><div id="sensorsGrax">empty</div><span>GraY</span><div id="sensorsGray">empty</div><span>GraZ</span><div id="sensorsGraz">empty</div>');let i=null;try{i=new GravitySensor({frequency:10}),i&&(i.addEventListener("reading",e=>{1==wsOk&&1==l&&$("#sensorsGrax").html(i.x),ws.send(JSON.stringify({type:"graX",value:i.x,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})),1==wsOk&&1==l&&$("#sensorsGray").html(i.y),ws.send(JSON.stringify({type:"graY",value:i.y,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})),1==wsOk&&1==l&&$("#sensorsGraz").html(i.z),ws.send(JSON.stringify({type:"graZ",value:i.z,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")}))}),i.start())}catch(e){}$("#sensorsWall").append('<span>GyrX</span><div id="sensorsGyrx">empty</div><span>GyrY</span><div id="sensorsGyry">empty</div><span>GyrZ</span><div id="sensorsGyrz">empty</div>');let r=null;try{r=new Gyroscope({frequency:10}),r&&(r.addEventListener("reading",e=>{1==wsOk&&1==l&&$("#sensorsGyrx").html(r.x),ws.send(JSON.stringify({type:"gyrX",value:r.x,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})),1==wsOk&&1==l&&$("#sensorsGyry").html(r.y),ws.send(JSON.stringify({type:"gyrY",value:r.y,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})),1==wsOk&&1==l&&$("#sensorsGyrz").html(r.z),ws.send(JSON.stringify({type:"gyrZ",value:r.z,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")}))}),r.start())}catch(e){}$("#sensorsWall").append('<span>AccLX</span><div id="sensorsAccLinx">empty</div><span>AccLY</span><div id="sensorsAccLiny">empty</div><span>AccLZ</span><div id="sensorsAcclinz">empty</div>');let s=null;try{s=new LinearAccelerationSensor({frequency:10}),s&&(s.addEventListener("reading",e=>{1==wsOk&&1==l&&$("#sensorsAccLinx").html(s.x),ws.send(JSON.stringify({type:"accLX",value:s.x,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})),
1==wsOk&&1==l&&$("#sensorsAccLiny").html(s.y),ws.send(JSON.stringify({type:"accLY",value:s.y,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})),1==wsOk&&1==l&&$("#sensorsAccLinz").html(s.z),ws.send(JSON.stringify({type:"accLZ",value:s.z,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")}))}),s.start())}catch(e){}$("#sensorsWall").append('<span>MagX</span><div id="sensorsMagx">empty</div><span>MagY</span><div id="sensorsMagy">empty</div><span>MagZ</span><div id="sensorsMagz">empty</div>');let d=null;try{d=new Magnetometer({frequency:10}),d&&(d.addEventListener("reading",e=>{1==wsOk&&1==l&&$("#sensorsMagx").html(d.x),ws.send(JSON.stringify({type:"magX",value:d.x,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})),1==wsOk&&1==l&&$("#sensorsMagy").html(d.y),ws.send(JSON.stringify({type:"magY",value:d.y,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})),1==wsOk&&1==l&&$("#sensorsMagz").html(d.z),ws.send(JSON.stringify({type:"magZ",value:d.z,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")}))}),d.start())}catch(e){}},2e3),$("#sensorsWall").append('<span>Amb</span><div id="sensorsAmb">empty</div>');let e=null;try{"AmbientLightSensor"in window&&(e=new AmbientLightSensor,e.addEventListener("reading",e=>{1==wsOk&&1==l&&$("#sensorsAmb").html(sensor.illuminance),ws.send(JSON.stringify({type:"ambL",value:sensor.illuminance,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")}))}),sensor.start())}catch(e){}}$.post("/fleo.at-php/fleo.at_sensorsStart.php",{doing:1,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")});var a=0,n=0,i={enableHighAccuracy:!0,timeout:5e3,maximumAge:200},r="noLatYet",s="noLonYet";$("#unbindLocation").click(function(){a=0,$("#drive").show(),$("#speedPlus").show(),$("#speedMinus").show(),$("#bindLocation").show(),$("#unbindLocation").hide()}),$("#bindLocation").click(function(){a=1,1==n&&"noLatYet"!==r&&"noLonYet"!==s&&moveWithTrain(Math.trunc(-1e3*s),Math.trunc(-300*r),200,0,0),0==n&&(n=1,watchPosition=navigator.geolocation.watchPosition(e,t,i)),$("#drive").hide(),$("#speedPlus").hide(),$("#speedMinus").hide(),$("#bindLocation").hide(),$("#unbindLocation").show(),clearInterval(drive),driving=0,$("#drive").css("background","rgb(214, 214, 195)")});if(window.self==window.top)var l=1;else l=0;if("demand"==myRoom||"demandNew"==myRoom||"weltfernsehsender.de"==myRoom&&0==insideWeltpolizei||"interlectual.org"==myRoom&&0==insideWeltpolizei){$("body").append('<div id="overlaySensors" style="position:fixed;top:0;left:0;width:100%;height:100%;background:#B0CECD;background:linear-gradient(45deg, #B0CECD4f 0%, #6279C54f 100%);color:blue;text-shadow: 4px 4px 2px #fff;font-size:50px;font-weight:bold;text-align:center;padding:400px 0 400px 0;z-index:999999999;">Technical 5 seconds, wait ...</div>'),$("body").append('<div id="demandLink" style="position:fixed;width:40%;height:100%;left:26%;top:0;padding:20px;background:rgb(214, 214, 195);border-left:2vw solid black;border-right:2vw solid black;font-size:20px;color:black;font-weight:bold;z-index:999999;"><h2>Are you personally affected with a problem?</h2><p><div id="demandYes" style="width:100px;height:50px;background:red;border:10px solid gray;color:white;font-weight:bold;text-align:center;padding:5px;">Yes</div><div id="demandNo" style="width:100px;height:50px;background:green;border:10px solid gray;color:white;font-weight:bold;cursor:pointer;text-align:center;padding:5px;">No</div></p><p>(This question is for ask for camera, microphone, location and sensors.)</p><p class="camMicSensorsTimeout">(Camera and microphone will start in <span class="secondsToCall" style="background:white;"></span> seconds.)<br /><br /><button class="abortLoadingCamMicLocationSensors" style="font-size:26px;">Abort loading Cam and Mic</button></p></div>');var d=15,c=setInterval(function(){d--,$(".secondsToCall").html(d),0==d&&(clearTimeout(c),$.post("/fleo.at-php/present.php",{personally:"time"}),$("#demandLink").hide(),$("#goReal").click(),$("#bindLocation").click(),$("#startSensors").click(),setTimeout(function(){$("#push2TalkUserWants").click()},6e3),setTimeout(function(){$("#walkAroundWithVideoAudioAutoAccept").click(),$("#hearLikeOwl").click()},1e4))},1e3);$(".abortLoadingCamMicLocationSensors").click(function(){clearTimeout(c),$.post("/fleo.at-php/present.php",{personally:"noCallWanted"}),$(".camMicSensorsTimeout").hide()}),$("#demandYes").click(function(){clearTimeout(c),$.post("/fleo.at-php/present.php",{personally:"yes"}),$("#demandLink").hide(),$("#goReal").click(),$("#bindLocation").click(),$("#startSensors").click(),setTimeout(function(){$("#push2TalkUserWants").click()},6e3),setTimeout(function(){$("#walkAroundWithVideoAudioAutoAccept").click(),$("#hearLikeOwl").click()},1e4)}),$("#demandNo").click(function(){clearTimeout(c),$.post("/fleo.at-php/present.php",{personally:"no"}),$("#demandLink").hide(),$("#goReal").click(),$("#bindLocation").click(),$("#startSensors").click(),setTimeout(function(){$("#push2TalkUserWants").click()},6e3),setTimeout(function(){$("#walkAroundWithVideoAudioAutoAccept").click(),$("#hearLikeOwl").click()},1e4)}),setTimeout(function(){$("#overlaySensors").hide()},5e3),setTimeout(function(){$("#startUpMessages").click()},7e3)}$("#startSensors").click(function(){1,$("#startSensors").hide(),$("#menuBottom").append('<div id="sensorsWallOnOff" class="cockpit menuItem">Show Data</div>'),$("#sensorsWallOnOff").click(function(){$("#sensorsWall").slideToggle("slow")}),o()})}function changeName(){0==changeNameVisible?(spacebarText=1,$("#changeNameForm").show(),$("#chnNam").val(myNumber[1]),changeNameVisible=1):(spacebarText=0,$("#changeNameForm").hide(),changeNameVisible=0)}function doTheAudioStationStuff(){function e(){$("#audioStationTextContainer").append('<div id="push2TalkUserCheck" style="position:absolute;z-index:8000;top:0;left:0;width:200px;height:30px;cursor:pointer;background:white;color:black;border:1px solid black;border-bottom-right-radius:15px;border-bottom-left-radius:15px;text-align:center;font-size:24px;display:none;">Check Audio ...</div><div id="push2TalkUser" style="position:absolute;z-index:7776;top:340px;left:34px;width:140px;height:140px;cursor:pointer;"><img src="/fleo.at-js/push2Talk/fleoRec.webp" /></div><div id="push2TalkUserUpload" style="position:absolute;z-index:7776;top:340px;left:34px;width:140px;height:140px;cursor:pointer;display:none;"><img src="/fleo.at-js/push2Talk/fleoRecStop.webp" /></div><div class="maennikenAudioWhite-rec" style="position:absolute;z-index:7776;top:170px;left:34px;width:140px;height:140px;cursor:pointer;"><img src="/fleo.at-js/push2Talk/fleoRecWhite.webp" /></div><div class="maennikenAudioPlay-rec" style="position:absolute;z-index:7776;top:170px;left:34px;width:140px;height:140px;cursor:pointer;display:none;"><img src="/fleo.at-js/push2Talk/fleoPlay.webp" /></div><div class="maennikenAudioStop-rec" style="position:absolute;z-index:7776;top:170px;left:34px;width:140px;height:140px;cursor:pointer;display:none;"><img src="/fleo.at-js/push2Talk/fleoStop.webp" /></div>'),document.getElementById("callerAudio-ReplaySound").onplay=function(){$(".maennikenAudioWhite-rec").hide(),$(".maennikenAudioPlay-rec").hide(),$(".maennikenAudioStop-rec").show()},document.getElementById("callerAudio-ReplaySound").onended=function(){$(".maennikenAudioStop-rec").hide(),$(".maennikenAudioPlay-rec").show()},document.getElementById("callerAudio-ReplaySound").onpause=function(){$(".maennikenAudioStop-rec").hide(),$(".maennikenAudioPlay-rec").show()},document.getElementById("callerAudio-ReplayPlaySound").onplay=function(){$(".maennikenAudioWhite-rec").hide(),$(".maennikenAudioPlay-rec").hide(),$(".maennikenAudioStop-rec").show()},document.getElementById("callerAudio-ReplayPlaySound").onended=function(){$(".maennikenAudioStop-rec").hide(),$(".maennikenAudioPlay-rec").show()},document.getElementById("callerAudio-ReplayPlaySound").onpause=function(){$(".maennikenAudioStop-rec").hide(),$(".maennikenAudioPlay-rec").show()},document.getElementById("callerAudio-Own").onplay=function(){$(".maennikenAudioWhite-rec").hide(),$(".maennikenAudioPlay-rec").hide(),$(".maennikenAudioStop-rec").show()},document.getElementById("callerAudio-Own").onended=function(){$(".maennikenAudioStop-rec").hide(),$(".maennikenAudioPlay-rec").show()},document.getElementById("callerAudio-Own").onpause=function(){$(".maennikenAudioStop-rec").hide(),$(".maennikenAudioPlay-rec").show()},$(".maennikenAudioPlay-rec").click(function(){0==audioSystemJustLoaded&&0==recordingReset&&document.getElementById("callerAudio-Own").play()}),$(".maennikenAudioStop-rec").click(function(){document.getElementById("callerAudio-Own").pause(),document.getElementById("callerAudio-ReplayPlaySound").pause(),document.getElementById("callerAudio-ReplaySound").pause()}),$("#push2Talk5s").click(function(){let e=4;$("#push2TalkUser").click();for(let t=0;t<6;t++)setTimeout(function(){$("#push2Talk5s").html(e+"s"),$("#push2Talk5s").css("background","white"),e>0&&$("#push2Talk5s").animate({background:"blue"}),0==e&&$("#push2Talk5s").css({background:"red"}),e--,5==t&&($("#push2TalkUserUpload").click(),$("#push2Talk5s").html("5s"),$("#push2Talk5s").css({background:"white"}))},1e3*t)}),$("#push2Talk10s").click(function(){let e=9;$("#push2TalkUser").click();for(let t=0;t<11;t++)setTimeout(function(){$("#push2Talk10s").html(e+"s"),$("#push2Talk10s").css("background","white"),e>0&&$("#push2Talk10s").animate({backgroundColor:"blue"}),0==e&&$("#push2Talk10s").css({background:"red"}),e--,10==t&&($("#push2TalkUserUpload").click(),$("#push2Talk10s").html("10s"),$("#push2Talk10s").css({background:"white"}))},1e3*t)}),$("#push2TalkRec").click(function(){$("#push2TalkUser").click()}),$("#push2TalkRecUpload").click(function(){$("#push2TalkUserUpload").click()});var e=0;0==e&&($("#push2TalkUserCheck").slideDown(),$("#push2Talk5s").slideDown(),$("#push2Talk10s").slideDown(),e=1)}$("#fullAgain").click(),setTimeout(function(){$("input[name=buildnameAS]").attr("readonly",!1)},5e3),$("input[name=buildnameAS]").on("input",function(e){$("#audioStationBuildText").html($("input[name=buildnameAS]").val())}),$("input[name=audioStationUrl]").on("input",function(e){$("#callerAudio-Own").attr("src",$("input[name=audioStationUrl]").val()),$("#callerAudio-ReplaySound").attr("src",$("input[name=audioStationUrl]").val()),myAudioReplayPlay=document.getElementById("callerAudio-ReplaySound"),0==audioSystemJustLoaded&&0==recordingReset&&myAudioReplayPlay.play(),myCodeMirror3.setValue('<audio class="audioStation" id="'+$("#monsterID").val()+'" src="'+$("input[name=audioStationUrl]").val()+'"></audio><div id="audioStationAudioDiv-'+$("#monsterID").val()+'" class="audioStationAudioDiv-'+$("#monsterID").val()+'" style="width:140px;height:140px;border:16px solid #ffffff00;text-align:center;position:absolute;bottom:350px;left:24px;pointer-events:auto;"><div class="audioStationAudioPlay-'+$("#monsterID").val()+'" style="cursor:pointer;"><img src="/fleo.at-js/push2Talk/fleoPlay.webp" style="position:absolute;top:0;left:0;width:100%;height:100%;" alt="fleo.Controls Play" /></div><div class="audioStationAudioStop-'+$("#monsterID").val()+'" style="display:none;cursor:pointer;"><img src="/fleo.at-js/push2Talk/fleoStop.webp" style="position:absolute;top:0;left:0;width:100%;height:100%;" alt="fleo.Controls Stop" /></div></div><div id="audioStationText-'+$("#monsterID").val()+'" style="font-weight:bold;pointer-events:auto;" contenteditable="true"></div><div id="letterCoinMillAudioStationTextLettercoin-1-'+$("#monsterID").val()+'" style="position:absolute;margin:auto;display:flex;align-items:center;justify-content:center;bottom:0;height:56px;left:18px;width:56px;border:2px solid gray;border-radius:30px;overflow:hidden;padding:0px;font-size:56px;text-align:center;font-family:Courier,monospace;color:yellow;"></div><div id="letterCoinMillAudioStationTextLettercoin-2-'+$("#monsterID").val()+'" style="position:absolute;margin:auto;display:flex;align-items:center;justify-content:center;bottom:0;height:56px;left:138px;width:56px;border:2px solid gray;border-radius:30px;overflow:hidden;padding:0px;font-size:56px;text-align:center;font-family:Courier,monospace;color:yellow;"></div><img src="/fleo.at-medien/audioStation_I.webp" style="width:216px;height:704px;pointer-events:none;" class="audioStationImg" alt="audioStation" />'),myCodeMirror4.setValue("")}),e(),$("#savebtnAudioStation").click(function(){$("input[name=buildnameAS]").val($("#audioStationBuildText").html()),$("#add-formAS").submit(function(e){return e.preventDefault(),$.ajax({cache:!1,type:"POST",url:"https://"+mainDomain+"/fleo.at-php/fleo.at_audioStationSave.php",data:$(this).serialize(),success:function(e){$("#thisBox").hide(),edith=0,spacebarText=0,toastr.success("Audio-Station hinzugef√ºgt  ...")}}),!1})}),$("#cancelbtn").click(function(){$("#thisBox").hide(),edith=0,spacebarText=0}),$("#fullAgain").click(function(){$("#fullAgain").hide(),$("#thisBox").css("height","80%")}),setTimeout(function(){$(window).width()<800||$(window).height()<680?($("#thisBoxDialog").dialog("option","width",$(window).width()),$("#thisBoxDialog").dialog("option","height",$(window).height()),$("#thisBoxDialog").dialog("option","position",{my:"left top",at:"left top"})):($("#thisBoxDialog").dialog("option","width",800),$(window).height()<680?$("#thisBoxDialog").dialog("option","height",$(window).height()):$("#thisBoxDialog").dialog("option","height",680)),$(".person").each(function(){changeVolumeMeMoving($(this).attr("id").replace("personCode-",""))})},500)}function loadVideoSystem(){$("#walkAroundWithVideo").click(function(){0==userStartedOwnVideo&&($.post("/fleo.at-php/fleo.at_videoSizer.php",{doing:1,fleoNum:(myNumber[0]+myNumber[2]).replace("#",""),videoSize:1}),$("#connectButton").click(),$("#walkAroundWithVideoAudioAutoAccept").show(),$("#walkAroundWithVideoAudioAutoReject").show(),$("#hearLikeOwl").show(),$("#walkAroundWithVideoAudioAutoAccept").click(function(){"off"==audioAutoAccept?($("#walkAroundWithVideoAudioAutoAccept").css("text-decoration","none"),$("#walkAroundWithVideoAudioAutoAccept").attr("data-audioautoaccept","on"),audioAutoAccept="on",$("#walkAroundWithVideoAudioAutoReject").css("text-decoration","line-through"),$("#walkAroundWithVideoAudioAutoReject").attr("data-audioautoreject","off"),audioAutoReject="off"):($("#walkAroundWithVideoAudioAutoAccept").css("text-decoration","line-through"),$("#walkAroundWithVideoAudioAutoAccept").attr("data-audioautoaccept","off"),audioAutoAccept="off")}),$("#walkAroundWithVideoAudioAutoReject").click(function(){"off"==audioAutoReject?($("#walkAroundWithVideoAudioAutoReject").css("text-decoration","none"),$("#walkAroundWithVideoAudioAutoReject").attr("data-audioautoreject","on"),audioAutoReject="on",$("#walkAroundWithVideoAudioAutoAccept").css("text-decoration","line-through"),$("#walkAroundWithVideoAudioAutoAccept").attr("data-audioautoaccept","off"),audioAutoAccept="off"):($("#walkAroundWithVideoAudioAutoReject").css("text-decoration","line-through"),$("#walkAroundWithVideoAudioAutoReject").attr("data-audioautoreject","off"),audioAutoReject="off")}),$("#walkAroundWithVideo").hide(),userStartedOwnVideo=1,navigator.mediaDevices.getUserMedia({audio:{sampleSize:16,sampleRate:48e3,echoCancellation:!0,noiseSuppression:!1,autoGainControl:!1},video:{}}).then(function(){navigator.mediaDevices.enumerateDevices().then(function(e){function t(){y==allDevices.length&&(y=0);var e=allDevices[y];l=e.kind,d=e.deviceId,y++}function o(){p=document.getElementById("videoMagic"),u=document.getElementById("canvasMagic"),cameraMagic=document.getElementById("cameraMagic"),controlMagicContainer=document.getElementById("videoMagicControl"),m=document.getElementById("startbutton"),h=document.getElementById("stopbutton"),selectVideoArea=document.getElementById("selectVideoArea"),t(),"videoinput"!==l&&t(),navigator.mediaDevices.getUserMedia({video:{deviceId:d}}).then(function(e){p.srcObject=e,p.height=640/p.videoWidth*p.videoHeight,p.width=640,setTimeout(function(){$("#selectVideoArea").css({background:"#ffffff4f",width:$("#videoMagic").css("width"),height:$("#videoMagic").css("height")}),videoSizeWidthSelect=320,videoSizeHeightSelect=2*parseInt($("#selectVideoArea").css("height"))},500),p.play(),0==b&&(a(),b=1)}).catch(function(e){0,p.srcObject=null,o()})}function a(){p.addEventListener("canplay",function(e){p.height=640/p.videoWidth*p.videoHeight,p.width=640,videoSizeHeight=p.height/2,videoSizeWidth=p.width/2,$("#walkVideoChooser").css({bottom:videoSizeHeight/2}),$("#walkVideoSizer").css({bottom:videoSizeHeight/2}),c||(c=!0)},!1),m.addEventListener("click",function(e){n(),e.preventDefault(),i()},!1),h.onclick=function(){r()}}function n(){f=setInterval(function(){if(1==g){var e=u.getContext("2d");u.width=videoSizeWidthSelect,u.height=videoSizeHeightSelect,p.height=640/p.videoWidth*p.videoHeight,p.width=640,e.drawImage(p,-2*videoSizeLeft,-2*videoSizeTop,p.width/2,p.height/2),1==faceOn&&doFace();var t=u.toDataURL("image/jpeg",.95-16*videoOutputSizer);t=t.replace("data:image/jpeg;base64,",""),ws.readyState===WebSocket.OPEN?ws.send(JSON.stringify({type:"video",fleoNum:(myNumber[0]+myNumber[2]).replace("#",""),boingy:t})):$.ajax({type:"POST",url:"/fleo.at-php/post.fleo.php",dataType:"text",data:{fleoNum:(myNumber[0]+myNumber[2]).replace("#",""),boingy:t}}).done(function(){g=1})}},s)}function i(){g=1,m.style.display="none",h.style.display="block"}function r(){g=2,clearInterval(f),m.style.display="block",h.style.display="none"}allDevices=e,$("body").append('<div id="walkVideoChooser" class="cockpit" style="position:fixed;z-index:997776;bottom:120px;left:0;width:70px;height:30px;cursor:pointer;background:white;color:black;text-align:center;font-size:24px;padding: 0 5px;">Cam</div><div id="walkVideoSizer" class="cockpit" style="position:fixed;z-index:997776;bottom:120px;left:70px;width:auto;height:30px;cursor:pointer;background:white;color:black;text-align:center;font-size:24px;padding: 0 5px;">++</div><div class="volumeClickcallerAudio-Own" style="cursor:pointer;position:fixed;z-index:997776;bottom:0;left:160px;width:20px;height:120px;"><div class="volumeMetercallerAudio-Own" style="position:absolute;z-index:-2;bottom:0;left:0;width:20px;height:100%;transform-origin:center center;transform:scaleY(-1);"><div class="volumen-wrapper"><div class="led-callerAudio-Own"></div><div class="led-callerAudio-Own"></div><div class="led-callerAudio-Own"></div><div class="led-callerAudio-Own"></div><div class="led-callerAudio-Own"></div><div class="led-callerAudio-Own"></div><div class="led-callerAudio-Own"></div><div class="led-callerAudio-Own"></div><div class="led-callerAudio-Own"></div><div class="led-callerAudio-Own"></div></div></div><div class="volumeMeterGraycallerAudio-Own" style="position:absolute;z-index:-1;bottom:0;left:0;width:20px;height:100%;transform-origin:center center;transform:scaleY(-1);"><div class="volumen-wrapper"><div class="ledGray-callerAudio-Own"></div><div class="ledGray-callerAudio-Own"></div><div class="ledGray-callerAudio-Own"></div><div class="ledGray-callerAudio-Own"></div><div class="ledGray-callerAudio-Own"></div><div class="ledGray-callerAudio-Own"></div><div class="ledGray-callerAudio-Own"></div><div class="ledGray-callerAudio-Own"></div><div class="ledGray-callerAudio-Own"></div><div class="ledGray-callerAudio-Own"></div></div></div><div class="volumecallerAudio-Own" style="position:absolute;z-index:20;bottom:0;left:0;width:5px;height:50%;background:#ff0000;display:none;"></div></div><div id="videoMagicSelect" style="position:fixed;z-index:997778;bottom:0;left:0 background: #fff;"></div><div id="videoMagicControl" style="transform:scale(1);position:fixed;z-index:997777;bottom:0;left:0;font-size: 9px; color: black; line-height: 6px; letter-spacing: 0.57px; font-family: \'IBM Plex Mono\', \'Courier New\', monospace; font-weight: bold; background: #fff;transform-origin:bottom left;"><div id="cameraMagic" class="cameraMagic"><div id="selectVideoArea" style="position:absolute;pointer-events:auto;z-index:30;"></div><video id="videoMagic" style="pointer-events:none;">Video stream not available.</video><button id="stopbutton"style="background:green;" style="display:none;">Cam is on</button><button id="startbutton" style="background:#550a21;">Cam is off</button><button id="vbuttonMagic" style="cursor:pointer;top:0;left:0;font-size:14px;display:none;">V</button><button id="lbuttonMagic" style="cursor:pointer;top:0;left:0;font-size:14px;display:none;">L</button></div><canvas id="canvasMagic" style="position:fixed;bottom:0;left:0;z-index:10;"></canvas><canvas id="canvasMagic2" style="position:fixed;bottom:0;left:0;z-index:20;"></canvas><img id="photoMagic" /><div style="background:#fff;float:right;"><div id="heyImVisitor" style="float:right;background:#fff;"><div id="heyImVisitorVideo" style="display:none;"><img style="background:beige;" id="heyImVisitorVideoImg" src="" /></div></div></div>'),$("#lbuttonMagic").click(function(){lettersOrVideoSend=0,$("#lbuttonMagic").toggle(),$("#vbuttonMagic").toggle()}),$("#vbuttonMagic").click(function(){lettersOrVideoSend=1,$("#vbuttonMagic").toggle(),$("#lbuttonMagic").toggle()}),$("#walkVideoChooser").click(function(){o()}),$("#walkVideoSizer").click(function(){"+++++++"!==$("#walkVideoSizer").html()?($("#walkVideoSizer").append("+"),videoOutputSizer2++,$.post("/fleo.at-php/fleo.at_videoSizer.php",{doing:1,fleoNum:(myNumber[0]+myNumber[2]).replace("#",""),videoSize:videoOutputSizer2})):(videoOutputSizer=1,videoOutputSizer2=1,$("#walkVideoSizer").html("+"),$.post("/fleo.at-php/fleo.at_videoSizer.php",{doing:1,fleoNum:(myNumber[0]+myNumber[2]).replace("#",""),videoSize:videoOutputSizer2}))}),$("#selectVideoArea").resizable({handles:"all",containment:"parent",minHeight:32,minWidth:32,start:function(){draggingVideoSize=1},stop:function(e,t){videoSizeLeft=t.position.left,videoSizeRight=t.position.left+t.size.width,videoSizeTop=t.position.top,videoSizeBottom=t.position.top+t.size.height,videoSizeWidthSelect=2*t.size.width,videoSizeHeightSelect=2*t.size.height,oldPositionVideoLeft=videoSizeLeft,oldPositionVideoTop=videoSizeTop,draggingVideoSize=0}}),$("#selectVideoArea").draggable({drag:function(e,t){videoSizeLeft+=-1*oldPositionVideoLeft+t.offset.left,videoSizeTop+=-1*oldPositionVideoTop+t.position.top,oldPositionVideoLeft=t.offset.left,oldPositionVideoTop=t.position.top}});var s=125;$("#walkVideoFace").click(function(){$.getScript("/fleo.at-js/face/fleo.at_face_api.js",async function(){await faceapi.nets.faceLandmark68Net.loadFromUri("/fleo.at-js/face/models"),await faceapi.nets.ssdMobilenetv1.loadFromUri("/fleo.at-js/face/models"),faceOn=1})});var l,d,c=!1,p=null,u=null,m=null,h=null,f=null,g=0,y=0,b=0;o(),$("#walkAroundWithVideo").hide()})}))}),$("body").append('<audio id="maeaek" src="/fleo.at-js/push2Talk/recordings/2910_audio_recording_1651946993329.mp3"></audio>');var e=document.getElementById("maeaek");e.volume=.01;var t=-1;t=$(".videoWallMan").length;var o=-1,a=document.getElementById("maennikenWall"),n={attributes:!1,childList:!0,subtree:!0},i=(a,n)=>{for(const n of a)"childList"===n.type&&(t=$(".videoWallMan").length,t<o&&(0==haltEverything&&(e.volume=.05,e.play()),t=$(".videoWallMan").length,o=t),t>o&&(0==haltEverything&&(e.volume=.08,e.play()),t=$(".videoWallMan").length,o=t))},r=new MutationObserver(i);r.observe(a,n)}function doTheUploadStuff(e){if(e<0&&-2==e&&0==meIsAdmin&&(doNotUpload=1),e>=whoAllowedUpload&&((e>=2||meIsAdmin>0)&&(doNotUpload=0),0==uploadStuffBuilt)){var t;uploadStuffBuilt=1;var o,a=0,n=0,i=0,r=0;function s(e){var t=new FormData;t.append("doing",1),t.append("save",9),t.append("fleoNum",(myNumber[0]+myNumber[2]).replace("#","")),t.append("coordsW",historyCoords),t.append("coordsD",sMMssM),t.append("room",location.pathname.replace("/r/","")),t.append("am",am),t.append("userImage",e[0]),l(t)}function l(e){$.ajax({xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;t<100?$("#skysignal").html('<div style="position:absolute;background:#cccccc3f;color:hwb(69 0% '+(100-t)+'% / 1); text-shadow: 1px 1px #fff, -1px 1px #fff, 1px -1px #fff, -1px -1px #fff;font-size:100px;text-align:center;bottom:100px;width:100%;left:0;">'+Math.floor(t)+" %</div>"):($("#skysignal").html('<div style="position:absolute;background:#cccccc3f;color:hwb(69 0% '+(100-t)+'% / 1); text-shadow: 1px 1px #fff, -1px 1px #fff, 1px -1px #fff, -1px -1px #fff;font-size:100px;text-align:center;bottom:100px;width:100%;left:0;">'+t+" % - Working on Server ...</div>"),setTimeout(function(){$("#skysignal").fadeOut(4400)},2600))}},!1),e},beforeSend:function(){$("#flash").addClass("f"),$("#skysignal").show()},url:"https://"+mainDomain+"/fleo.at-php/build.php",type:"POST",data:e,processData:!1,contentType:!1,cache:!1}).done(function(){r=0,$("#flash").removeClass("f")})}$(document).on("dblclick",".tree",function(){0==doNotUpload&&(t=$(this).parent(".move").data("attr"),"/"!==location.pathname.replace("/r/","")&&location.pathname.replace("/r/","")&&(o=location.pathname.replace("/r/","")),$(".dragFragile"+t).length?"block"==$(".dragFragile"+t).parent("div").css("display")?$(".dragFragile"+t).parent("div").css("display","none"):($('[class^="dragFragile"]').parent("div").css("display","none"),$(".dragFragile"+t).parent("div").css("display","block")):($('[class^="dragFragile"]').parent("div").css("display","none"),$("#maennikenBag-"+(myNumber[0]+myNumber[2]).replace("#","")).find(".medal3").length||meIsAdmin>0?$("[data-attr="+t+"]").find(".tree").append('<div style="position:absolute;bottom:0px;left:-100px;width:100px;height:auto;background:#ffffff2f;color:#ffffff;text-shadow: -1px -1px 0px #000, 1px -1px 0px #000, -1px 1px 0px #000, 1px 1px 0px #000;font-size:80px;text-align:center;cursor:pointer;pointer-events:auto;"><div class="dragFragile'+t+'" title="Move">X</div><div class="upFragile'+t+'" title="Level">&#x2195;</div><div class="resizeFragile'+t+'" title="Resize">&#x21F1;</div><br /><div class="editFragile'+t+'" style="font-size:40px;" title="Edit">EDIT</div></div><div style="position:absolute;bottom:0px;right:-100px;width:100px;height:auto;background:#ffffff2f;color:#ffffff;text-shadow: -1px -1px 0px #000, 1px -1px 0px #000, -1px 1px 0px #000, 1px 1px 0px #000;font-size:80px;text-align:center;cursor:pointer;pointer-events:auto;"><div class="dragFragile'+t+'" title="Move">X</div><div class="upFragile'+t+'" title="Level">&#x2195;</div><div class="resizeFragile'+t+'" title="Resize">&#x21F1;</div><br /><div class="editFragile'+t+'" style="font-size:40px;" title="Edit">EDIT</div></div>'):$("[data-attr="+t+"]").find(".tree").append('<div style="position:absolute;bottom:0px;left:-100px;width:100px;height:auto;background:#ffffff2f;color:#ffffff;text-shadow: -1px -1px 0px #000, 1px -1px 0px #000, -1px 1px 0px #000, 1px 1px 0px #000;font-size:80px;text-align:center;cursor:pointer;pointer-events:auto;"><div class="dragFragile'+t+'" title="Move">X</div><div class="upFragile'+t+'" title="Level">&#x2195;</div><div class="resizeFragile'+t+'" title="Resize">&#x21F1;</div></div><div style="position:absolute;bottom:0px;right:-100px;width:100px;height:auto;background:#ffffff2f;color:#ffffff;text-shadow: -1px -1px 0px #000, 1px -1px 0px #000, -1px 1px 0px #000, 1px 1px 0px #000;font-size:80px;text-align:center;cursor:pointer;pointer-events:auto;"><div class="dragFragile'+t+'" title="Move">X</div><div class="upFragile'+t+'" title="Level">&#x2195;</div><div class="resizeFragile'+t+'" title="Resize">&#x21F1;</div></div>'),$(".dragFragile"+t).draggable({grid:[100,100],helper:"clone",create:function(e,o){n=0,i=0,"f"==will&&$(".dragFragile"+t).parent().css("transform","scaleX(-1)")}}),$(".dragFragile"+t).on("dragstop",function(e,a){"b"==will?(n=-1*a.position.top,i=a.position.left):(n=a.position.top,i=-1*a.position.left),$.ajax({beforeSend:function(){$("#flash").addClass("f")},type:"POST",url:"https://"+mainDomain+"/fleo.at-php/build.php",dataType:"html",data:{doing:1,save:1,offset:n,leftRight:i,fragile:t,room:o}}).done(function(e){n=0,i=0,$("#flash").removeClass("f")})}),$(".upFragile"+t).draggable({grid:[1,1],axis:"y",helper:"clone",create:function(e,t){a=0}}),$(".upFragile"+t).on("drag",function(e,n){a=n.position.top,-100!=n.position.top&&-300!=n.position.top&&-500!=n.position.top&&-700!=n.position.top&&100!=n.position.top&&300!=n.position.top&&500!=n.position.top&&700!=n.position.top||$.ajax({beforeSend:function(){$("#flash").addClass("f")},type:"POST",url:"https://"+mainDomain+"/fleo.at-php/build.php",dataType:"html",data:{doing:1,save:2,offset:-1*a,fragile:t,room:o}}).done(function(e){a-=n.position.top,$("#flash").removeClass("f")})}),$(".upFragile"+t).on("dragstop",function(e,n){$.ajax({beforeSend:function(){$("#flash").addClass("f")},type:"POST",url:"https://"+mainDomain+"/fleo.at-php/build.php",dataType:"html",data:{doing:1,save:2,offset:-1*a,fragile:t,room:o}}).done(function(e){a=0,$("#flash").removeClass("f")})}),$(".resizeFragile"+t).draggable({grid:[1,1],axis:"x",helper:"clone",create:function(e,t){r=0}}),$(".resizeFragile"+t).on("drag",function(e,t){r=t.position.left}),$(".resizeFragile"+t).on("dragstop",function(e,a){$.ajax({beforeSend:function(){$("#flash").addClass("f")},type:"POST",url:"https://"+mainDomain+"/fleo.at-php/build.php",dataType:"html",data:{doing:1,save:3,offset:r,fragile:t,room:o}}).done(function(e){r=0,$("#flash").removeClass("f")})}),$(".editFragile"+t).click(function(){$("#thisBox").css("height","80%"),$("#thisBox").load("https://"+mainDomain+"/fleo.at-php/fleo.at_buildEdit.php?client="+(myNumber[0]+myNumber[2]).replace("#","")+"&buildcoords="+(historyCoords-500)+"&builddoords="+(sMMssM-2)+"&monster="+t).show()})))}),$("body").on("dragenter",function(e){e.preventDefault()}),$("body").on("dragover",function(e){e.preventDefault()}),$("body").on("drop",function(e){if(e.preventDefault(),0==doNotUpload){var t=e.originalEvent.dataTransfer.files;s(t)}}),function(e){var t=function(e){var t,o,a,n=e.originalEvent.clipboardData.items,i=[];for(o in n)item=n[o],t=item.kind,null!=t&&"file"===t.toLowerCase()&&void 0!==item.getAsFile&&null!==item.getAsFile&&(a=item.getAsFile(),null!=a&&i.push(a));return i},o=function(e){var t=e.originalEvent;if(null==t)return!1;var o=t.clipboardData;if(null==o)return!1;var a=o.items;return null!=a},a=function(t){var o=t.target;if(null==o)return!0;e(o);return!0};e(document).on({paste:function(n){if(!0===o(n)&&!0===a(n)){var i=t(n);if(i.length>0){var r="custom/paste/images";e(document).triggerHandler(r,[i])}}}})}(jQuery),$(document).on({"custom/paste/images":function(e,t){s(t)}})}}function checkCookiesForLettercoins(){if(!t);if(!o);if(!e)var e;if(!t)var t=[];if(!o)var o=[];e=document.cookie.split(/; */);for(var a=0;a<e.length;a++)t[a]=e[a].substring(0,e[a].indexOf("=")),o[a]=e[a].substring(e[a].indexOf("=")+1),t[a].includes("lettercoin-")&&$.post("https://"+mainDomain+"/fleo.at-php/build.php",{doing:1,save:7,firstletters:t[a].replace("lettercoin-",""),words:o[a]},function(e){e?"No Lettercoin at this Firstletters."!==e&&"Firstletters do not match words."!==e&&$("#treasure").append('<div class="ownLettercoin" style="position:relative;margin:0 -20px -20px 0;display:flex;align-items:center;justify-content:center;height:56px;width:56px;border:2px solid gray;border-radius:30px;overflow:hidden;font-size:56px;text-align:center;font-family:Courier,monospace;cursor:pointer;color:yellow !important;">'+e+"</div>"):$.post("https://"+mainDomain+"/fleo.at-php/fleo.at_setLettercoinCookie.php",{what:"remove",firstletters:t[a]})})}function doLettercoinPayments(e,t){1!==lettercoinIni[e]&&(lettercoinIni[e]=1,$(document).on("click","#fleoAtHat"+e,function(e){var t=$(this).data("hat"),o=document.querySelectorAll(".lettercoinSelected");if(o.length){for(var a=0;a<o.length;a++){var n=$(o[a]).html();$.ajax({beforeSend:function(){$("#flash").addClass("f")},type:"POST",url:"https://"+mainDomain+"/fleo.at-php/build.php",dataType:"html",data:{doing:1,
save:6,room:myRoom,whereItGoesTo:t,words:n}}).done(function(e){e&&(e="lettercoin-"+Object.values(JSON.parse(e)).toString().replaceAll(",",""),$.post("https://"+mainDomain+"/fleo.at-php/fleo.at_setLettercoinCookie.php",{what:"remove",firstletters:e},function(){lettercoinSound.play(),$("#flash").removeClass("f")}))})}setTimeout(function(){$(".ownLettercoin").remove(),checkCookiesForLettercoins()},3e3)}else"680px"==$("#fleoAtHat"+t).css("bottom")&&$.post("https://"+mainDomain+"/fleo.at-php/build.php",{doing:1,save:8,room:myRoom,whereItGoesTo:t},function(e){$("#fleoAtHat"+t).animate({bottom:"+=110px"},1e3,function(){$("#fleoAtHat"+t).append('<div class="currentHat'+t+'" style="position:absolute;height:60px;width:190px;text-align:center;color:black;font-weight:bold;text-shadow: 4px 4px 0px yellow, 2px 3px 0px yellow, 4px 5px 0px yellow, 4px 6px 0px yellow;top:165px;left:-6px;font-size:50px;background:#ffffff;">'+e+"</div>"),setTimeout(function(){$(".currentHat"+t).remove(),$("#fleoAtHat"+t).animate({bottom:"-=110px"},3e3)},3e3)})})}),$(document).on("click","#audioStationText-"+t,function(t){if($(".lettercoinSelected").length){var o=$("#fleoAtHat"+e).data("hat"),a=$(this).html(),n=document.querySelectorAll(".lettercoinSelected");if(n.length)for(var i=0;i<n.length;i++){var r=$(n[i]).html();$.ajax({beforeSend:function(){$("#flash").addClass("f")},type:"POST",url:"https://"+mainDomain+"/fleo.at-php/build.php",dataType:"html",data:{doing:1,save:6,room:myRoom,whereItGoesTo:o,words:r}}).done(function(e){e&&(e="lettercoin-"+Object.values(JSON.parse(e)).toString().replaceAll(",",""),$.post("https://"+mainDomain+"/fleo.at-php/fleo.at_setLettercoinCookie.php",{what:"remove",firstletters:e},function(){lettercoinSound.play(),$.post("https://"+mainDomain+"/fleo.at-php/fleo.at_postAudioStationText.php",{doing:1,room:myRoom,whereItGoesTo:o,words2:a},function(){toastr.success("Text saved."),$("#flash").removeClass("f")})}))})}setTimeout(function(){$(".ownLettercoin").remove(),checkCookiesForLettercoins()},3e3)}else $(this).on("keydown",function(){spacebarText=1}),$(this).on("keyup",function(){toastr.info("Drop Lettercoin on text to change it on server."),spacebarText=0})}),$(document).on("click","#letterCoinMillAudioStationTextLettercoin-1-"+t,function(){lettercoinHolder=$(this),allWordsForLettercoin=lettercoinHolder.html(),$.post("https://"+mainDomain+"/fleo.at-php/build.php",{doing:1,save:5,fragile:lettercoinHolder.parent(".tree").parent(".move").data("attr"),room:location.pathname.replace("/r/",""),words:allWordsForLettercoin},function(e){e="lettercoin-"+Object.values(JSON.parse(e)).toString().replaceAll(",",""),$.post("https://"+mainDomain+"/fleo.at-php/fleo.at_setLettercoinCookie.php",{what:"set",firstletters:e,words:allWordsForLettercoin},function(){lettercoinOwnSound.play(),lettercoinHolder.html(""),"audStat1010789611"!==t&&lettercoinHolder.css({"pointer-events":"none",background:"none"}),$(".ownLettercoin").remove(),checkCookiesForLettercoins()})})}),$(document).on("click","#letterCoinMillAudioStationTextLettercoin-2-"+t,function(){lettercoinHolder=$(this),allWordsForLettercoin=lettercoinHolder.html(),$.post("https://"+mainDomain+"/fleo.at-php/build.php",{doing:1,save:5,fragile:lettercoinHolder.parent(".tree").parent(".move").data("attr"),room:location.pathname.replace("/r/",""),words:allWordsForLettercoin},function(e){e="lettercoin-"+Object.values(JSON.parse(e)).toString().replaceAll(",",""),$.post("https://"+mainDomain+"/fleo.at-php/fleo.at_setLettercoinCookie.php",{what:"set",firstletters:e,words:allWordsForLettercoin},function(){lettercoinOwnSound.play(),lettercoinHolder.html(""),"audStat1010789611"!==t&&lettercoinHolder.css({"pointer-events":"none",background:"none"}),$(".ownLettercoin").remove(),checkCookiesForLettercoins()})})}))}function openFullscreen(){elem.requestFullscreen?elem.requestFullscreen():elem.webkitRequestFullscreen?elem.webkitRequestFullscreen():elem.msRequestFullscreen&&elem.msRequestFullscreen()}function closeFullscreen(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}function postMovement(e){$.post("https://"+mainDomain+"/fleo.at-php/fleo.at_receiveRobotChanges.php",{doing:1,save:1,room:myRoom,action:e})}function setMedalsCorrect(e){$("#maennikenBag-"+e).css({left:82-parseInt($("#maennikenBag-"+e).width()/2)+"px",bottom:90-parseInt($("#maennikenBag-"+e).height()/2)+"px"})}async function lockWakeState(){if(canWakeLock())try{wakelock=await navigator.wakeLock.request(),wakelock.addEventListener("release",()=>{console.log("Screen Wake State Locked:",!wakelock.released)}),console.log("Screen Wake State Locked:",!wakelock.released)}catch(e){console.error("Failed to lock wake state with reason:",e.message)}}function whereAmIFromSocket(e,t,o,a,n,i,r){if(ws.readyState===WebSocket.OPEN);else{Math.floor(50*Math.random());$("#flash").removeClass("ffff")}}var mainDomain="kitchen.fleo.at",easyrtcWebsocketUrl="https://homeaudio.fleo.at",gTagId="G-LGT8Q5VKEZ",gTagWhatever="AW-1013883561/cH7gCK-y84UYEKnFuuMD",clarityTag="7ek75aq7zj",turn=0,spacebarText=0,wsOk=0,ws=new ReconnectingWebSocket("wss://"+mainDomain+"/socketdata");$("#bgbgsterneVideo").attr("src","/fleo.at-medien/repertoire/space_front_320_PIxEL.mp4");var am="f",will="b",willX=0,tcDX=0,tcHX=0,tcWX=0,tamq=0,have=[];have[0]=0,have[1]="x";var fleoNumDistant,doCheckT=0,haveve=0,haveveX=0,haveveGo=1,level=0,radiostatus=0,radiosource=0,myNumber=[];myNumber[0]="0000",myNumber[1]="_",myNumber[2]="#ffffff";var ytplayer,lastCloseID=0,lastOpen=0,thisCloseID=0,thisOpen=0,lastWidth=0,lastWidthR=0,width=0,widthR=0,openBtnID=0,rememberOffset=0,scaleM="scale0",historyPush=0,turnOld=[],turnToChange=[],TAold=[],audioTrack=[],sourceA=[],sourceB=[],analyser=[],bufferLength=[],dataArray=[],canvasCtx=[],stream2Rec=[],fleoAlreadyConnected=[],trackMediaStream=[],visualizerV=[],visualizerX=[],visualizerY=[],sliceWidth=[],goAhead=[],mediaRecorder=[],blobToRec=[],recData=[],recReader=[],recReaderResult=[],mediaRecorderId=0,fleoDestination=[],fleoNodeSource=[],fleoNodeSourceMeter=[],startAudio=[],chunks=[],fleoMediaStream=[],audioCtxVolume=[],audioCtxMeter=[],recordingStream=[],gainNode=[],gainNodeMeter=[],volumeMeterNode=[],volumeMeterGrayNode=[],listener=[],panner=[],listenerData=[],meterElement=[],ledsVol=[],ledsGrayVol=[],gainOld=[],volumeOld=[],volumeBypassIsOnOff=[],audioAutoAccept="off",audioAutoReject="off",currrentReplayRecording="",gotFirstFileDataFromMediarecorders=0,streamsNum=0,audioConferenceConnected=0,startUpJeak=0,othPersonDistanceSelf=[],othPersonDistanceSelfOld=[],othPersonDistanceSelfId=[],otherVolume=[],otherVolumeNumber=[],othAudioSes=[],waitForAudio=[],kindOfGuyOld=[],kindfOfGuyFunctionBuilt=[],meIsAdmin=0,medals=[],whoAllowedUpload=2,draggingVideoSize=0,audioSystemJustLoaded=0,recordingReset=0,recordingIntervalStartLoop=0,insideWeltpolizei=0,relationToBackground=0,levelScroll=0;medals[0]='<div class="medal medal0 medalAdmin" medalcode="0" style="width:26px;height:26px;border:2px solid black;border-radius:15px;background:white;font-size:30px;line-height:30px;text-align:center;color:orange;font-weight:bold;" title="Administrator">A</div>',medals[1]='<div class="medal medal1 medalVisitor" medalcode="1" style="width:30px;height:30px;border-radius:15px;background:blue;font-size:30px;line-height:32px;text-align:center;" title="Visitor">V</div>',medals[2]='<div class="medal medal2 medalWorker" medalcode="2" style="width:30px;height:30px;border-radius:15px;background:red;font-size:30px;line-height:32px;text-align:center;color:yellow;" title="Bauarbeiter">B</div>',medals[3]='<div class="medal medal3 medalChef" medalcode="3" style="width:30px;height:30px;border-radius:15px;background:beige;font-size:30px;line-height:32px;text-align:center;color:blue;" title="Chef">C</div>',toastr.options={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-top-left",preventDuplicates:!0,showDuration:"300",hideDuration:"3000",timeOut:"10000",extendedTimeOut:"3000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},$("body").append('<div id="container" style="display:none;position:fixed;width:400px;height:400px;top:50px;left:0;z-index:20000;"><div id="demoContainer"><div id="connectControls"><button id="connectButton">Connect</button><button id="hangupButton">Hangup</button><div id="iam">Not yet connected...</div><strong>Connected users:</strong><div id="otherClients"></div></div><div id="videos"><div id="acceptCallBox"><div id="acceptCallLabel"></div><button id="callAcceptButton">Accept</button><button id="callRejectButton">Reject</button></div></div></div></div>'),$("#connectButton").click(function(){connect()});var historyCoords,sMMssM,ready=0,placeToOpen=0,placeToOpenOnlyNumbers=0,iii=document.getElementsByClassName("move"),ppp=document.getElementsByClassName("person"),yeahStartup=0,worldHeight=0;queryCoordsGet=window.location.search,urlForCoordsGet=new URLSearchParams(queryCoordsGet);var article=urlForCoordsGet.get("open");if(urlForCoordsGet.has("yeah")&&(yeahStartup=1),urlForCoordsGet.has("coords")&&urlForCoordsGet.has("doords"))var placeToOpenW=urlForCoordsGet.get("coords"),placeToOpenD=3*urlForCoordsGet.get("doords");else placeToOpenW=0,placeToOpenD=0;var placeToOpenWN=parseInt(placeToOpenW),placeToOpenDN=parseInt(placeToOpenD),niceAddress=0,readyWorlds=0,readyPersons=1;urlForCoordsGet.has("coords")&&urlForCoordsGet.has("doords")||!$.cookie("spacecoords")||!$.cookie("spacedoords")||(placeToOpenWN=parseInt($.cookie("spacecoords")),placeToOpenDN=3*parseInt($.cookie("spacedoords"))),historyCoords=placeToOpenWN,sMMssM=placeToOpenDN,startupJavascriptVSPHP();var pointZero,w=$(window).width(),h=$(window).height(),thisAllScale=w/1800;$("#wrapperContainer").css({transform:"scale("+thisAllScale+")"}),$("#wrapper").css("height",5e3),$("body").css("height",parseInt($("#wrapper").css("height"))*thisAllScale),$("html").animate({scrollTop:$("body").css("height")},0),pointZero=$(window).scrollTop()-parseInt($("body").css("height")),relationToBackground=0,$(window).resize(function(){0==draggingVideoSize&&getThingsStraight()});var scrollSub=0;$("#wrapper").bind("mousewheel DOMMouseScroll",function(e){var t=null;"mousewheel"==e.type?t=-1*e.originalEvent.wheelDelta:"DOMMouseScroll"==e.type&&(t=1e3*e.originalEvent.detail),t&&(e.preventDefault(),scrollSub+=t,(scrollSub>50||scrollSub<-50)&&(relationToBackground=$(window).scrollTop()+scrollSub-parseInt($("body").css("height"))+$(window).height(),scrollSub=0,moveWithTrain(historyCoords,sMMssM,0,relationToBackground,turn)))}),setTimeout(function(){getThingsStraight()},2e3);var mySpotterMapLatitude,mySpotterMapLongitude,mySpotterMapLocationX,mySpotterMapLocationY,mapIsWorld=0,hp=0;setTimeout(function(){$("#mapForLocator").append('<div id="maennikenSpotter-Own" class="maennikenSpotter" style="pointer-events:none;background:'+myNumber[2]+';width:6px;height:6px;border:2px solid black;"></div>'),$("#mapForLocator").show(),"Mobile"!==Device_Type()&&Device_Type(),$("#mapBody2").css("transform","rotateX(34deg) scale(1)"),$("#mapBody").css({transform:"scale(1);"})},500),$("body").append('<div class="nineedge" class="cockpit" style="color:red;text-shadow:0 0 10px green;font-weight:bold;cursor:pointer;width:181px;height:180px;position:fixed;top:0;right:0;z-index:14000;pointer-events:none;"><div style="width:80px;"><div class="chtop" style="pointer-events:auto;font-weight:bold;cursor:pointer;width:40px;height:80px;z-index:14000;border-left:1px solid black;border-bottom:1px solid black;">&uarr;</div><div class="chbottom" style="pointer-events:auto;font-weight:bold;cursor:pointer;width:40px;height:80px;z-index:14000;border-left:1px solid black;border-bottom:1px solid black;">&darr;</div></div><div class="chcentercenter" style="pointer-events:auto;font-weight:bold;cursor:pointer;width:100px;height:99px;z-index:14000;border-left:1px solid black;border-bottom:1px solid black;"><div style="pointer-events:none;"><span style="text-align:center;">Turn<br />(scroll here)</span></div></div><div style="width:80px;float:right;"><div class="chleft" style="float:right;pointer-events:auto;font-weight:bold;cursor:pointer;width:39px;height:80px;z-index:14000;border-left:1px solid black;border-bottom:1px solid black;">&larr;</div><div class="chright" style="float:right;pointer-events:auto;font-weight:bold;cursor:pointer;width:39px;height:80px;z-index:14000;border-left:1px solid black;border-bottom:1px solid black;">&rarr;</div></div></div><div id="square"><svg style="width:100%;height:100%;" viewBox="0 0 100 100" preserveAspectRatio="none"><polygon points="33,33 50,50 33,67" id="navLef" /><polygon points="18,0 33,0 33,67 18,82" id="navLefStrong" /><polygon points="9,0 18,0 18,82 9,91" id="navLefStrongVery" class="stepL chleft" /><polygon points="0,0 9,0 9,91 0,100" id="navLookLef" class="lookL chtopleft" /><polygon points="0,100 18,82 50,82 50,100" id="navBacStrongVery" class="straightB chbottom" /><text class="explanation" x="0" y="90" fill="white"><tspan x="9" dy="1.2em">Step Backwards</tspan></text><polygon points="50,100 50,82 82,82 100,100" id="navForStrongVery" class="straightF chtop" /><text class="explanation" x="0" y="90" fill="white"><tspan x="69" dy="1.2em">Step Forward</tspan></text><polygon points="50,50 67,33 67,67" id="navRig" /><polygon points="67,33 82,18 82,82 67,67" id="navRigStrong" /><polygon points="82,0 91,0 91,91 82,82" id="navRigStrongVery" class="stepR chright" /><polygon points="91,0 100,0 100,100 91,91" id="navLookRig" class="lookR chtopright" /><text class="explanation" x="0" y="74" fill="white"><tspan x="42" dy="1.2em">and scroll</tspan><tspan x="42" dy="1.2em">the colors</tspan></text><text class="explanation" x="0" y="94" fill="white"><tspan x="46" dy="1.2em">Map</tspan></text><text id="hideExplanation" class="explanation" x="0" y="74" fill="white"><tspan x="65" dy="1.2em">X hide (ok)</tspan></text><text class="explanation" x="0" y="30" fill="white"><tspan x="1" dy="1.2em">Look</tspan><tspan x="1" dy="1.2em">Left</tspan></text><text class="explanation" x="10" y="30" fill="white"><tspan x="10" dy="1.2em">Step</tspan><tspan x="10" dy="1.2em">Left</tspan></text></svg></div>'),$("body").append('<div id="hideExplanationDiv" style="cursor:pointer;position:fixed;top:72%;left:63%;width:22%;height:10%;z-index:50000;"></div>'),$("#hideExplanationDiv").click(function(){$(".explanation").remove(),$("#hideExplanationDiv").remove(),$("polygon.lookR").removeClass("filllookR"),$("polygon.stepR").removeClass("fillstepR"),$("polygon.stepL").removeClass("fillstepL"),$("polygon.lookL").removeClass("filllookL"),$("polygon.wheelF").removeClass("fillwheelF"),$("polygon.straightF").removeClass("fillstraightF"),$("polygon.straightB").removeClass("fillstraightB"),$("polygon.wheelB").removeClass("fillwheelB")}),$("body").append('<div id="thisBox" style="display:none;width:calc(80% - 160px);height:calc(80% - 160px); position: fixed; z-index: 7160; top: 8%; left: 8%; background: #cccccc9f; border: 1% solid green; color: black; font-size: 20px; padding: 80px; overflow-y: scroll;"></div>'),$("body").append('<div id="nameNumberContainer" style="position:fixed;top:180px;right:0;z-index:7001;"><div id="nameNumber" style="position:absolute;top:0;right:0;z-index:100;border:1px solid black;border-right:none;white-space:nowrap;width:auto;background:rgb(214, 214, 195);" class="menuItem"></div><form style="position:absolute;top:0;right:0;z-index:101;border:1px solid black;border-right:none;display:none;width:260px;" id="changeNameForm" class="menuItem" ><input type="text" id="chnNam" maxlength="76"></input><button type="submit" style="display: inline-block; cursor:pointer; margin-left: 20px;">Submit</button></form></div>'),$("body").append('<div id="clicksChat" class=""><div id="clicksChatCont"></div></div>'),$("body").append('<div id="mapBody"><div id="mapBody2"></div></div><div id="handleOpenMap" style="position:fixed;bottom:-4px;left:calc(50% - 45px);width:90px;height:24px;font-size:18px;color:blue;background:#ffffff;opacity:0.7;text-align:center;display:none;z-index:70050;cursor:pointer;line-height:22px;">Map</div><div class="handleCloseMap" style="position:fixed;bottom:-4px;left:calc(50% + 120px);width:110px;height:24px;font-size:18px;color:blue;background:#ffffff;opacity:0.7;text-align:center;z-index:70050;cursor:pointer;line-height:22px;">Close Map</div>'),setTimeout(function(){$(".handleCloseMap").click(),$("#menuOnOff").click(),$("#switchControl").click()},5500),$("#mapBody2").append('<div id="mapForLocator" style="width:720px;height:360px;overflow:visible;position:fixed;z-index:7050;pointer-events:none;display:none;"><div id="mapForLocatorClickDivs" class="locClickHover" style="width:720px;height:360px;position:absolute;z-index:0;pointer-events:auto;"></div><img src="/fleo.at-medien/layout/cockpit/mapForLocator.png" style="position:absolute;opacity:.35;pointer-evnts:none;z-index:-1;" alt="deepmonitor.image locator.Map" /></div>');for(let e=1;e<23;e++)for(let t=1;t<46;t++)$("#mapForLocatorClickDivs").append('<div clickcoords="'+t+'" clickdoords="'+e+'" class="locClick"></div>');$(".locClick").click(function(){var e=16*$(this).attr("clickcoords"),t=16*$(this).attr("clickdoords");e=e/2-180,e=-1e3*e.toFixed(3),t=t/2-90,t*=.9,t/=100,t=2*t*(180/Math.PI),t=t.toFixed(0),e=parseInt(e+4e3),t=parseInt(t-4),move(e,100*t,500,0)}),$(".handleCloseMap").click(function(){$("#mapBody2").animate({bottom:"-100%"},600),$(".handleCloseMap").hide(),$("#handleOpenMap").show()}),$("#handleOpenMap").click(function(){$("#mapBody2").animate({bottom:"0"},600),$("#handleOpenMap").hide(),$(".handleCloseMap").show()}),"Mobile"!==Device_Type()&&"Tablet"!==Device_Type()||"Mobile"!=Device_Type()&&"Tablet"!=Device_Type()||($("#mapBody").css({transform:"scale(1)",bottom:"0"}),$("#mapForLocatorClickDivs").removeClass("locClickHover")),$("body").append('<div id="writeChat" style="position:fixed;width:40%;height:100%;left:26%;top:0;padding:20px;background:rgb(214, 214, 195);border-left:2vw solid black;border-right:2vw solid black;font-size:20px;color:black;font-weight:bold;z-index:999999;display:none;"><h2>Write message</h2><p><textarea id="sendMessageText" rows="4" cols="50" title="Chat" placeholder="Send message"></textarea><p><p><button id="sendMessageButton">Send</button> <button id="sendMessageCancel">Cancel</button></p></div>'),$("body").append('<div id="writeAnythingTo" style="position:fixed;width:40%;height:100%;left:26%;top:0;padding:20px;background:rgb(214, 214, 195);border-left:2vw solid black;border-right:2vw solid black;font-size:20px;color:black;font-weight:bold;z-index:999999;display:none;"><h2>Write anything</h2><p><textarea id="sendAnythingText" rows="4" cols="50" title="Chat" placeholder="Send anything"></textarea><p><p><button id="sendAnythingButton">Send</button> <button id="sendAnythingCancel">Cancel</button></p></div>'),$("#mapForLocator").css({bottom:"0",left:"calc(50% - 360px)"}),$("#sendMessageButton").click(function(){sendStuffWS($("#writeChat").attr("receiver")),$("#writeChat").hide()}),$("#sendMessageCancel").click(function(){spacebarText=0,$("#writeChat").hide()});var navIsSmall=0;$(".chcentercenter").click(function(){$("#infot").click()}),$("body").append('<div id="menuBottom" style="position:fixed;width:100%;max-width:calc(100% - 231px);height:auto;right:181px;top:0;z-index:20000;pointer-events:none;"><div id="menuOnOff" class="menuItem">Menu</div></div>'),$("#menuBottom").append('<div id="manual" class="menuItem">Anleitung</div>'),$("#menuBottom").append('<div id="goBuild" class="menuItem">Etwas bauen</div>'),$("#menuBottom").append('<div id="leave" class="cockpit menuItem">Verabschieden</div>'),$("#menuBottom").append('<div id="imprintButton" class="cockpit menuItem">Impressum</div>'),$("#menuBottom").append('<div id="infot" class="cockpit menuItem" style="display:none;">Umdrehen</div>'),$("#menuBottom").append('<div id="fixedLocationOpen" class="cockpit menuItem">Globus (G)</div>'),$("#menuBottom").append('<div id="push2TalkUserWants" class="cockpit menuItem">Tonstudio</div>'),$("#menuBottom").append('<div id="walkAroundWithVideo" class="cockpit menuItem">Audio/Video/Chat starten</div>'),$("#menuBottom").append('<div id="walkAroundWithVideoAudioAutoReject" class="cockpit menuItem" data-audioautoreject="off" style="text-decoration:line-through;display:none;">Anrufe ablehnen</div>'),$("#menuBottom").append('<div id="walkAroundWithVideoAudioAutoAccept" class="cockpit menuItem" data-audioautoaccept="off" style="text-decoration:line-through;display:none;">Anrufe automatisch annehmen</div>'),$("#menuBottom").append('<div id="hearLikeOwl" active="0" class="menuItem" style="text-decoration:line-through;display:none;">Eule</div>'),$("#menuBottom").append('<div id="niceWindowToggle" class="cockpit menuItem" style="display:none">Nice Window</div>'),$("#menuBottom").append('<div id="fullscreenToggle" class="cockpit fullscreenToggle menuItem">Vollbild</div>'),$("#menuBottom").append('<div id="fullscreenExitToggle" class="cockpit fullscreenToggle menuItem" style="display:none;background:orange;">Exit Vollb.</div>'),$("#menuBottom").append('<div id="speedPlus" class="cockpit menuItem">+</div>'),$("#menuBottom").append('<div id="speedMinus" class="cockpit menuItem">-</div>'),$("#menuBottom").append('<div id="drive" class="cockpit menuItem">Drive</div>'),$("#menuBottom").append('<div id="unbindLocation" class="cockpit menuItem" style="display:none;background:lightgreen;">Von echtem Ort entkoppeln</div>'),$("#menuBottom").append('<div id="bindLocation" class="cockpit menuItem">An echten Ort ankoppeln</div>'),$("#menuBottom").append('<div id="startSensors" class="cockpit menuItem">Sensoren starten</div>'),$("#menuBottom").append('<div id="reset" class="cockpit menuItem">Reset</div>'),$("#menuBottom").append('<div id="switchControl" class="cockpit menuItem rainbow" style="display:none;">Steuerung</div>'),$("#menuBottom").append('<div id="callRejectButton2" class="hideElementCall menuItem">Ablehnen</div>'),$("#menuBottom").append('<div id="callAcceptButton2" class="hideElementCall menuItem">Anruf annehmen</div>'),$("#menuBottom").append('<div id="hangUpButton2" class="hideElementCall menuItem">Auflegen (alle)</div>'),$("#menuBottom").append('<div id="treasure" class="" style="position:absolute;top:0;left:-50px;z-index:14990;width:30px;overflow:visible;transform-origin:top left;transform:scale(0.5);pointer-events:auto;"></div>'),$("#menuBottom")[0].offsetWidth<450?$(".menuItem").css({"font-size":"14px","line-height":"18px",height:"22px"}):$(".menuItem").css({"font-size":"18px","line-height":"25px",height:"28px"}),$("#switchControl").click(function(){$("#square").fadeToggle("slow"),$("#switchControl").toggleClass("rainbow")}),$("#hangUpButton2").click(function(){$(".endCallHangUp").click(),$("#hangUpButton2").hide()});var menuOnOff=1;$("#menuOnOff").click(function(){1==menuOnOff?($(".cockpit").addClass("hideElement"),menuOnOff=0):($(".cockpit").removeClass("hideElement"),menuOnOff=1)});var hearLikeOwl=0;$("#hearLikeOwl").click(function(){0==$(this).attr("active")?(hearLikeOwl=1,$(".person").each(function(){changeVolumeMeMoving($(this).attr("id").replace("personCode-",""))}),$(this).css("text-decoration","none"),$(this).attr("active",1)):(hearLikeOwl=0,$(".person").each(function(){changeVolumeMeMoving($(this).attr("id").replace("personCode-",""))}),$(this).css("text-decoration","line-through"),$(this).attr("active",0))});var manualBuilt=0;$("#manual").click(function(){0==manualBuilt&&(manualBuilt=1,$("body").append('<div id="manualAnleitung" style="color:black;"><h1 style="background:#ffffff8f;">Anleitung</h1><h2 style="background:#ffffff8f;">Es ist eigentlich alles ganz einfach.</h2><p style="background:#ffffff8f;">Sie sind Visitor und Bauarbeiter.<br />Mit f√ºnf plus zehn sind Sie Chef. <input id="mathQuestion" minlength="1" maxlength="2" size="2"> <span id="mathQuestionResult"><button id="sendMathQuestion">Senden</button></span></p><p style="background:#ffffff8f;">Ziehen Sie Bilder, Videos und Audio einfach in die Welt.<p><p style="background:#ffffff8f;">Sie k√∂nnen auch die Gr√∂√üe ver√§ndern.</p><p style="background:#ffffff8f;">Die Audioverbindungen finden direkt zwischen Ihnen und Ihren Gespr√§chspartnern statt. Ihre Webcamvideos werden vom Server verbreitet.</p><p style="background:#ffffff8f;">Es gibt Abk√ºrzungen f√ºr die Tastatur:<ul><li>D is to drive.</li><li>T for turnaround.</li><li>Build audio-station is A.</li><li>Start your video image with i.</li><li>Spacebar for the rainbow-control</li><li>Open the menu with M.</li></ul></p>'),$("#sendMathQuestion").click(function(){$.post("/fleo.at-php/fleo.at_bag.php",{doing:9,iam:(myNumber[0]+myNumber[2]).replace("#",""),result:$("#mathQuestion").val()}).done(function(e){"Wrong result!"==e?$("#sendMathQuestion").html(e):$("#mathQuestionResult").html(e)})}),$("#manualAnleitung").dialog({title:"Anleitung",autoOpen:!1,minWidth:600,modal:!0,buttons:{"Schlie√üen":function(){$(this).dialog("close")}}})),$("#manualAnleitung").dialog("isOpen")?$("#manualAnleitung").dialog("close"):$("#manualAnleitung").dialog("open")}),$("#goBuild").click(function(){$.post("/fleo.at-php/fleo.at_bag.php",{doing:4,iam:(myNumber[0]+myNumber[2]).replace("#","")}).done(function(e){$.post("https://"+mainDomain+"/fleo.at-php/fragiles/constructionSiteReceptionist.php",{doing:1,who:(myNumber[0]+myNumber[2]).replace("#",""),coordsW:historyCoords,coordsD:sMMssM,coordsH:0,room:myRoom})}),$("#goBuild").hide()}),"tCupSpaceOpenInOtherWindow"==window.name&&(window.toolbar.visible&&window.menu.visible||$("#niceWindowToggle").hide()),$("#quiet").click(function(){"Quiet"==$("#quiet").html()?(quiet=1,$("#quiet").html("Loud")):(quiet=0,$("#quiet").html("Quiet"))}),$("#reset").click(function(){roomChange("home"),turn=0}),$("#leave").click(function(){window.location.href="demand"==myRoom||"demandNew"==myRoom?"/leftdemand.html":"weltfernsehsender.de"==myRoom&&0==insideWeltpolizei||"interlectual.org"==myRoom&&0==insideWeltpolizei?"/return.html":"/left.html"});var drawBuilt=0,drawOn=0;$("#fleoDrawGet").click(function(){0==drawBuilt?(drawBuilt=1,$("body").append('<div id="drawMenu" style="width:240px;height:500px;position:fixed;top:0;left:0;z-index:100000;background:#ffffff3f;border-bottom-right-radius:60px;"></div>'),$("#drawMenu").load("/fleo.at-php/fleo.at_drawMenu.php"),$("#fleoDrawGet").css("background","lightgreen"),$(".move").attr("nopointer2",1),$.get("/fleo.at-php/fleo.at_drawCage.php",function(e){$("#wrapper").append(e)}),drawOn=1):0==drawOn?(drawOn=1,$("#fleoDrawGet").css("background","lightgreen"),$("#drawMenu").show(),$(".move").attr("nopointer2",1),$.get("/fleo.at-php/fleo.at_drawCage.php",function(e){$("#wrapper").append(e)})):(drawOn=0,$("#fleoDrawGet").css("background","#d6d6c3"),$("#drawMenu").hide(),$(".move").attr("nopointer2",0),$(".cage").remove(),$(".cage2").remove())}),$("#speedPlus").click(function(){speed++}),$("#speedMinus").click(function(){speed--}),$("body").append('<div id="imprint" style="color:black;"><h1 style="background:#ffffff8f;">Imprint</h1><h2 style="background:#ffffff8f;">Felix Longolius</h2><p style="background:#ffffff8f;">Brahmsallee 41, 20144 Hamburg<p><p style="background:#ffffff8f;">00494035775757, deepmonitor@t-online.de</p><p style="background:#ffffff8f;"><a href="/datenschutz.html" target="_blank">Datenschutz (privacy)</a></p><p style="background:#ffffff8f;">If you feel like presenting the state of your browser to Google <span id="turnOnAnalytics" style="color:blue;text-decoration:underline;background:white;cursor:pointer;">"Google Analytics"</span> or Microsoft <span id="turnOnClarity" style="color:blue;text-decoration:underline;background:white;cursor:pointer;">"Microsoft-Clarity"-recordings</span>, you can inject their code by clicking the links above.</p>'),"empty"!==googleAnalytics&&$("#turnOnAnalytics").click(function(){$.getScript("https://www.googletagmanager.com/gtag/js?id="+gTagId,function(){function e(){dataLayer.push(arguments)}function t(t){var o=function(){void 0!==t&&(window.location=t)};return e("event","conversion",{send_to:gTagWhatever,event_callback:o}),!1}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",gTagId),$("#turnOnAnalytics").css("background","lightgreen"),t()})}),"empty"!==clarityTag&&$("#turnOnClarity").click(function(){var e,t,o,a,n,i,r;e=window,t=document,o="clarity",a="script",n=clarityTag,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},i=t.createElement(a),i.async=1,i.src="https://www.clarity.ms/tag/"+n,r=t.getElementsByTagName(a)[0],r.parentNode.insertBefore(i,r),$("#turnOnClarity").css("background","lightgreen")}),$("#imprint").dialog({title:"Imprint",autoOpen:!1,minWidth:400,modal:!0,buttons:{"Schlie√üen":function(){$(this).dialog("close")}}}),$("#imprintButton").click(function(){$("#imprint").dialog("open")}),$("body").append('<div id="startUp" style="padding:8px;"><h1>Start-up</h1><h2>M√∂chten Sie gern audio/video vorbereiten?</h2><p>Dann k√∂nnen Sie auch chatten.</p>'),$("#startUp").dialog({title:"Start-up",autoOpen:!1,minWidth:400,modal:!0,position:{my:"right top",at:"right top"},buttons:{Nein:function(){$(this).dialog("close")},"Ja, audio/video vorbereiten":function(){$("#walkAroundWithVideo").click(),$(this).dialog("close")}}}),$("#sendPresent").click(function(){spacebarText=1,$("#writeAnythingTo").attr("receiver",fleoNumDistant),$("#writeAnythingTo").find("h2").html("Write anything to:<br />"+$("#maennikenTextWall-"+fleoNumDistant).html()),$("#writeAnythingTo").show(),$("#sendAnythingButton").click(function(){spacebarText=0,$.post("/fleo.at-php/fleo.at_setOfflineOnline.php",{doing:2,fleoNumOwn:(myNumber[0]+myNumber[2]).replace("#",""),fleoNumDistant:fleoNumDistant,extraContent:document.getElementById("sendAnythingText").value}).done(function(e){toastr.success("Trying to give it to: "+$("#maennikenTextWall-"+fleoNumDistant).html())}),$("#writeAnythingTo").hide()}),$("#sendAnythingCancel").click(function(){spacebarText=0,$("#writeAnythingTo").hide()})}),
$("#waldf").append('<div id="waldff"><div style="position:absolute;left:-8746px;bottom:550px;z-index:-1;width:3473px;height:auto;"><img src="https://'+mainDomain+'/fleo.at-medien/layout/background_long_kara_3473x400.webp" style="width:100%;height:auto;" /></div><div style="position:absolute;left:-5273px;bottom:200px;z-index:-1;width:1800px;height:auto;"><img src="https://'+mainDomain+'/fleo.at-medien/repertoire/b_sterne.webp" style="width:100%;height:auto;" /></div><div style="position:absolute;left:-3473px;bottom:550px;z-index:-1;width:3473px;height:auto;"><img src="https://'+mainDomain+'/fleo.at-medien/layout/background_long_kara_3473x400.webp" style="width:100%;height:auto;" /></div><div style="position:absolute;left:0;bottom:200px;z-index:-1;width:1800px;height:auto;"><img src="https://'+mainDomain+'/fleo.at-medien/repertoire/b_sterne.webp" style="width:100%;height:auto;" /></div><div style="position:absolute;left:1800px;bottom:550px;z-index:-1;width:3473px;height:auto;"><img src="https://'+mainDomain+'/fleo.at-medien/layout/background_long_kara_3473x400.webp" style="width:100%;height:auto;" /></div><div style="position:absolute;left:5273px;bottom:200px;z-index:-1;width:1800px;height:auto;"><img src="https://'+mainDomain+'/fleo.at-medien/repertoire/b_sterne.webp" style="width:100%;height:auto;" /></div><div style="position:absolute;left:7073px;bottom:550px;z-index:-1;width:3473px;height:auto;"><img src="https://'+mainDomain+'/fleo.at-medien/layout/background_long_kara_3473x400.webp" style="width:100%;height:auto;" /></div></div><div id="waldfb" style="display:none;"><div style="position:absolute;left:-8746px;bottom:550px;z-index:-1;width:3473px;height:auto;"><img src="https://'+mainDomain+'/fleo.at-medien/layout/background_long_kara_3473x400.webp" style="width:100%;height:auto;" /></div><div style="position:absolute;left:-5273px;bottom:200px;z-index:-1;width:1800px;height:auto;"><img src="https://'+mainDomain+'/fleo.at-medien/repertoire/b_sterne.webp" style="width:100%;height:auto;" /></div><div style="position:absolute;left:-3473px;bottom:550px;z-index:-1;width:3473px;height:auto;"><img src="https://'+mainDomain+'/fleo.at-medien/layout/background_long_kara_3473x400.webp" style="width:100%;height:auto;" /></div><div style="position:absolute;left:0;bottom:500px;z-index:-1;width:1800px;height:auto;"><img src="/fleo.at-medien/userImages/1678485250imagepng13451778227.png.webp" style="width:100%;height:auto;" /></div><div style="position:absolute;left:1800px;bottom:550px;z-index:-1;width:3473px;height:auto;"><img src="https://'+mainDomain+'/fleo.at-medien/layout/background_long_kara_3473x400.webp" style="width:100%;height:auto;" /></div><div style="position:absolute;left:5273px;bottom:200px;z-index:-1;width:1800px;height:auto;"><img src="https://'+mainDomain+'/fleo.at-medien/repertoire/b_sterne.webp" style="width:100%;height:auto;" /></div><div style="position:absolute;left:7073px;bottom:550px;z-index:-1;width:3473px;height:auto;"><img src="https://'+mainDomain+'/fleo.at-medien/layout/background_long_kara_3473x400.webp" style="width:100%;height:auto;" /></div></div>'),$("#haeuserf").append('<div style="position:absolute;left:0;bottom:60px;z-index:0;width:1800px;height:auto;"><img src="https://'+mainDomain+'/fleo.at-medien/repertoire/haeuserf.webp" style="width:100%;height:auto;" /></div>');let windowObjectReference=null;var userWantsOtherWindow=0;$("#niceWindowToggle").click(function(){var e=1;windowObjectReference=window.open("","tCupSpaceOpenInOtherWindow","toolbar=no, menubar=no, resizable=yes"),$("body").html('<video autoplay muted loop id="bgbgsterne" poster="/fleo.at-medien/repertoire/sternenhimmel.jpg"><source src="/fleo.at-medien/repertoire/space_front_320_PIxEL.mp4" type="video/mp4" id="bgbgsterneVideo"></video><div id="otherWindowOpenedContent" style="position:fixed;top:20px;left:20px;margin-right:20px;background:white;font-size:30px;z-index:100000;padding:8px;"></div>'),null===windowObjectReference&&1==e&&(windowObjectReference=window.open("","tCupSpaceOpenInOtherWindow","toolbar=no, menubar=no, resizable=yes"),windowObjectReference.focus(),$("#otherWindowOpenedContent").html("If "+mainDomain+' is not open in other window, <span style="color:blue;" id="clickNew">click here</span> to open it.'),$("#clickNew").click(function(){windowObjectReference=window.open("",mainDomain,"toolbar=no, menubar=no, resizable=yes"),$("#otherWindowOpenedContent").html("You should see "+mainDomain+' in other window as you clicked a link to open it. Otherwise <a href="">open '+mainDomain+"</a> here."),self.focus()})),null===windowObjectReference&&windowObjectReference.closed&&(location.href=""),null!==windowObjectReference&&1==e&&($("#otherWindowOpenedContent").html("You should see "+mainDomain+' in other window as you clicked a link to open it. Otherwise <a href="">open '+mainDomain+"</a> here."),self.focus()),setInterval(function(){windowObjectReference.closed&&($("#otherWindowOpenedContent").html('Bye, hope to see you back soon! If you like to, <a href="">open '+mainDomain+"</a> again."),self.focus())},500)});var firstView=1,viewLR=1,went=0,wentZ=0,twowent=0,twowentZ=0,threewent=0,threewentZ=0,wentX=0,twowentX=0,threewentX=0;$("#infot").click(function(){"f"==will?($("#bgbgsterneVideo").attr("src","/fleo.at-medien/repertoire/space_front_320_PIxEL.mp4"),$("#bgbgsterne")[0].load(),$("#haeuserf").show(),went=0,twowentX=twowent,threewentX=threewent,threewent=0,$("#wrapper").removeClass("bw").addClass("fw"),turnAround(will,sMMssM,0,historyCoords,am),am="f",will="b"):"b"==will&&($("#bgbgsterneVideo").attr("src","/fleo.at-medien/repertoire/space_back_320_PIxEL.mp4"),$("#bgbgsterne")[0].load(),$("#haeuserf").hide(),1==firstView&&(went=0,wentZ=0,twowentZ=0,twowent=0,threewentZ=0,threewent=0),went=0,twowent+=twowentX,threewent+=threewentX,$("#wrapper").removeClass("fw").addClass("bw"),turnAround(will,sMMssM,0,historyCoords,am),firstView=0,am="b",will="f"),$(".person").each(function(){$("#maennikenBag-"+$(this).find(".tree").attr("id").replace("personTree-","")).css({left:82-parseInt($("#maennikenBag-"+$(this).find(".tree").attr("id").replace("personTree-","")).width()/2)+"px",bottom:90-parseInt($("#maennikenBag-"+$(this).find(".tree").attr("id").replace("personTree-","")).height()/2)+"px"})})});var moveMeTrainsMMssM,that1,scaleNow,scaleNowNumber,aaa,scaleCentral,hCCentral,durationSec,oldTurn,setVolume=[],sideVolume=[],doordsVolume=[],heightStep=0,heightStepOld=0;$("body").append('<div id="startBlockAllTaxi" style="position:fixed;top:0;left:0;z-index:13000;height:100vh;width:100vw;background:none;opacity:0;display:none;"></div>');var haltEverything=1,keys=1,chatKeysOn=0;editTrick=0,$(document).keydown(function(e){0==spacebarText&&(38==e.which&&(e.preventDefault(),1==keys&&moveWithTrain(historyCoords+turn/2,"b"==will?Math.round(sMMssM-300*(1-Math.abs(turn)/9e3)):Math.round(sMMssM+300*(1-Math.abs(turn)/9e3)),0,relationToBackground,turn)),40==e.which&&(e.preventDefault(),1==keys&&moveWithTrain(historyCoords-turn/2,"b"==will?Math.round(sMMssM+300*(1-Math.abs(turn)/9e3)):Math.round(sMMssM-300*(1-Math.abs(turn)/9e3)),0,relationToBackground,turn)),37==e.which&&(e.preventDefault(),1==keys&&$(".chtopleft").click()),39==e.which&&(e.preventDefault(),1==keys&&$(".chtopright").click()),32==e.which&&e.preventDefault(),77==e.which&&(e.preventDefault(),$("#menuOnOff").click()),73==e.which&&(e.preventDefault(),1!==audioConferenceConnected&&$("#walkAroundWithVideo").click()),84==e.which&&(e.preventDefault(),$("#infot").click()),71==e.which&&(e.preventDefault(),$("#fixedLocationOpen").click()),65==e.which&&(e.preventDefault(),$("#push2TalkUserWants").click()),68==e.which&&(e.preventDefault(),$("#drive").click()),69==e.which&&(e.preventDefault(),editTrick=1),$(".tree").mouseover(function(){1==editTrick&&(editTrick=0,$(this).dblclick())})),1==chatKeysOn&&(13!=e.which||e.shiftKey||$("#sendMessageButton").click()),1==wantTaxi&&13==e.which&&($("#taxi-send").click(),wantTaxi=0)}),$(".chtop").click(function(e){e.preventDefault(),moveWithTrain(historyCoords,"b"==will?sMMssM-300:sMMssM+300,0,relationToBackground,turn)}),$(".chleft").click(function(e){e.preventDefault(),moveWithTrain("b"==will?historyCoords+300:historyCoords-300,sMMssM,0,relationToBackground,turn)}),$(".chcentercenter").click(function(e){e.preventDefault()}),$(".chright").click(function(e){e.preventDefault(),moveWithTrain("b"==will?historyCoords-300:historyCoords+300,sMMssM,0,relationToBackground,turn)}),$(".chbottom").click(function(e){e.preventDefault(),moveWithTrain(historyCoords,"b"==will?sMMssM+300:sMMssM-300,0,relationToBackground,turn)}),$("#navFor").click(function(){moveWithTrain(historyCoords+turn/2*1,"b"==will?Math.round(sMMssM-300*(1-Math.abs(turn)/9e3/1)):Math.round(sMMssM+(1-Math.abs(turn)/9e3)),0,relationToBackground,turn)}),$("#navForStrong").click(function(){moveWithTrain(historyCoords+turn/2*3,"b"==will?Math.round(sMMssM-300*(3-Math.abs(turn)/9e3/3)):Math.round(sMMssM+(3-Math.abs(turn)/3e3)),0,relationToBackground,turn)}),$("#navForWheel").click(function(){moveWithTrain(historyCoords+turn/2*7,"b"==will?Math.round(sMMssM-300*(7-Math.abs(turn)/9e3/7)):Math.round(sMMssM+(7-Math.abs(turn)/(9e3/7))),0,relationToBackground,turn)}),$("#navBacWheel").click(function(){moveWithTrain(historyCoords-turn/2*7,"b"==will?Math.round(sMMssM+300*(7-Math.abs(turn)/9e3/7)):Math.round(sMMssM-(7-Math.abs(turn)/(9e3/7))),0,relationToBackground,turn)}),$("#navBac").click(function(){"b"==will?moveWithTrain(historyCoords-turn/2*1,Math.round(sMMssM+300*(3-Math.abs(turn)/9e3/1)),0,relationToBackground,turn):moveWithTrain(historyCoords+turn/2*-1,Math.round(sMMssM-(1-Math.abs(turn)/9e3)),0,relationToBackground,turn)}),$("#navBacStrong").click(function(){moveWithTrain(historyCoords-turn/2*3,"b"==will?Math.round(sMMssM+300*(3-Math.abs(turn)/9e3/3)):Math.round(sMMssM-(3-Math.abs(turn)/3e3)),0,relationToBackground,turn)}),$("#navLef").click(function(){moveWithTrain("b"==will?historyCoords+300:historyCoords-300,sMMssM,250,relationToBackground,turn)}),$("#navLefStrong").click(function(){moveWithTrain("b"==will?historyCoords+700:historyCoords-700,sMMssM,250,relationToBackground,turn)}),$("#navRig").click(function(){moveWithTrain("b"==will?historyCoords-300:historyCoords+300,sMMssM,250,relationToBackground,turn)}),$("#navRigStrong").click(function(){moveWithTrain("b"==will?historyCoords-700:historyCoords+700,sMMssM,250,relationToBackground,turn)}),$(".chtopleft").click(function(){"b"==will?turn+200<9e3&&turn+200>-9e3?(turn+=200,$("[class*='scale']").animate({left:turn+"px"},0),$("#haeuserf, #waldf").animate({left:turn+"px"},0),$("#bgbgbsterne").animate({left:1.2*turn+"px"},0),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*90+"deg"},{duration:0}),moveWithTrain(historyCoords,sMMssM,250,relationToBackground,turn),$.post("/fleo.at-php/fleo.at_turn.php",{doing:1,turn:turn,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})):turn+200>=9e3&&($("#infot").click(),$("[class*='scale']").animate({left:turn+"px"},0),$("#haeuserf, #waldf").animate({left:1.2*turn+"px"},0),$("#bgbgbsterne").animate({left:1.2*turn+"px"},0),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*90+"deg"},{duration:0})):turn-200<9e3&&turn-200>-9e3?(turn-=200,$("[class*='scale']").animate({left:turn+"px"},0),$("#haeuserf, #waldf").animate({left:turn+"px"},0),$("#bgbgbsterne").animate({left:1.2*turn+"px"},0),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*-90+180+"deg"},{duration:0}),$.post("/fleo.at-php/fleo.at_turn.php",{doing:1,turn:turn,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})):turn-200<=-9e3&&($("#infot").click(),$("[class*='scale']").animate({left:turn+"px"},0),$("#haeuserf, #waldf").animate({left:turn+"px"},0),$("#bgbgbsterne").animate({left:1.2*turn+"px"},0),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*-90+180+"deg"},{duration:0}))}),$(".chbottomleft").click(function(){$(".chtopleft").click()}),$(".chtopright").click(function(){"b"==will?turn-200<9e3&&turn-200>-9e3?(turn-=200,$("[class*='scale']").animate({left:turn+"px"},0),$("#haeuserf, #waldf").animate({left:turn+"px"},0),$("#bgbgbsterne").animate({left:1.2*turn+"px"},0),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*90+"deg"},{duration:0}),$.post("/fleo.at-php/fleo.at_turn.php",{doing:1,turn:turn,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})):turn-200<=-9e3&&($("#infot").click(),$("[class*='scale']").animate({left:turn+"px"},0),$("#haeuserf, #waldf").animate({left:1.2*turn+"px"},0),$("#bgbgbsterne").animate({left:1.2*turn+"px"},0),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*90+"deg"},{duration:0})):turn+200<9e3&&turn+200>-9e3?(turn+=200,$("[class*='scale']").animate({left:turn+"px"},0),$("#haeuserf, #waldf").animate({left:turn+"px"},0),$("#bgbgbsterne").animate({left:1.2*turn+"px"},0),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*-90+180+"deg"},{duration:0}),$.post("/fleo.at-php/fleo.at_turn.php",{doing:1,turn:turn,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})):turn+200<=9e3&&($("#infot").click(),$("[class*='scale']").animate({left:turn+"px"},0),$("#haeuserf, #waldf").animate({left:turn+"px"},0),$("#bgbgbsterne").animate({left:1.2*turn+"px"},0),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*-90+180+"deg"},{duration:0}))}),$(".chbottomright").click(function(){$(".chtopright").click()}),$(".chleft").on("mousewheel",function(e){e.preventDefault(),moveWithTrain("b"==will?parseInt(historyCoords+(1-Math.abs(turn)/9e3)*e.deltaFactor*e.deltaY*3):parseInt(historyCoords+(1-Math.abs(turn)/9e3)*e.deltaFactor*e.deltaY*-3),parseInt(sMMssM+turn/12*e.deltaFactor*e.deltaY/100),0,relationToBackground,turn)}),$(".chright").on("mousewheel",function(e){e.preventDefault(),moveWithTrain("b"==will?parseInt(historyCoords+(1-Math.abs(turn)/9e3)*e.deltaFactor*e.deltaY*3):parseInt(historyCoords+(1-Math.abs(turn)/9e3)*e.deltaFactor*e.deltaY*-3),parseInt(sMMssM+turn/12*e.deltaFactor*e.deltaY/100),0,relationToBackground,turn)}),$(".chleft").swipe({swipe:function(e,t,o,a,n,i){"right"!=t&&"up"!=t||(o*=-1),moveWithTrain("b"==will?parseInt(historyCoords+(1-Math.abs(turn)/9e3)*o*3):parseInt(historyCoords+(1-Math.abs(turn)/9e3)*o*-3),parseInt(sMMssM+turn/12*o/100),0,relationToBackground,turn)}}),$(".chright").swipe({swipe:function(e,t,o,a,n,i){"right"!=t&&"up"!=t||(o*=-1),moveWithTrain("b"==will?parseInt(historyCoords+(1-Math.abs(turn)/9e3)*o*3):parseInt(historyCoords+(1-Math.abs(turn)/9e3)*o*-3),parseInt(sMMssM+turn/12*o/100),0,relationToBackground,turn)}}),$(".chleft").on("click",function(e){moveWithTrain("b"==will?parseInt(historyCoords+Math.round(600)):parseInt(historyCoords+Math.round(-600)),sMMssM,0,relationToBackground,turn),e.preventDefault()}),$(".chright").on("click",function(e){moveWithTrain("b"==will?parseInt(historyCoords+Math.round(-600)):parseInt(historyCoords+Math.round(600)),sMMssM,0,relationToBackground,turn),e.preventDefault()}),$(".chtop").on("mousewheel",function(e){e.preventDefault(),moveWithTrain(historyCoords+turn/12*e.deltaFactor*e.deltaY/100,"b"==will?Math.round(sMMssM-(1-Math.abs(turn)/9e3)*e.deltaFactor*e.deltaY*1*5):Math.round(sMMssM-(1-Math.abs(turn)/9e3)*e.deltaFactor*e.deltaY*-1*5),0,relationToBackground,turn)}),$(".chbottom").on("mousewheel",function(e){e.preventDefault(),moveWithTrain(historyCoords+turn/12*e.deltaFactor*e.deltaY/100,"b"==will?Math.round(sMMssM-(1-Math.abs(turn)/9e3)*e.deltaFactor*e.deltaY*1*5):Math.round(sMMssM-(1-Math.abs(turn)/9e3)*e.deltaFactor*e.deltaY*-1*5),0,relationToBackground,turn)}),$("#mapForLocator").on("mousewheel",function(e){e.preventDefault(),moveWithTrain(historyCoords+turn/12*e.deltaFactor*e.deltaY/100,"b"==will?Math.round(sMMssM-(1-Math.abs(turn)/9e3)*e.deltaFactor*e.deltaY*1*5):Math.round(sMMssM-(1-Math.abs(turn)/9e3)*e.deltaFactor*e.deltaY*-1*5),0,relationToBackground,turn)});var drive="",speed=15,driving=0;$("#drive").click(function(){0==driving?(drive=setInterval(function(){Math.round(turn/100);moveWithTrain(historyCoords+turn/2*speed/100,"b"==will?Math.round(sMMssM-(1-Math.abs(turn)/9e3)*speed*1*3):Math.round(sMMssM-(1-Math.abs(turn)/9e3)*speed*-1*3),0,relationToBackground,turn)},100),$("#drive").css("background","yellow"),driving=1):(speed=15,clearInterval(drive),$("#drive").css("background","rgb(214, 214, 195)"),driving=0)}),$("#navForWheel").on("mousewheel",function(e){e.preventDefault(),moveWithTrain(historyCoords,"b"==will?sMMssM+300*Math.round(e.deltaY*e.deltaFactor*-1/80):sMMssM+300*Math.round(e.deltaY*e.deltaFactor/80),0,relationToBackground,turn)}),$("#navBacWheel").on("mousewheel",function(e){e.preventDefault(),moveWithTrain(historyCoords,"b"==will?sMMssM+300*Math.round(e.deltaY*e.deltaFactor*-1/80):sMMssM+300*Math.round(e.deltaY*e.deltaFactor/80),0,relationToBackground,turn)}),$(".chtop").on("click",function(e){moveWithTrain(historyCoords+turn/12*100/100,"b"==will?Math.round(sMMssM-100*(1-Math.abs(turn)/9e3)*1*3):Math.round(sMMssM-100*(1-Math.abs(turn)/9e3)*-1*3),0,relationToBackground,turn),e.preventDefault()}),$(".chbottom").on("click",function(e){moveWithTrain(historyCoords+turn/12*-100/100,"b"==will?Math.round(sMMssM- -100*(1-Math.abs(turn)/9e3)*1*3):Math.round(sMMssM- -100*(1-Math.abs(turn)/9e3)*-1*3),0,relationToBackground,turn),e.preventDefault()}),$(".chtopleft").on("mousewheel",function(e){e.preventDefault(),"b"==will?turn+e.deltaY*e.deltaFactor*4<9e3&&turn+e.deltaY*e.deltaFactor*4>-9e3?(turn+=e.deltaY*e.deltaFactor*4,$("[class*='scale']").css({left:turn+"px"}),$("#haeuserf, #waldf").css({left:turn+"px"}),$("#bgbgbsterne").css({left:1.2*turn+"px"}),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*90+"deg"},{duration:0}),$.post("/fleo.at-php/fleo.at_turn.php",{doing:1,turn:turn,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})):(turn+e.deltaY*e.deltaFactor*4>=9e3||turn+e.deltaY*e.deltaFactor*4<=-9e3)&&(turn+=e.deltaY*e.deltaFactor*-4,$("#infot").click(),$("[class*='scale']").css({left:turn+"px"}),$("#haeuserf, #waldf").css({left:turn+"px"}),$("#bgbgbsterne").css({left:1.2*turn+"px"}),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*90+"deg"},{duration:0})):turn+e.deltaY*e.deltaFactor*-4<9e3&&turn+e.deltaY*e.deltaFactor*-4>-9e3?(turn+=e.deltaY*e.deltaFactor*-4,$("[class*='scale']").css({left:turn+"px"}),$("#haeuserf, #waldf").css({left:turn+"px"}),$("#bgbgbsterne").css({left:1.2*turn+"px"}),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*-90+180+"deg"},{duration:0}),$.post("/fleo.at-php/fleo.at_turn.php",{doing:1,turn:turn,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})):(turn+e.deltaY*e.deltaFactor*-4>=9e3||turn+e.deltaY*e.deltaFactor*-4<=-9e3)&&(turn+=e.deltaY*e.deltaFactor*4,$("#infot").click(),$("[class*='scale']").css({left:turn+"px"}),$("#haeuserf, #waldf").css({left:turn+"px"}),$("#bgbgbsterne").css({left:1.2*turn+"px"}),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*-90+180+"deg"},{duration:0}))}),$(".chbottomleft").on("mousewheel",function(e){e.preventDefault(),"b"==will?turn+e.deltaY*e.deltaFactor*4<9e3&&turn+e.deltaY*e.deltaFactor*4>-9e3?(turn+=e.deltaY*e.deltaFactor*4,$("[class*='scale']").css({left:turn+"px"}),$("#haeuserf, #waldf").css({left:turn+"px"}),$("#bgbgbsterne").css({left:1.2*turn+"px"}),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*90+"deg"},{duration:0}),$.post("/fleo.at-php/fleo.at_turn.php",{doing:1,turn:turn,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})):(turn+e.deltaY*e.deltaFactor*4>=9e3||turn+e.deltaY*e.deltaFactor*4<=-9e3)&&(turn+=e.deltaY*e.deltaFactor*-4,$("#infot").click(),$("[class*='scale']").css({left:turn+"px"}),$("#haeuserf, #waldf").css({left:turn+"px"}),$("#bgbgbsterne").css({left:1.2*turn+"px"}),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*90+"deg"},{duration:0})):turn+e.deltaY*e.deltaFactor*-4<9e3&&turn+e.deltaY*e.deltaFactor*-4>-9e3?(turn+=e.deltaY*e.deltaFactor*-4,$("[class*='scale']").css({left:turn+"px"}),$("#haeuserf, #waldf").css({left:turn+"px"}),$("#bgbgbsterne").css({left:1.2*turn+"px"}),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*-90+180+"deg"},{duration:0}),$.post("/fleo.at-php/fleo.at_turn.php",{doing:1,turn:turn,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})):(turn+e.deltaY*e.deltaFactor*-4>=9e3||turn+e.deltaY*e.deltaFactor*-4<=-9e3)&&(turn+=e.deltaY*e.deltaFactor*4,$("#infot").click(),$("[class*='scale']").css({left:turn+"px"}),$("#haeuserf, #waldf").css({left:turn+"px"}),$("#bgbgbsterne").css({left:1.2*turn+"px"}),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*-90+180+"deg"},{duration:0}))}),$(".chtopright").on("mousewheel",function(e){e.preventDefault(),"b"==will?turn+e.deltaY*e.deltaFactor*4<9e3&&turn+e.deltaY*e.deltaFactor*4>-9e3?(turn+=e.deltaY*e.deltaFactor*4,$("[class*='scale']").css({left:turn+"px"}),$("#haeuserf, #waldf").css({left:turn+"px"}),$("#bgbgbsterne").css({left:1.2*turn+"px"}),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*90+"deg"},{duration:0}),$.post("/fleo.at-php/fleo.at_turn.php",{doing:1,turn:turn,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})):(turn+e.deltaY*e.deltaFactor*4>=9e3||turn+e.deltaY*e.deltaFactor*4<=-9e3)&&(turn+=e.deltaY*e.deltaFactor*-4,$("#infot").click(),$("[class*='scale']").css({left:turn+"px"}),$("#haeuserf, #waldf").css({left:turn+"px"}),$("#bgbgbsterne").css({left:1.2*turn+"px"}),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*90+"deg"},{duration:0})):turn+e.deltaY*e.deltaFactor*-4<9e3&&turn+e.deltaY*e.deltaFactor*-4>-9e3?(turn+=e.deltaY*e.deltaFactor*-4,$("[class*='scale']").css({left:turn+"px"}),$("#haeuserf, #waldf").css({left:turn+"px"}),$("#bgbgbsterne").css({left:1.2*turn+"px"}),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*-90+180+"deg"},{duration:0}),$.post("/fleo.at-php/fleo.at_turn.php",{doing:1,turn:turn,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})):(turn+e.deltaY*e.deltaFactor*-4>=9e3||turn+e.deltaY*e.deltaFactor*-4<=-9e3)&&(turn+=e.deltaY*e.deltaFactor*4,$("#infot").click(),$("[class*='scale']").css({left:turn+"px"}),$("#haeuserf, #waldf").css({left:turn+"px"}),$("#bgbgbsterne").css({left:1.2*turn+"px"}),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*-90+180+"deg"},{duration:0}))}),$(".chbottomright").on("mousewheel",function(e){e.preventDefault(),"b"==will?turn+e.deltaY*e.deltaFactor*4<9e3&&turn+e.deltaY*e.deltaFactor*4>-9e3?(turn+=e.deltaY*e.deltaFactor*4,$("[class*='scale']").css({left:turn+"px"}),$("#haeuserf, #waldf").css({left:turn+"px"}),$("#bgbgbsterne").css({left:1.2*turn+"px"}),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*90+"deg"},{duration:0}),$.post("/fleo.at-php/fleo.at_turn.php",{doing:1,turn:turn,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})):(turn+e.deltaY*e.deltaFactor*4>=9e3||turn+e.deltaY*e.deltaFactor*4<=-9e3)&&(turn+=e.deltaY*e.deltaFactor*-4,$("#infot").click(),$("[class*='scale']").css({left:turn+"px"}),$("#haeuserf, #waldf").css({left:turn+"px"}),$("#bgbgbsterne").css({left:1.2*turn+"px"}),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*90+"deg"},{duration:0})):turn+e.deltaY*e.deltaFactor*-4<9e3&&turn+e.deltaY*e.deltaFactor*-4>-9e3?(turn+=e.deltaY*e.deltaFactor*-4,$("[class*='scale']").css({left:turn+"px"}),$("#haeuserf, #waldf").css({left:turn+"px"}),$("#bgbgbsterne").css({left:1.2*turn+"px"}),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*-90+180+"deg"},{duration:0}),$.post("/fleo.at-php/fleo.at_turn.php",{doing:1,turn:turn,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})):(turn+e.deltaY*e.deltaFactor*-4>=9e3||turn+e.deltaY*e.deltaFactor*-4<=-9e3)&&(turn+=e.deltaY*e.deltaFactor*4,$("#infot").click(),$("[class*='scale']").css({left:turn+"px"}),$("#haeuserf, #waldf").css({left:turn+"px"}),$("#bgbgbsterne").css({left:1.2*turn+"px"}),$("#mapForLocator").css({"transform-origin":mySpotterMapLocationX+"px "+mySpotterMapLocationY+"px"}).transition({perspective:"100px",rotate:turn/9e3*-90+180+"deg"},{duration:0}))}),$(".chcentercenter").on("mousewheel",function(e){e.preventDefault(),"b"==will?turn+e.deltaY*e.deltaFactor*4<9e3&&turn+e.deltaY*e.deltaFactor*4>-9e3?(turn+=e.deltaY*e.deltaFactor*4,moveWithTrain(historyCoords,sMMssM,250,relationToBackground,turn)):(turn+e.deltaY*e.deltaFactor*4>=9e3||turn+e.deltaY*e.deltaFactor*4<=-9e3)&&(turn+=e.deltaY*e.deltaFactor*-4):turn+e.deltaY*e.deltaFactor*-4<9e3&&turn+e.deltaY*e.deltaFactor*-4>-9e3?(turn+=e.deltaY*e.deltaFactor*-4,moveWithTrain(historyCoords,sMMssM,250,relationToBackground,turn)):(turn+e.deltaY*e.deltaFactor*-4>=9e3||turn+e.deltaY*e.deltaFactor*-4<=-9e3)&&(turn+=e.deltaY*e.deltaFactor*4)}),$(".chtopright").swipe({swipe:function(e,t,o,a,n,i){"down"!=t&&"right"!=t||(o*=-1),"b"==will?turn+4*o<9e3&&turn+4*o>-9e3?(turn+=4*o,$("[class*='scale']").animate({left:turn+"px"},100),$("#haeuserf, #waldf").animate({left:turn+"px"},100),$.post("/fleo.at-php/fleo.at_turn.php",{doing:1,turn:turn,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})):(turn+2*o>=9e3||turn+4*o<=-9e3)&&($("#infot").click(),$("[class*='scale']").animate({left:turn+"px"},100),$("#haeuserf, #waldf").animate({left:turn+"px"},100)):turn+-4*o<9e3&&turn+-4*o>-9e3?(turn+=-4*o,$("[class*='scale']").animate({left:turn+"px"},100),$("#haeuserf, #waldf").animate({left:turn+"px"},100),$.post("/fleo.at-php/fleo.at_turn.php",{doing:1,turn:turn,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})):(turn+-4*o>=9e3||turn+-4*o<=-9e3)&&($("#infot").click(),$("[class*='scale']").animate({left:turn+"px"},100),$("#haeuserf, #waldf").animate({left:turn+"px"},100))}}),$(".chtopleft").swipe({swipe:function(e,t,o,a,n,i){"down"!=t&&"right"!=t||(o*=-1),"b"==will?turn+4*o<9e3&&turn+4*o>-9e3?(turn+=4*o,$("[class*='scale']").animate({left:turn+"px"},100),$("#haeuserf, #waldf").animate({left:turn+"px"},100),$.post("/fleo.at-php/fleo.at_turn.php",{doing:1,turn:turn,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})):(turn+2*o>=9e3||turn+4*o<=-9e3)&&($("#infot").click(),$("[class*='scale']").animate({left:turn+"px"},100),$("#haeuserf, #waldf").animate({left:turn+"px"},100)):turn+-4*o<9e3&&turn+-4*o>-9e3?(turn+=-4*o,$("[class*='scale']").animate({left:turn+"px"},100),$("#haeuserf, #waldf").animate({left:turn+"px"},100),$.post("/fleo.at-php/fleo.at_turn.php",{doing:1,turn:turn,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})):(turn+-4*o>=9e3||turn+-4*o<=-9e3)&&($("#infot").click(),$("[class*='scale']").animate({left:turn+"px"},100),$("#haeuserf, #waldf").animate({left:turn+"px"},100))}}),$(".chbottomleft").swipe({swipe:function(e,t,o,a,n,i){"down"!=t&&"right"!=t||(o*=-1),"b"==will?turn+4*o<9e3&&turn+4*o>-9e3?(turn+=4*o,$("[class*='scale']").animate({left:turn+"px"},100),$("#haeuserf, #waldf").animate({left:turn+"px"},100),$.post("/fleo.at-php/fleo.at_turn.php",{doing:1,turn:turn,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})):(turn+2*o>=9e3||turn+4*o<=-9e3)&&($("#infot").click(),$("[class*='scale']").animate({left:turn+"px"},100),$("#haeuserf, #waldf").animate({left:turn+"px"},100)):turn+-4*o<9e3&&turn+-4*o>-9e3?(turn+=-4*o,$("[class*='scale']").animate({left:turn+"px"},100),$("#haeuserf, #waldf").animate({left:turn+"px"},100),$.post("/fleo.at-php/fleo.at_turn.php",{doing:1,turn:turn,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})):(turn+-4*o>=9e3||turn+-4*o<=-9e3)&&($("#infot").click(),$("[class*='scale']").animate({left:turn+"px"},100),$("#haeuserf, #waldf").animate({left:turn+"px"},100))}}),$(".chbottomright").swipe({swipe:function(e,t,o,a,n,i){"down"!=t&&"right"!=t||(o*=-1),"b"==will?turn+4*o<9e3&&turn+4*o>-9e3?(turn+=4*o,$("[class*='scale']").animate({left:turn+"px"},100),$("#haeuserf, #waldf").animate({left:turn+"px"},100),$.post("/fleo.at-php/fleo.at_turn.php",{doing:1,turn:turn,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})):(turn+2*o>=9e3||turn+4*o<=-9e3)&&($("#infot").click(),$("[class*='scale']").animate({left:turn+"px"},100),$("#haeuserf, #waldf").animate({left:turn+"px"},100)):turn+-4*o<9e3&&turn+-4*o>-9e3?(turn+=-4*o,$("[class*='scale']").animate({left:turn+"px"},100),$("#haeuserf, #waldf").animate({left:turn+"px"},100),$.post("/fleo.at-php/fleo.at_turn.php",{doing:1,turn:turn,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})):(turn+-4*o>=9e3||turn+-4*o<=-9e3)&&($("#infot").click(),$("[class*='scale']").animate({left:turn+"px"},100),$("#haeuserf, #waldf").animate({left:turn+"px"},100))}}),$(".chcentercenter").swipe({swipe:function(e,t,o,a,n,i){"down"!=t&&"right"!=t||(o*=-1),"b"==will?turn+4*o<9e3&&turn+4*o>-9e3?(turn+=4*o,$("[class*='scale']").animate({left:turn+"px"},100),$("#haeuserf, #waldf").animate({left:turn+"px"},100),$.post("/fleo.at-php/fleo.at_turn.php",{doing:1,turn:turn,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})):(turn+2*o>=9e3||turn+4*o<=-9e3)&&($("#infot").click(),$("[class*='scale']").animate({left:turn+"px"},100),$("#haeuserf, #waldf").animate({left:turn+"px"},100)):turn+-4*o<9e3&&turn+-4*o>-9e3?(turn+=-4*o,$("[class*='scale']").animate({left:turn+"px"},100),$("#haeuserf, #waldf").animate({left:turn+"px"},100),$.post("/fleo.at-php/fleo.at_turn.php",{doing:1,turn:turn,fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})):(turn+-4*o>=9e3||turn+-4*o<=-9e3)&&($("#infot").click(),$("[class*='scale']").animate({left:turn+"px"},100),$("#haeuserf, #waldf").animate({left:turn+"px"},100))}}),$("#navBacStrong").swipe({swipe:function(e,t,o,a,n,i){"up"!=t&&"right"!=t||(o*=-1),moveWithTrain(historyCoords,"b"==will?sMMssM+50*o:sMMssM+-50*o,0,relationToBackground,turn)}}),$(".chbottom").swipe({swipe:function(e,t,o,a,n,i){"down"!=t&&"right"!=t||(o*=-1),moveWithTrain(historyCoords,"b"==will?sMMssM+5*o:sMMssM+-5*o,40,relationToBackground,turn)}}),$("#navForStrong").swipe({swipe:function(e,t,o,a,n,i){moveWithTrain(historyCoords,"b"==will?sMMssM+1500:sMMssM+-1500,40,relationToBackground,turn)}}),$(".chtop").swipe({swipe:function(e,t,o,a,n,i){moveWithTrain(historyCoords,"b"==will?sMMssM+1500:sMMssM+-1500,40,relationToBackground,turn)}})
;var mapLatitude,mapLongitude,mapLocationX,mapLocationY,currenturl=window.location.hostname,currentpath=window.location.pathname,currentaddress=currenturl+currentpath;$("body").append('<div id="fixedLocation" style="color:white; font-size:24px;z-index:9050;background:gray; "><div id="TrainWOMapDiv"><div><span id="goMap" style="float:right;cursor:pointer;display:block;">Go map<span style="font-size:32px;">üó∫</span></span>So, do you want to go:</div><br /><div class="goNothingLink" style="cursor:pointer;border: 10px solid purple; padding:10px;">Just hide this, looked good. X</div><br />or<br /><div id="goReal" style="cursor:pointer;border: 10px solid purple; padding:10px;">To my real location in '+currenturl+' (by IP-address)</div><br />or<br /><div id="goDowntown" style="cursor:pointer;border: 10px solid purple; padding:10px;">Downtown</div></div><div id="mapDiv" style="display:none;"><canvas id="mapForTrain" width="720" height="360" style="width:720px;height:360px;float:left;margin: 0 30px 0 0;"></canvas><span>Taxi:</span><p><input id="taxi-coords" class="selectReset" type="text" placeholder="'+historyCoords+'" size="20"></p><p><input id="taxi-doords" class="selectReset" type="text" placeholder="'+sMMssM+'" size="20"></p><p><button id="taxi-send">Go Taxi!</button></p><p><span class="goNothingLink" style="cursor:pointer;">Cancel</span></p></div></div>'),$("body").append('<div id="fixedLocationOpen" style="display:none;position:fixed;top: 200px; right: 0px; width:90px; height: 90px;color:white; font-size:24px;z-index:7000;background:gray;border:5px solid purple;border-radius: 50px; transform: translateX(50px);cursor:pointer;"><br />üöÜ</div>'),$("#fixedLocation").dialog({title:"Move far",autoOpen:!1,minWidth:720,modal:!1,beforeClose:function(e,t){$("#fixedLocationOpen").fadeIn()}}),$("#taxi-send").click(function(){$("#taxi-coords").val()?taxiCoords=parseInt($("#taxi-coords").val()):taxiCoords=0,$("#taxi-doords").val()?taxiDoords=parseInt($("#taxi-doords").val()):taxiDoords=0,moveWithTrain(taxiCoords,3*taxiDoords,2e3,relationToBackground,turn),$("#fixedLocation").dialog("close"),$("#TrainWOMapDiv").show(),$("#mapDiv").hide()}),$(".goNothingLink").click(function(){$("#fixedLocation").dialog("close"),$("#TrainWOMapDiv").show(),$("#mapDiv").hide()}),"go"==urlForCoordsGet.get("location")&&$("#fixedLocation").dialog("close"),$("#fixedLocationOpen").click(function(){$("#fixedLocation").dialog("open"),$("#fixedLocationOpen").fadeOut()});var moveMeDowntownsMMssM,canvasTrain=document.getElementById("mapForTrain"),ctx=canvasTrain.getContext("2d"),mapBackground=new Image,wantTaxi=0;mapBackground.src="/fleo.at-medien/userImages/1666905005image.png579296348312.png.webp",mapBackground.onload=function(){ctx.drawImage(mapBackground,0,0)},$("#goMap").click(function(){$("#TrainWOMapDiv").hide(),$("#mapDiv").fadeIn(),wantTaxi=1,$("#taxi-coords").attr("value",historyCoords),$("#taxi-doords").attr("value",sMMssM/3),$("#taxi-coords").attr("placeholder",historyCoords),$("#taxi-doords").attr("placeholder",sMMssM/3),mapLatitude=-1*Math.trunc(parseInt(historyCoords)/1e3),mapLongitude=-1*parseInt(sMMssM)/300,mapLatitude<-180?mapLatitude=-180:mapLatitude>180&&(mapLatitude=180),mapLongitude<-90?mapLongitude=-90:mapLongitude>90&&(mapLongitude=90),mapLocationX=(mapLatitude/360+.5)*document.getElementById("mapForTrain").width,mapLocationY=(1-(mapLongitude/180+.5))*document.getElementById("mapForTrain").height,document.getElementById("mapForTrain").getContext("2d").beginPath(),document.getElementById("mapForTrain").getContext("2d").arc(mapLocationX,mapLocationY,3,0,2*Math.PI),document.getElementById("mapForTrain").getContext("2d").fillStyle="#ff0000",document.getElementById("mapForTrain").getContext("2d").fill()}),$("#mapForTrain").click(function(e){var t=$(this).offset(),o=e.pageX-t.left,a=e.pageY-t.top;o=o/2-180,o=-1e3*o.toFixed(3),a=a/2-90,a*=.9,a/=100,a=2*a*(180/Math.PI),a=a.toFixed(0),o=parseInt(o),a=parseInt(a),moveWithTrain(o,300*a,2e3,relationToBackground,turn),$("#fixedLocation").dialog("close"),$("#TrainWOMapDiv").show(),$("#mapDiv").hide()}),$("#goDowntown").click(function(){moveWithTrain(0,0,2e3,relationToBackground,turn),$("#fixedLocation").dialog("close")}),$("#goReal").click(function(){$.get("/fleo.at-php/locator/latitude.php?doing",function(e,t,o){var a=e;a=parseInt(a),$.get("/fleo.at-php/locator/longitude.php?doing",function(e,t,o){var n=e;n=parseInt(n),moveWithTrain(n,300*a,200,relationToBackground,turn),$("#fixedLocation").dialog("close")})})});var worldSrc,truckLetCoords,truckLetDoords,translationSrc,presenceSrc,genesisDone=0,firstRoomLoaded=0,doReplayAndRecord=1,replayAndRecordBuilt=0;$("body").arrive("#push2TalkUser",function(){chunks=[],$("#push2TalkOwnMute").click(function(){document.getElementById("callerAudio-Own").volume=0,$("#push2TalkOwnMute").toggle(),$("#push2TalkOwnUnmute").toggle()}),$("#push2TalkOwnUnmute").click(function(){document.getElementById("callerAudio-Own").volume=1,$("#push2TalkOwnUnmute").toggle(),$("#push2TalkOwnMute").toggle()});const e=document.getElementById("push2TalkUser"),t=document.getElementById("push2TalkUserUpload");$("#push2TalkUserCheck").slideUp(),$(".videoWallManAudio").each(function(){let e=$(this).attr("id"),t=decodeURI($(this).attr("data-audiosessionname"));if($("#audioRecOthers").append('<div id="audioRec-'+e+'" style="width:500px;height:60px;position:relative;display:inline-block;"><div id="audioRecMan-'+e+'" class="audioRecTrackName" style="position:relative;width:170px;height:30px;display:inline-block;">'+t+'</div><div id="audioRecOnOff'+e+'" class="audioRecTrackOnOff" data-onoff="on" style="position:absolute;width:30px;height:30px;background:red;display:inline-block;z-index:100;right:300px;top:0;text-align:center;line-height:30px;cursor:pointer;">G</div><div id="audioRecVolBypass'+e+'" class="audioRecTrackVolBypass" data-onoff="off" style="position:absolute;width:30px;height:30px;background:gray;display:inline-block;z-index:100;right:300px;top:30px;text-align:center;line-height:30px;cursor:pointer;">V</div><div class="volumeClickRec'+e+'" style="position:absolute;z-index:10;bottom:0;left:200px;height:60px;width:300px;cursor:pointer;"></div><div style="width:300px;height:50px;position:absolute;bottom:10px;left:200px;z-index:2;" class="volumeMeterRec'+e+'"></div><div style="width:300px;height:50px;position:absolute;bottom:10px;left:200px;z-index:1;" class="volumeMeterGrayRec'+e+'"></div><div style="background:#ff0000;width:150px;height:10px;position:absolute;bottom:0;left:200px;z-index:1;" class="volumeRec'+e+'"></div><div style="background:blue;width:300px;height:2px;position:absolute;bottom:0;left:200px;z-index:2;" class="volumeSoundRec'+e+'"></div></div>'),volumeBypassIsOnOff[e]="off",volumeOld[e]=1,$(".volumeMeterRec"+e).html($(".volumeMeter"+e).children().detach()),$(".volumeMeterGrayRec"+e).html($(".volumeMeterGray"+e).children().detach()),mediaRecorder[e]=new MediaRecorder(fleoMediaStream[e].stream),$(document).on("click","#audioRecOnOff"+e,function(t){"on"==$("#audioRecOnOff"+e).attr("data-onoff")?(gainOld[e]=gainNode[e].gain.value,gainNode[e].gain.setValueAtTime(0,audioCtxVolume[e].currentTime+.005),$(".volumeRec"+e).css("width","0px"),"on"==volumeBypassIsOnOff[e]&&(volumeOld[e]=0,$("#"+e)[0].volume=0,$(".volumeSoundRec"+e).css("width","0px")),$("#audioRecOnOff"+e).attr("data-onoff","off"),$("#audioRecOnOff"+e).css("background-color","gray")):(gainNode[e].gain.setValueAtTime(parseFloat(gainOld[e]),audioCtxVolume[e].currentTime+.005),$(".volumeRec"+e).css("width",150*parseFloat(gainOld[e])+"px"),"on"==volumeBypassIsOnOff[e]&&$(".volumeSoundRec"+e).css("width",300*volumeOld[e]+"px"),$("#audioRecOnOff"+e).attr("data-onoff","on"),$("#audioRecOnOff"+e).css("background-color","red"))}),$(document).on("click","#audioRecVolBypass"+e,function(t){"off"==$("#audioRecVolBypass"+e).attr("data-onoff")?(volumeOld[e]=$("#"+e)[0].volume,$("#"+e)[0].volume=0,volumeBypassIsOnOff[e]="on",$("#audioRecVolBypass"+e).attr("data-onoff","on"),$("#audioRecVolBypass"+e).css("background-color","blue")):($("#"+e)[0].volume=volumeOld[e],volumeBypassIsOnOff[e]="off",$("#audioRecVolBypass"+e).attr("data-onoff","off"),$("#audioRecVolBypass"+e).css("background-color","gray"))}),$(document).on("click",".volumeClickRec"+e,function(t){let o=$(".volumeClickRec"+e).offset(),a=2*(t.pageX-o.left);gainNode[e].gain.setValueAtTime(parseFloat(a/300),audioCtxVolume[e].currentTime+.005),"on"==volumeBypassIsOnOff[e]&&($("#"+e)[0].volume=1/600*a,$(".volume"+e).css("height",1/6*a+"%"),$(".volumeSoundRec"+e).css("width",.5*a+"px")),$(".volumeRec"+e).css("width",.5*a+"px"),$("#audioRecOnOff"+e).attr("data-onoff","on"),$("#audioRecOnOff"+e).css("background-color","red")}),void 0===o){var o=[];Object.keys(mediaRecorder).forEach(e=>{o.push({name:e,content:mediaRecorder[e]})})}}),setTimeout(function(){mediaRecorderArray[mediaRecorderArray.length-1].content.onstop=function(e){if(!t)var t=new FormData;streamsNum=0;for(let e=0;e<mediaRecorderArray.length;e++)blobToRec[e]=new Blob(chunks[e],{type:"audio/webm; codecs=opus"}),blobToRec[e].size>0&&(streamsNum++,recReader[e]||(recReader[e]=new FileReader),recReader[e].readAsDataURL(blobToRec[e]),recReader[e].onloadend=function(){t.append("data"+e,recReader[e].result)});console.log("Recorder stopped");for(let e=0;e<mediaRecorderArray.length;e++)if(e==mediaRecorderArray.length-1){var o=encodeURIComponent((myNumber[0]+myNumber[2]).replace("#","")+"_audio_recording_"+(new Date).getTime()+".webm");console.log("mp3name = "+o),gotFirstFileDataFromMediarecorders=1,t.append("fname",o),t.append("streamsNum",streamsNum),setTimeout(function(){$.ajax({url:"https://"+mainDomain+"/fleo.at-php/uploadPush2Talk.php",data:t,type:"POST",contentType:!1,processData:!1}).done(function(e){$("#audioStationUrl").val(e),$("#audioStationUrl").trigger("input")}),$("#push2TalkUser").toggle(),$("#push2TalkUserUpload").toggle(),$("#push2TalkRec").toggle(),$("#push2TalkRecUpload").toggle(),$("#push2TalkReplayRec").show(),0==replayAndRecordBuilt&&($("#audioRecOthers").append('<div id="audioReplayRecReplay" style="width:500px;height:60px;position:relative;display:inline-block;"><div id="audioReplayRecMan-Replay" class="audioReplayRecTrackName" style="position:relative;width:170px;height:30px;display:inline-block;">Replay & Record</div><div id="audioRecReplayOnOff" data-onoff="on" style="position:absolute;width:30px;height:30px;background:red;display:inline-block;z-index.100;right:300px;top:0;text-align:center;line-height:30px;cursor:pointer;">G</div><div id="audioRecReplayVolBypass" data-onoff="off" style="position:absolute;width:30px;height:30px;background:gray;display:inline-block;z-index.100;right:300px;top:30px;text-align:center;line-height:30px;cursor:pointer;">V</div><div class="volumeClickReplayRecReplay" style="position:absolute;z-index:10;bottom:0;left:200px;height:60px;width:300px;cursor:pointer;"></div><div style="width:300px;height:50px;position:absolute;bottom:10px;left:200px;z-index:2;" class="volumeMeterReplayRecReplay"><div class="volumen-wrapper-replayRecReplay"><div class="led-callerAudio-replayRecReplay"></div><div class="led-callerAudio-replayRecReplay"></div><div class="led-callerAudio-replayRecReplay"></div><div class="led-callerAudio-replayRecReplay"></div><div class="led-callerAudio-replayRecReplay"></div><div class="led-callerAudio-replayRecReplay"></div><div class="led-callerAudio-replayRecReplay"></div><div class="led-callerAudio-replayRecReplay"></div><div class="led-callerAudio-replayRecReplay"></div><div class="led-callerAudio-replayRecReplay"></div></div></div><div style="width:300px;height:50px;position:absolute;bottom:10px;left:200px;z-index:1;" class="volumeMeterGrayReplayRecReplay"><div class="volumen-wrapper-replayRecReplay"><div class="ledGray-callerAudio-replayRecReplay"></div><div class="ledGray-callerAudio-replayRecReplay"></div><div class="ledGray-callerAudio-replayRecReplay"></div><div class="ledGray-callerAudio-replayRecReplay"></div><div class="ledGray-callerAudio-replayRecReplay"></div><div class="ledGray-callerAudio-replayRecReplay"></div><div class="ledGray-callerAudio-replayRecReplay"></div><div class="ledGray-callerAudio-replayRecReplay"></div><div class="ledGray-callerAudio-replayRecReplay"></div><div class="ledGray-callerAudio-replayRecReplay"></div></div></div><div style="background:#ff0000;width:150px;height:10px;position:absolute;bottom:0;left:200px;z-index:1;" class="volumeReplayRecReplay"></div><div style="background:blue;width:300px;height:2px;position:absolute;bottom:0;left:200px;z-index:1;" class="volumeSoundReplayRecReplay"></div></div>'),audioCtxVolume["callerAudio-Replay"]||(audioCtxVolume["callerAudio-Replay"]=new AudioContext),gainNode["callerAudio-Replay"]=audioCtxVolume["callerAudio-Replay"].createGain(),volumeBypassIsOnOff["callerAudio-Replay"]="off",volumeOld["callerAudio-Replay"]=1,$(document).on("click","#audioRecReplayOnOff",function(e){"on"==$("#audioRecReplayOnOff").attr("data-onoff")?(gainOld["callerAudio-Replay"]=gainNode["callerAudio-Replay"].gain.value,gainNode["callerAudio-Replay"].gain.setValueAtTime(0,audioCtxVolume["callerAudio-Replay"].currentTime+.005),$(".volumeReplayRecReplay").css("width","0px"),"on"==volumeBypassIsOnOff["callerAudio-Replay"]&&(volumeOld["callerAudio-Replay"]=0,myAudioReplay.volume=0,$(".volumeSoundReplayRecReplay").css("width","0px")),$("#audioRecReplayOnOff").attr("data-onoff","off"),$("#audioRecReplayOnOff").css("background-color","gray")):(gainNode["callerAudio-Replay"].gain.setValueAtTime(parseFloat(gainOld["callerAudio-Replay"]),audioCtxVolume["callerAudio-Replay"].currentTime+.005),$(".volumeReplayRecReplay").css("width",150*parseFloat(gainOld["callerAudio-Replay"])+"px"),"on"==volumeBypassIsOnOff["callerAudio-Replay"]&&$(".volumeSoundReplayRecReplay").css("width",300*volumeOld["callerAudio-Replay"]+"px"),$("#audioRecReplayOnOff").attr("data-onoff","on"),$("#audioRecReplayOnOff").css("background-color","red"))}),$(document).on("click","#audioRecReplayVolBypass",function(e){"off"==$("#audioRecReplayVolBypass").attr("data-onoff")?(volumeOld["callerAudio-Replay"]=myAudioReplay.volume,myAudioReplay.volume=0,volumeBypassIsOnOff["callerAudio-Replay"]="on",$("#audioRecReplayVolBypass").attr("data-onoff","on"),$("#audioRecReplayVolBypass").css("background-color","blue")):(myAudioReplay.volume=volumeOld["callerAudio-Replay"],volumeBypassIsOnOff["callerAudio-Replay"]="off",$("#audioRecReplayVolBypass").attr("data-onoff","off"),$("#audioRecReplayVolBypass").css("background-color","gray"))}),$(document).on("click",".volumeClickReplayRecReplay",function(e){let t=$(".volumeClickReplayRecReplay").offset(),o=2*(e.pageX-t.left);gainNode["callerAudio-Replay"].gain.setValueAtTime(parseFloat(o/300),audioCtxVolume["callerAudio-Replay"].currentTime+.005),"on"==volumeBypassIsOnOff["callerAudio-Replay"]&&(myAudioReplay.volume=1/600*o,$(".volumeSoundReplayRecReplay").css("width",.5*o+"px")),$(".volumeReplayRecReplay").css("width",.5*o+"px"),$("#audioRecReplayOnOff").attr("data-onoff","on"),$("#audioRecReplayOnOff").css("background-color","red")}),$(document).on("click","#push2TalkReplayRec",function(e){1==doReplayAndRecord?($("#push2TalkReplayRec").css("text-decoration","line-through"),doReplayAndRecord=0):($("#push2TalkReplayRec").css("text-decoration","none"),doReplayAndRecord=1)}),replayAndRecordBuilt=1),console.log("Previous recording processed browserside."),t=""},200)}}},200),e.onclick=function(){if(recordingIntervalStartLoop=1,1==replayAndRecordBuilt)if(1==doReplayAndRecord)myAudioReplay=document.getElementById("callerAudio-Own"),0==audioSystemJustLoaded&&0==recordingReset&&myAudioReplay.play().then(()=>{async function e(e){function t(e){ledsVol["callerAudio-Replay"]=[...$(".led-callerAudio-replayRecReplay")];let t=ledsVol["callerAudio-Replay"].slice(0,Math.round(e));for(var o=0;o<ledsVol["callerAudio-Replay"].length;o++)ledsVol["callerAudio-Replay"][o].style.background="#a7a7a700";for(o=0;o<t.length;o++)t[o].style.background=`${a[o]}`}function o(e){ledsGrayVol["callerAudio-Replay"]=[...$(".ledGray-callerAudio-replayRecReplay")];let t=ledsGrayVol["callerAudio-Replay"].slice(0,Math.round(e));for(var o=0;o<ledsGrayVol["callerAudio-Replay"].length;o++)ledsGrayVol["callerAudio-Replay"][o].style.background="#a7a7a73d";for(o=0;o<t.length;o++)t[o].style.background=`${n[o]}`}var a=["#064dac","#064dac","#064dac","#06ac5b","#15ac06","#4bac06","#80ac06","#acaa06","#ac8b06","#ac5506"],n=["#064dac3f","#064dac3f","#064dac3f","#06ac5b3f","#15ac063f","#4bac063f","#80ac063f","#acaa063f","#ac8b063f","#ac55063f"];await audioCtxVolume["callerAudio-Replay"].audioWorklet.addModule("/fleo.at-js/fleo.at_volumeMeterProcessor.js"),fleoNodeSource["callerAudio-Replay"]=audioCtxVolume["callerAudio-Replay"].createMediaStreamSource(e),volumeMeterNode["callerAudio-Replay"]=new AudioWorkletNode(audioCtxVolume["callerAudio-Replay"],"vumeter"),volumeMeterGrayNode["callerAudio-Replay"]=new AudioWorkletNode(audioCtxVolume["callerAudio-Replay"],"vumeter"),volumeMeterNode["callerAudio-Replay"].port.onmessage=(e=>{let o=0,a=1;e.data.volume&&(o=e.data.volume,t(100*o/a))}),volumeMeterGrayNode["callerAudio-Replay"].port.onmessage=(e=>{let t=0,a=1;e.data.volume&&(t=e.data.volume,o(100*t/a))}),fleoDestination["callerAudio-Replay"]=audioCtxVolume["callerAudio-Replay"].createMediaStreamDestination(),fleoNodeSource["callerAudio-Replay"].connect(volumeMeterGrayNode["callerAudio-Replay"]),fleoNodeSource["callerAudio-Replay"].connect(gainNode["callerAudio-Replay"]),fleoMediaStream["callerAudio-Replay"]=gainNode["callerAudio-Replay"].connect(fleoDestination["callerAudio-Replay"]),gainNode["callerAudio-Replay"].connect(volumeMeterNode["callerAudio-Replay"]),navigator.userAgent.indexOf("Firefox")>0?(mediaRecorder["callerAudio-Replay"]=new MediaRecorder(fleoMediaStream["callerAudio-Replay"].stream),document.getElementById("callerAudio-ReplayPlaySound").srcObject=e,document.getElementById("callerAudio-ReplayPlaySound").play()):mediaRecorder["callerAudio-Replay"]=new MediaRecorder(fleoMediaStream["callerAudio-Replay"].stream),mediaRecorderArray=[],Object.keys(mediaRecorder).forEach(e=>{mediaRecorderArray.push({name:e,content:mediaRecorder[e]})});for(let e=0;e<mediaRecorderArray.length;e++)mediaRecorderArray[e].content.ondataavailable=function(t){chunks[e].push(t.data)};for(let e=0;e<mediaRecorderArray.length;e++)chunks[e]=[],mediaRecorderArray[e].content.start(5e3)}myAudioReplay.captureStream=myAudioReplay.captureStream||myAudioReplay.mozCaptureStream;let t=myAudioReplay.captureStream();e(t)});else{mediaRecorderArray=[],Object.keys(mediaRecorder).forEach(e=>{mediaRecorderArray.push({name:e,content:mediaRecorder[e]})});for(let e=0;e<mediaRecorderArray.length;e++)mediaRecorderArray[e].content.ondataavailable=function(t){chunks[e].push(t.data)};for(let e=0;e<mediaRecorderArray.length;e++)chunks[e]=[],"callerAudio-Replay"==mediaRecorderArray[e].name?(delete mediaRecorder["callerAudio-Replay"],delete mediaRecorderArray[e]):"inactive"==mediaRecorderArray[e].content.state&&mediaRecorderArray[e].content.start(5e3)}else{mediaRecorderArray=[],Object.keys(mediaRecorder).forEach(e=>{mediaRecorderArray.push({name:e,content:mediaRecorder[e]})});for(let e=0;e<mediaRecorderArray.length;e++)mediaRecorderArray[e].content.ondataavailable=function(t){chunks[e].push(t.data)};for(let e=0;e<mediaRecorderArray.length;e++)chunks[e]=[],"callerAudio-Replay"==mediaRecorderArray[e].name?(delete mediaRecorder["callerAudio-Replay"],delete mediaRecorderArray[e]):"inactive"==mediaRecorderArray[e].content.state&&mediaRecorderArray[e].content.start(5e3)}$("#push2TalkUser").toggle(),$("#push2TalkUserUpload").toggle(),$("#push2TalkRec").toggle(),$("#push2TalkRecUpload").toggle(),$(".maennikenAudioPlay-rec").hide(),$(".maennikenAudioStop-rec").hide(),$(".maennikenAudioWhite-rec").show()},t.onclick=function(){recordingReset=0,mediaRecorderArray=[],Object.keys(mediaRecorder).forEach(e=>{mediaRecorderArray.push({name:e,content:mediaRecorder[e]})});for(let e=0;e<mediaRecorderArray.length;e++)"recording"!=mediaRecorderArray[e].content.state&&"paused"!=mediaRecorderArray[e].content.state||mediaRecorderArray[e].content.stop()},mediaRecorderArray=[],Object.keys(mediaRecorder).forEach(e=>{mediaRecorderArray.push({name:e,content:mediaRecorder[e]})});for(let e=0;e<mediaRecorderArray.length;e++)mediaRecorderArray[e].content.ondataavailable=function(t){chunks[e].push(t.data)}});myNumber=[];myNumber[0]="0000",myNumber[1]="no name",myNumber[2]="#ffffff";var myRoom,relD,relW,locateHorizontal,locateVertical,bottomLocate,leftLocate,startRoom="home";$.cookie("spacenumber")||urlForCoordsGet.has("heronumber")?(myNumber[3]="familiar",myNumber[0]=urlForCoordsGet.get("heronumber"),myNumber[1]=urlForCoordsGet.get("heroname"),myNumber[2]=urlForCoordsGet.get("herocolor"),startRoom="/"!==location.pathname.replace("/r/","")&&location.pathname.replace("/r/","")?location.pathname.replace("/r/",""):"home",myRoom=startRoom,$("body").append('<video autoplay muted loop id="bgbgsterne" poster="/fleo.at-medien/layout/sternenhimmel.jpg"><source src="/fleo.at-medien/repertoire/space_front_320_PIxEL.mp4" type="video/mp4" id="bgbgsterneVideo"></video>'),$("#h1title").html("This is "+mainDomain+", room: "+myRoom),$("title").html("This is "+mainDomain+", room: "+myRoom+" // "+mainDomain+" open-world hubs with content-trees"),$.cookie("spacenumber")&&(myNumber[0]=$.cookie("spacenumber")),$.cookie("spacename")&&(myNumber[1]=$.cookie("spacename")),$.cookie("spacecolor")&&(myNumber[2]=$.cookie("spacecolor")),$.ajax({beforeSend:function(){$("#flash").addClass("f")},type:"POST",url:"/fleo.at-php/present.php",dataType:"html",crossDomain:!0,xhrFields:{withCredentials:!0},data:{doing:7,number:(myNumber[0]+myNumber[2]).replace("#",""),name:myNumber[1],cD:sMMssM,cH:0,cW:historyCoords,color:myNumber[2],room:myRoom,will:"f"}}).done(function(e){Cookies.set("spacenumber",myNumber[0],{secure:!0,sameSite:"none",expires:730}),Cookies.set("spacename",myNumber[1],{secure:!0,sameSite:"none",expires:730}),Cookies.set("spacecolor",myNumber[2],{secure:!0,sameSite:"none",expires:730}),window.history.pushState("","","/r/"+startRoom),$("#nameNumber").html('<span id="nameNumberText" onclick="changeName();" style="background:#fff;color:'+myNumber[2]+'">'+myNumber[1]+"</span>"),spacebarText=0,myNumber[3]="known",$("#flash").removeClass("f"),connectWorld(),socketDataConnect(),$.post("/fleo.at-php/fleo.at_videoSizer.php",{doing:1,fleoNum:(myNumber[0]+myNumber[2]).replace("#",""),videoSize:1})}),$("#hideExplanationDiv").click()):"0000"==myNumber[0]&&(myNumber[0]=1e3+Math.floor(4999*Math.random()),myNumber[0]=("0000"+myNumber[0]).slice(-4),myNumber[2]="#"+(16777215*Math.random()<<0).toString(16).padStart(6,"0"),myNumber[3]="new",startRoom="/"!==location.pathname.replace("/r/","")&&location.pathname.replace("/r/","")?location.pathname.replace("/r/",""):"home",myRoom=startRoom,$("#h1title").html("This is "+mainDomain+", room: "+myRoom),$("title").html(mainDomain+": "+myRoom+" // open-world with content-trees"),$.ajax({beforeSend:function(){$("#flash").addClass("f")},type:"POST",url:"/fleo.at-php/present.php",dataType:"html",crossDomain:!0,xhrFields:{withCredentials:!0},data:{doing:5,number:(myNumber[0]+myNumber[2]).replace("#",""),name:myNumber[1],cD:sMMssM,cH:0,cW:historyCoords,color:myNumber[2],room:myRoom,will:"f"}}).done(function(e){Cookies.set("spacenumber",myNumber[0],{secure:!0,sameSite:"none",expires:730}),Cookies.set("spacename",myNumber[1],{secure:!0,sameSite:"none",expires:730}),Cookies.set("spacecolor",myNumber[2],{secure:!0,sameSite:"none",expires:730}),window.history.pushState("","","/r/"+startRoom),$("#nameNumber").html('<span id="nameNumberText" onclick="changeName();" style="background:#fff;color:'+myNumber[2]+'">'+myNumber[1]+"</span>"),spacebarText=0,$("#flash").removeClass("f"),connectWorld(),socketDataConnect(),$.post("/fleo.at-php/fleo.at_videoSizer.php",{doing:1,fleoNum:(myNumber[0]+myNumber[2]).replace("#",""),videoSize:1})}));var changeNameVisible=0;$("#changeNameForm").submit(function(e){e.preventDefault(),myNumber[1]=$("#chnNam").val(),$.ajax({beforeSend:function(){$("#flash").addClass("f")},type:"POST",url:"/fleo.at-php/present.php",dataType:"html",crossDomain:!0,xhrFields:{withCredentials:!0},data:{doing:6,number:(myNumber[0]+myNumber[2]).replace("#",""),name:myNumber[1],cD:sMMssM,cH:0,cW:historyCoords,color:myNumber[2],will:will}}).done(function(e){Cookies.set("spacename",myNumber[1],{secure:!0,sameSite:"none",expires:730}),heroname=myNumber[1],$("#nameNumber").html('<span id="nameNumberText" onclick="changeName();" style="background:#fff;color:'+myNumber[2]+'">'+myNumber[1]+"</span>"),spacebarText=0,$("#changeNameForm").hide(),changeNameVisible=0,$("#flash").removeClass("f")})});let personDataNameOld=[];var crucDistance,fleoPersonsDistanceOld=0,fleoPersonsTotal=[],fleoPersonsDistance={},persVidSize=[],persConn=[],distanceSentOnce=[],spotterMapLatitude=[],spotterMapLongitude=[],spotterMapLocationX=[],spotterMapLocationY=[];$("#wrapper").prepend('<div id="maennikenWall" style="position: absolute; bottom: 616px; left: 0; width: 100%; height: 1200px; z-index:50; overflow:visible; display: flex; flex-flow: row nowrap; align-items: flex-end;"></div>');var monoOrStereo=1;$("body").append('<div id="monoOrStereo" style="z-index:100000;padding:4px;" title="Sound question"><p>Info: You need to be in a call now with any other persons you want to record.</p></div>'),$("body").append('<div id="thisBoxDialog"></div>'),$("#thisBoxDialog").dialog({title:"Make Audio Station",autoOpen:!1,minWidth:300,modal:!0,beforeClose:function(e,t){$("#push2TalkUserWants").fadeIn("slow"),spacebarText=0,$("[class^='volumeMetercallerAudio-']").each(function(){let e=$(this).attr("class").replace("volumeMetercallerAudio-","");$(this).html($(".volumeMeterReccallerAudio-"+e).children().detach())}),$("[class^='volumeMeterGraycallerAudio-']").each(function(){let e=$(this).attr("class").replace("volumeMeterGraycallerAudio-","");$(this).html($(".volumeMeterGrayReccallerAudio-"+e).children().detach())}),replayAndRecordBuilt=0;for(let e=0;e<mediaRecorderArray.length;e++)"callerAudio-Replay"==mediaRecorderArray[e].name&&(delete mediaRecorder["callerAudio-Replay"],delete mediaRecorderArray[e])},buttons:{Cancel:function(){$(this).dialog("close")},Save:function(){$("#savebtnAudioStation").click(),$(this).dialog("close")}}}),$("#monoOrStereo").dialog({autoOpen:!1,show:{effect:"bounce",duration:1e3},hide:{effect:"puff",duration:1e3},resizable:!1,height:"auto",width:400,modal:!0,buttons:{Cancel:function(){$(this).dialog("close")},"Ok, start":function(){"/"!==location.pathname.replace("/r/","")&&location.pathname.replace("/r/","")&&(roomWhereEdit=location.pathname.replace("/r/","")),spacebarText=1,$(this).dialog("close"),$("#thisBoxDialog").load("https://"+mainDomain+"/fleo.at-php/fleo.at_audioStationAdd.php?client="+(myNumber[0]+myNumber[2]).replace("#","")+"&buildcoords="+(historyCoords-500)+"&builddoords="+(sMMssM-2)+"&room="+roomWhereEdit),$("#thisBoxDialog").dialog("open")}}}),$("#push2TalkUserWants").click(function(){if(0==audioConferenceConnected){$("#walkAroundWithVideo").click();var e=setInterval(function(){1==audioConferenceConnected&&($("#push2TalkUserWants").hide(),clearInterval(e),"/"!==location.pathname.replace("/r/","")&&(roomWhereEdit=location.pathname.replace("/r/","")),$("#thisBoxDialog").load("https://"+mainDomain+"/fleo.at-php/fleo.at_audioStationAdd.php?client="+(myNumber[0]+myNumber[2]).replace("#","")+"&buildcoords="+(historyCoords-500)+"&builddoords="+(sMMssM-2)+"&room="+roomWhereEdit),$("#thisBoxDialog").dialog("open"))},500)}else"/"!==location.pathname.replace("/r/","")&&(roomWhereEdit=location.pathname.replace("/r/","")),$("#thisBoxDialog").load("https://"+mainDomain+"/fleo.at-php/fleo.at_audioStationAdd.php?client="+(myNumber[0]+myNumber[2]).replace("#","")+"&buildcoords="+(historyCoords-500)+"&builddoords="+(sMMssM-2)+"&room="+roomWhereEdit),$("#thisBoxDialog").dialog("open")});var allDevices,videoSizeWidthSelect,videoSizeHeightSelect,videoSizeHeight,lettersOrVideoSend=0,userStartedOwnVideo=0,bilderSrcOthers=[],videoSizeLeft=0,videoSizeTop=0,videoSizeWidth=320,oldPositionVideoLeft=0,oldPositionVideoTop=0,videoOutputSizer=1,videoOutputSizer2=1,faceOn=0;$("#walkVideoChooser").css({bottom:videoSizeHeight/2}),$("#walkVideoSizer").css({bottom:videoSizeHeight/2});var uploadStuffBuilt=0,doNotUpload=1;$("body").append('<audio id="lettercoinSound" src="/fleo.at-medien/audioStations/2707b4b97d_audio_recording_1663170196861.mp3"></audio>'),$("body").append('<audio id="lettercoinOwnSound" src="/fleo.at-medien/layout/audio/lettercoinsOwn.mp3"></audio>');var lettercoinOwnSound=document.getElementById("lettercoinOwnSound"),lettercoinSound=document.getElementById("lettercoinSound");if(lettercoinSound.volume=.1,!allWordsForLettercoin)var allWordsForLettercoin;if(!lettercoinHolder)var lettercoinHolder;if(!lettercoinCookieLifetime)var lettercoinCookieLifetime=new Date(Date.now()+31536e6).toUTCString();$("#nameNumberText").click(function(){$(".ownLettercoin").remove(),checkCookiesForLettercoins()}),checkCookiesForLettercoins(),$(document).on("click",".ownLettercoin",function(){$(this).toggleClass("lettercoinSelected")});var closeKeys,lettercoinIni=[],elem=document.documentElement,isFullscreen=0;$(".fullscreenToggle").click(function(){0==isFullscreen?(openFullscreen(),$("#fullscreenExitToggle").show(),$("#fullscreenToggle").hide(),isFullscreen=1):(closeFullscreen(),$("#fullscreenExitToggle").hide(),$("#fullscreenToggle").show(),isFullscreen=0)}),$("#wrapper").arrive("[data-attr='209']",function(){doLettercoinPayments(209,"audStat1010789611")});var onScreenObserver=[];let observerOptions={root:document.querySelector("#wrapper"),rootMargin:"0px",threshold:0};$("#wrapper").arrive(".person",function(){let e=$(this).find(".tree").attr("id").replace("personTree-","");onScreenObserver[e]=new IntersectionObserver(function(){setMedalsCorrect(e)},observerOptions),onScreenObserver[e].observe($("#personTree-"+e)[0])});const canWakeLock=()=>"wakeLock"in navigator;let wakelock;var personDataComplete,personData;lockWakeState(),ws.onopen=function(){console.log("Socketdata connected"),wsOk=1;var e=setInterval(function(){if(1!=ws.readyState)return wsOk=0,void clearInterval(e);ws.send(JSON.stringify({type:"ping"}))},5e4);ws.send(JSON.stringify({type:"present",fleoNum:(myNumber[0]+myNumber[2]).replace("#","")})),ws.onmessage=function(e){if(loadVideoSystem(),personDataComplete=JSON.parse(e.data),personData=personDataComplete.data,"person_moves"==personDataComplete.type){if(personData.number!==(myNumber[0]+myNumber[2]).replace("#","")&&(2==personData.online&&$("#personCode-"+personData.number).length&&($("#personCode-"+personData.number).remove(),$(".videoWallMan-"+personData.number).length&&$(".videoWallMan-"+personData.number).remove(),$("#maennikenSpotter-"+personData.number).remove(),fleoPersonsTotal.filter(e=>e!==personData.number),delete fleoPersonsDistance[personData.number],ws.send(JSON.stringify({type:"distance",whoC:(myNumber[0]+myNumber[2]).replace("#",""),othDistance:JSON.stringify(fleoPersonsDistance)}))),1==personData.online)){let e="personCode-"+personData.number,t=personData.number;if(persVidSize[e]=320,-1===fleoPersonsTotal.indexOf(t)&&(fleoPersonsTotal.push(t),fleoPersonsDistance[personData.number]=0),!$("#maennikenText-"+t).length){if(persConn[personData.number]=0,distanceSentOnce[personData.number]=0,kindOfGuyOld[personData.number]=0,kindfOfGuyFunctionBuilt[personData.number]=0,personDataNameOld[personData.number]=0,"f"==am){let t=-1*(parseInt(personData.uD)-sMMssM),o=parseInt(personData.uW)-historyCoords
;$("#wrapper").append('<div id="'+e+'" class="move person scale'+t+'" distance="'+t+'" room="'+personData.room+'"><div class="tree" style="pointer-events:none;width:180px;height:373px;bottom:0px;left:'+o+'px;" id="personTree-'+personData.number+'"><div id="maennikenRutsch-'+personData.number+'" style="width:180px;height:303px;position:absolute;pointer-events:auto;"><div id="maennikenConferenceOffline-'+personData.number+'" class="maennikenConferenceOffline-'+personData.number+'" style="width:84px;height:84px;border-radius:42px;background:gray;position:absolute;top:-84px;left:48px;pointer-events:auto;cursor:pointer;color:white;text-align:center;font-size:54px;">&#9742;</div><div id="maennikenConferenceCall-'+personData.number+'" class="maennikenConferenceCall-'+personData.number+'" style="width:84px;height:84px;border-radius:42px;background:green;position:absolute;top:-84px;left:48px;pointer-events:auto;cursor:pointer;display:none;color:white;text-align:center;font-size:54px;">&#9742;</div><div id="maennikenConferenceHangup-'+personData.number+'" class="maennikenConferenceHangup-'+personData.number+'" style="width:84px;height:84px;border-radius:42px;background:red;position:absolute;top:-84px;left:48px;pointer-events:auto;cursor:pointer;display:none;color:white;text-align:center;font-size:54px;">&#9742;</div><div id="maennikenText-'+personData.number+'" style="font-weight:bold;pointer-events:auto;cursor:pointer;" class="maennikenTextWorld">'+personData.name+'</div><img src="/fleo.at-medien/persons/maenniken_III.webp" style="width:180px;height:373px;pointer-events:none;" id="maennikenImg-'+personData.number+'" alt="Person" /><div id="maennikenLegs-'+personData.number+'" style="background:gray;width:80px;left:50px;position:absolute;bottom:0;height:0;"><div style="background:black;width:4px;position:relative;left:38px;bottom:0;height:100%;"></div></div></div><div class="videoMaenniken" id="videoMaenniken-'+personData.number+'"   style="pointer-events:auto;position:absolute;bottom:0px;left:0;width:auto;height:auto;"><img style="width:auto;min-width:320px;height:auto;position:absolute;bottom:0;left:180px;" class="heyImVisitorVideoImg-'+personData.number+'" id="heyImVisitorVideoImg-'+personData.number+'" src="/fleo.at-medien/userImages/1673454489grafikpn292287266111.png.webp" /></div></div>'),$("#"+e).animate({left:turn+"px"},0)}if("b"==am){let t=1*(parseInt(personData.uD)-sMMssM)+2*went,o=parseInt(personData.uW)+historyCoords;$("#wrapper").append('<div id="'+e+'" class="move person scale'+t+'" distance="'+t+'" room="'+personData.room+'"><div class="tree" style="pointer-events:none;width:180px;height:373px;bottom:0px;left:'+o+"px;perspective:9000px;transform:rotateY("+personData.turn+'180deg);" id="personTree-'+personData.number+'"><div id="maennikenRutsch-'+personData.number+'" style="width:180px;height:303px;position:absolute;pointer-events:auto;"><div id="maennikenConferenceOffline-'+personData.number+'" class="maennikenConferenceOffline-'+personData.number+'" style="width:84px;height:84px;border-radius:42px;background:gray;position:absolute;top:-84px;left:48px;pointer-events:auto;cursor:pointer;color:white;text-align:center;font-size:54px;">&#9742;</div><div id="maennikenConferenceCall-'+personData.number+'" class="maennikenConferenceCall-'+personData.number+'" style="width:84px;height:84px;border-radius:42px;background:green;position:absolute;top:-84px;left:48px;pointer-events:auto;cursor:pointer;display:none;color:white;text-align:center;font-size:54px;">&#9742;</div><div id="maennikenConferenceHangup-'+personData.number+'" class="maennikenConferenceHangup-'+personData.number+'" style="width:84px;height:84px;border-radius:42px;background:red;position:absolute;top:-84px;left:48px;pointer-events:auto;cursor:pointer;display:none;color:white;text-align:center;font-size:54px;">&#9742;</div><div id="maennikenText-'+personData.number+'" style="font-weight:bold;pointer-events:auto;cursor:pointer;" class="maennikenTextWorld">'+personData.name+'</div><img src="/fleo.at-medien/persons/maenniken_III.webp" style="width:180px;height:373px;pointer-events:none;" id="maennikenImg-'+personData.number+'" alt="Person" /><div id="maennikenLegs-'+personData.number+'" style="background:gray;width:80px;left:50px;position:absolute;bottom:0;height:0;"><div style="background:black;width:4px;position:relative;left:38px;bottom:0;height:100%;"></div></div></div><div class="videoMaenniken" id="videoMaenniken-'+personData.number+'"   style="pointer-events:auto;position:absolute;bottom:0px;left:0;width:auto;height:auto;"><img style="width:auto;min-width:320px;height:auto;position:absolute;bottom:0;left:180px;" class="heyImVisitorVideoImg-'+personData.number+'" id="heyImVisitorVideoImg-'+personData.number+'" src="/fleo.at-medien/userImages/1673454489grafikpn292287266111.png.webp" /></div></div>'),$("#"+e).animate({left:turn+"px"},0)}$(".videoWallMan-"+personData.number).length<1&&$("#maennikenWall").append('<div class="videoWallMan videoWallMan-'+personData.number+' videoWallManSmall" id="videoWallMan-'+personData.number+'" style="max-width:240px;float:left;height:auto;pointer-events:auto;display:inline-block;" room="'+personData.room+'"><div class="maennikenConferenceOffline-'+personData.number+'" style="width:100%;height:84px;border-radius:0px;background:gray;color:white;position:relative;pointer-events:auto;cursor:pointer;z-index:50000;text-align:center;font-size:54px;">&#9742;</div><div class="maennikenConferenceCall-'+personData.number+'" style="width:100%;height:84px;border-radius:0px;background:green;color:white;position:relative;pointer-events:auto;cursor:pointer;display:none;z-index:50000;text-align:center;font-size:54px;">&#9742;</div><div class="maennikenConferenceVolume-'+personData.number+'" style="width:100%;height:84px;border-radius:0px;position:relative;pointer-events:auto;cursor:pointer;display:none;z-index:50000;"></div><div class="maennikenConferenceHangup-'+personData.number+' endCallHangUp" style="width:100%;height:84px;border-radius:0px;background:red;color:white;position:relative;pointer-events:auto;cursor:pointer;display:none;z-index:50000;text-align:center;font-size:54px;">&#9742;</div><div id="maennikenTextWall-'+personData.number+'" class="maennikenTextWall maennikenTextWall-'+personData.number+'" style="font-weight:bold;cursor:pointer;background:white;width:100%;">'+personData.name+'</div><div class="videoMaenniken" style="position:relative;"><div class="heyImVisitor-'+personData.number+' videoScaleMaenniken" style="position:relative;pointer-events:auto;cursor:pointer;"><img style="width:100%;height:auto;pointer-events:auto;cursor:pointer;" class="heyImVisitorVideoImg-'+personData.number+'" id="heyImVisitorVideoImgWall-'+personData.number+'" src="/fleo.at-medien/userImages/1673454489grafikpn292287266111.png.webp" alt="'+personData.number+'-wallVideo"></div></div>'),$(document).on("click","#maennikenText-"+personData.number,function(){if($(".videoWallMan-"+personData.number).is("[data-audioses]")&&1==audioConferenceConnected)openChat($(".videoWallMan-"+personData.number).attr("data-audioses"));else if($(".videoWallMan-"+personData.number).is("[data-audioses]"))alert("Person not connected to A/V");else{$("#walkAroundWithVideo").click(),$.post("/fleo.at-php/fleo.at_setOfflineOnline.php",{doing:1,fleoNumOwn:(myNumber[0]+myNumber[2]).replace("#",""),fleoNumDistant:personData.number});let e=setInterval(function(){$(".videoWallMan-"+personData.number).is("[data-audioses]")&&1==audioConferenceConnected&&(clearInterval(e),openChat($(".videoWallMan-"+personData.number).attr("data-audioses")))},2e3)}fleoNumDistant=personData.number}),$(document).on("click","#maennikenTextWall-"+personData.number,function(){if($(".videoWallMan-"+personData.number).is("[data-audioses]")&&1==audioConferenceConnected)openChat($(".videoWallMan-"+personData.number).attr("data-audioses"));else if($(".videoWallMan-"+personData.number).is("[data-audioses]"))alert("Person not connected to A/V");else{$("#walkAroundWithVideo").click(),$.post("/fleo.at-php/fleo.at_setOfflineOnline.php",{doing:1,fleoNumOwn:(myNumber[0]+myNumber[2]).replace("#",""),fleoNumDistant:personData.number});let e=setInterval(function(){$(".videoWallMan-"+personData.number).is("[data-audioses]")&&1==audioConferenceConnected&&(clearInterval(e),openChat($(".videoWallMan-"+personData.number).attr("data-audioses")))},2e3)}fleoNumDistant=personData.number}),$(document).on("click",".maennikenConferenceOffline-"+personData.number,function(){1!==audioConferenceConnected&&$("#walkAroundWithVideo").click(),$.post("/fleo.at-php/fleo.at_setOfflineOnline.php",{doing:1,fleoNumOwn:(myNumber[0]+myNumber[2]).replace("#",""),fleoNumDistant:personData.number});let e=setInterval(function(){$(".videoWallMan-"+personData.number).is("[data-audioses]")&&1==audioConferenceConnected&&(clearInterval(e),callRoom(personData.number))},2e3)}),$(document).on("click",".maennikenConferenceCall-"+personData.number,function(){if($(".videoWallMan-"+personData.number).is("[data-audioses]"))if(1==audioConferenceConnected)callRoom(personData.number);else{$("#walkAroundWithVideo").click();let e=setInterval(function(){1==audioConferenceConnected&&(clearInterval(e),callRoom(personData.number))},2e3)}else alert("Person not connected to A/V")}),$(document).on("click",".maennikenConferenceHangup-"+personData.number,function(){easyrtc.hangup($(".videoWallMan-"+personData.number).attr("data-audioses"))}),$("#mapForLocator").append('<div id="maennikenSpotter-'+personData.number+'" class="maennikenSpotter" style="pointer-events:auto;background:'+personData.color+';" title="'+personData.name+'"></div>'),$(document).on("click",".heyImVisitor-"+personData.number,function(){$("#videoWallMan-"+personData.number).toggleClass("videoWallManSmall")})}let o=parseInt($("#"+e).attr("distance"));if($("#maennikenLegs-"+personData.number).length&&$("#maennikenLegs-"+personData.number).animate({height:-1*personData.uH*.4,bottom:.4*personData.uH-83},personData.duration),"f"==am){let t=-1*(parseInt(personData.uD)-sMMssM+200),a=parseInt(-1*personData.uW+historyCoords+847)+"px";$("#"+e).find(".tree").animate({left:a,bottom:-.4*personData.uH},personData.duration,"linear"),$("#"+e).css("transition","bottom "+personData.duration/1e3+"s linear 0s, transform "+personData.duration/1e3+"s linear 0s, margin-bottom "+personData.duration/1e3+"s linear 0s"),$("#"+e).toggleClass("scale"+o).toggleClass("scale"+t),$("#"+e).attr("distance",t),$("#"+e).css("transition","bottom 0.0s linear 0s, transform 0.0s linear 0s, margin-bottom 0.0s linear 0s"),crucDistance=Math.abs(parseInt(a)+800)>t?Math.abs(parseInt(a)+800):t,Math.abs(parseInt(a)+800)>1e4||Math.abs(t)>9e3?fleoPersonsDistance[personData.number]=0:(crucDistance<2e3&&(fleoPersonsDistance[personData.number]=4),crucDistance>1999&&crucDistance<3500&&(fleoPersonsDistance[personData.number]=3),crucDistance>3499&&crucDistance<6e3&&(fleoPersonsDistance[personData.number]=2),crucDistance>5999&&crucDistance<9e3&&(fleoPersonsDistance[personData.number]=1)),fleoPersonsDistance[personData.number]===fleoPersonsDistanceOld&&0!=distanceSentOnce[personData.number]||(ws.send(JSON.stringify({type:"distance",whoC:(myNumber[0]+myNumber[2]).replace("#",""),othDistance:JSON.stringify(fleoPersonsDistance)})),fleoPersonsDistanceOld=fleoPersonsDistance[personData.number],distanceSentOnce[personData.number]=1),locateHorizontal=150+(-1*parseInt(personData.uW)+historyCoords)/300,locateVertical=150+t/300,bottomLocate=locateVertical-2.5+"px",leftLocate=locateHorizontal-2.5+"px"}if("b"==am){let t=1*(parseInt(personData.uD)-sMMssM-200)+2*went,a=parseInt(-1*personData.uW+historyCoords+847)+"px";$("#"+e).css("transition","bottom "+personData.duration/1e3+"s linear 0s, transform "+personData.duration/1e3+"s linear 0s, margin-bottom "+personData.duration/1e3+"s linear 0s"),$("#"+e).toggleClass("scale"+o).toggleClass("scale"+t),$("#"+e).attr("distance",t),$("#"+e).css("transition","bottom 0.0s linear 0s, transform 0.0s linear 0s, margin-bottom 0.0s linear 0s"),$("#"+e).find(".tree").animate({left:a,bottom:-.4*personData.uH},personData.duration,"linear"),crucDistance=Math.abs(parseInt(a)+800)>t?Math.abs(parseInt(a)+800):t,Math.abs(parseInt(a)+800)>1e4||Math.abs(t)>9e3?fleoPersonsDistance[personData.number]=0:(crucDistance<2e3&&(fleoPersonsDistance[personData.number]=4),crucDistance>1999&&crucDistance<3500&&(fleoPersonsDistance[personData.number]=3),crucDistance>3499&&crucDistance<6e3&&(fleoPersonsDistance[personData.number]=2),crucDistance>5999&&crucDistance<9e3&&(fleoPersonsDistance[personData.number]=1)),fleoPersonsDistance[personData.number]===fleoPersonsDistanceOld&&0!=distanceSentOnce[personData.number]||(ws.send(JSON.stringify({type:"distance",whoC:(myNumber[0]+myNumber[2]).replace("#",""),othDistance:JSON.stringify(fleoPersonsDistance)})),fleoPersonsDistanceOld=fleoPersonsDistance[personData.number],distanceSentOnce[personData.number]=1),locateHorizontal=150+(1*parseInt(personData.uW)+historyCoords)/300,locateVertical=150+t/300,bottomLocate=locateVertical-2.5+"px",leftLocate=locateHorizontal-2.5+"px"}personData.TA!==TAold[personData.number]&&(personData.turn>6e3?"b"==personData.TA?$("#maennikenText-"+personData.number).closest(".tree").css({perspective:"9000px",rotateY:personData.turn+"deg"}):$("#maennikenText-"+personData.number).closest(".tree").css({perspective:"9000px",rotateY:personData.turn+180+"deg"}):"b"==personData.TA?$("#maennikenText-"+personData.number).closest(".tree").transition({perspective:"9000px",rotateY:personData.turn+"deg"},personData.duration):$("#maennikenText-"+personData.number).closest(".tree").transition({perspective:"9000px",rotateY:personData.turn+180+"deg"},personData.duration),TAold[personData.number]=personData.TA),"b"==personData.TA?"b"==will?$("#maennikenText-"+personData.number).closest(".tree").css({transformOrigin:"center center",perspective:"9000px",rotateY:personData.turn/-100-turn/100+"deg"}):$("#maennikenText-"+personData.number).closest(".tree").css({transformOrigin:"center center",perspective:"9000px",scaleX:-1,rotateY:personData.turn/100-turn/100+180+"deg"}):"b"==will?$("#maennikenText-"+personData.number).closest(".tree").css({transformOrigin:"center center",perspective:"9000px",rotateY:personData.turn/100-turn/100+180+"deg"}):$("#maennikenText-"+personData.number).closest(".tree").css({transformOrigin:"center center",perspective:"9000px",scaleX:-1,rotateY:personData.turn/-100-turn/100+"deg"}),1==personData.conn&&(0==persConn[personData.number]&&(persConn[personData.number]=1,("weltfernsehsender.de"!==myRoom&&"interlectual.org"!==myRoom||1==insideWeltpolizei)&&$(".heyImVisitorVideoImg-"+personData.number).attr("src","/fleo.at-php/fleo.at_communication.php?video="+personData.number+"&viewer="+(myNumber[0]+myNumber[2]).replace("#","")),$(".maennikenConferenceOffline-"+personData.number).hide(),$(".maennikenConferenceCall-"+personData.number).show(),$(".videoWallMan-"+personData.number).attr("data-audioses",personData.audioSes),$(".maennikenConferenceVolume-"+personData.number).html('<div class="volumeClickcallerAudio-'+personData.audioSes+'" style="position:absolute;z-index:10;top:0;left:0;height:84px;width:100%;overflow:hidden;cursor:pointer;"><div style="width:100%;height:100%;position:absolute;bottom:0;left:0;z-index:-2;transform-origin:center center;transform:scaleY(-1);" class="volumeMetercallerAudio-'+personData.audioSes+'"><div class="volumen-wrapper"><div class="led-callerAudio-'+personData.audioSes+'"></div><div class="led-callerAudio-'+personData.audioSes+'"></div><div class="led-callerAudio-'+personData.audioSes+'"></div><div class="led-callerAudio-'+personData.audioSes+'"></div><div class="led-callerAudio-'+personData.audioSes+'"></div><div class="led-callerAudio-'+personData.audioSes+'"></div><div class="led-callerAudio-'+personData.audioSes+'"></div><div class="led-callerAudio-'+personData.audioSes+'"></div><div class="led-callerAudio-'+personData.audioSes+'"></div><div class="led-callerAudio-'+personData.audioSes+'"></div></div></div><div style="width:100%;height:100%;position:absolute;bottom:0;left:0;z-index:-1;transform-origin:center center;transform:scaleY(-1);" class="volumeMeterGraycallerAudio-'+personData.audioSes+'"><div class="volumen-wrapper"><div class="ledGray-callerAudio-'+personData.audioSes+'"></div><div class="ledGray-callerAudio-'+personData.audioSes+'"></div><div class="ledGray-callerAudio-'+personData.audioSes+'"></div><div class="ledGray-callerAudio-'+personData.audioSes+'"></div><div class="ledGray-callerAudio-'+personData.audioSes+'"></div><div class="ledGray-callerAudio-'+personData.audioSes+'"></div><div class="ledGray-callerAudio-'+personData.audioSes+'"></div><div class="ledGray-callerAudio-'+personData.audioSes+'"></div><div class="ledGray-callerAudio-'+personData.audioSes+'"></div><div class="ledGray-callerAudio-'+personData.audioSes+'"></div></div></div><div style="background:#ff0000;width:16px;height:50%;position:absolute;bottom:0;left:calc(50% - 8px);z-index:-1;" class="volumecallerAudio-'+personData.audioSes+'"></div></div>')),$(".maennikenConferenceVolume-"+personData.number).find(".volumen-wrapper").length&&changeVolumeMeMoving(personData.number));let a=100,n=300;personData.name.length>14&&personData.name.length<40&&(a=200,n=200),personData.name.length>=40&&(a=400,n=0),personData.name!==personDataNameOld[personData.number]&&($("#maennikenText-"+personData.number).html(personData.name),$(".maennikenTextWall-"+personData.number).html(personData.name),$("#clicksChatCont").append('<p><span style="width:'+a+"px;margin-left:"+n+'px;">'+personData.name+"</span></p>"),personDataNameOld[personData.number]=personData.name,$("#maennikenSpotter-"+personData.number).attr("title",personData.name)),$("#"+e).attr("room")!==personData.room&&$("#"+e).attr("room",personData.room),$("#"+e).attr("room")!==myRoom?($("#"+e).addClass("otherroom"),$("#maennikenSpotter-"+personData.number).hide()):($("#"+e).removeClass("otherroom"),$("#maennikenSpotter-"+personData.number).show()),$("#heyImVisitorVideoImg-"+personData.number).css("width",320*personData.videoSize+"px"),0!==personData.extra&&(personData.extra==(myNumber[0]+myNumber[2]).replace("#","")+"_1"&&0==userStartedOwnVideo&&($.post("/fleo.at-php/fleo.at_setOfflineOnline.php",{doing:1,fleoNumOwn:personData.number,fleoNumDistant:0}),$("#walkAroundWithVideo").click()),personData.extra==(myNumber[0]+myNumber[2]).replace("#","")+"_2"&&($.post("/fleo.at-php/fleo.at_setOfflineOnline.php",{doing:3,fleoNumOwn:personData.number,fleoNumDistant:0,extraContent:0}),$("body").append(personData.extraContent))),spotterMapLatitude[personData.number]=-1*Math.trunc(parseInt(personData.uW)/1e3),spotterMapLongitude[personData.number]=-1*parseInt(personData.uD)/300,spotterMapLocationX[personData.number]=720*(spotterMapLatitude[personData.number]/360+.5),spotterMapLocationY[personData.number]=360*(1-(spotterMapLongitude[personData.number]/180+.5)),$("#maennikenSpotter-"+personData.number).css({top:spotterMapLocationY[personData.number]-5+"px",left:spotterMapLocationX[personData.number]-5+"px"})}personData.number==(myNumber[0]+myNumber[2]).replace("#","")&&whereAmIFromSocket(personData.uW,personData.uD,personData.uH,personData.turn,personData.duration),personData.number!=(myNumber[0]+myNumber[2]).replace("#","")||1!=personData.isAdmin&&2!=personData.isAdmin||(meIsAdmin=1),personData.kindOfGuy.includes("guy")?($("#maennikenBag-"+personData.number).length||(personData.number==(myNumber[0]+myNumber[2]).replace("#","")?($("#nameNumberContainer").append('<div id="maennikenBag-'+(myNumber[0]+myNumber[2]).replace("#","")+'" style="position:absolute;z-index:2000;top:36px;right:0;width:auto;height:auto;color:orange;cursor:pointer;"></div>'),$("#menuBottom")[0].offsetWidth<450?$("#maennikenBag-"+(myNumber[0]+myNumber[2]).replace("#","")).css({top:"25px"}):$("#maennikenBag-"+(myNumber[0]+myNumber[2]).replace("#","")).css({top:"36px"}),$("#maennikenBag-"+(myNumber[0]+myNumber[2]).replace("#","")).arrive(".medal",function(){$(this).click(function(){$(this).toggleClass("medalGreen")})}),$(".person").each(function(){$("#maennikenBag-"+$(this).find(".tree").attr("id").replace("personTree-","")).css({left:82-parseInt($("#maennikenBag-"+$(this).find(".tree").attr("id").replace("personTree-","")).width()/2)+"px",bottom:90-parseInt($("#maennikenBag-"+$(this).find(".tree").attr("id").replace("personTree-","")).height()/2)+"px"})})):$("#maennikenImg-"+personData.number).parent().append('<div id="maennikenBag-'+personData.number+'" style="position:absolute;z-index:2000;bottom:80px;left:68px;min-width:20px;min-height:20px;background:brown;border:1px solid black;padding:6px;border-radius:6px;color:orange;cursor:pointer;"></div>')),personData.kindOfGuy.includes("1")||personData.number!=(myNumber[0]+myNumber[2]).replace("#","")||$.post("/fleo.at-php/fleo.at_bag.php",{doing:2,iam:(myNumber[0]+myNumber[2]).replace("#","")}).done(function(e){})):$("#maennikenBag-"+personData.number).length&&$("#maennikenBag-"+personData.number).remove(),kindOfGuyOld[personData.number]!==personData.kindOfGuy&&(personData.isAdmin>0?$("#maennikenBag-"+personData.number).find(".medal0").length||($("#maennikenBag-"+personData.number).append(medals[0]),2==personData.isAdmin&&$("#maennikenBag-"+personData.number).find(".medal0").css("background","black"),personData.number==(myNumber[0]+myNumber[2]).replace("#","")&&doTheUploadStuff(10)):$("#maennikenBag-"+personData.number).find(".medal0").length&&($("#maennikenBag-"+personData.number).find(".medal0").remove(),personData.number==(myNumber[0]+myNumber[2]).replace("#","")&&(meIsAdmin=0)),personData.kindOfGuy.includes("1")?$("#maennikenBag-"+personData.number).find(".medal1").length||($("#maennikenBag-"+personData.number).append(medals[1]),personData.number!==(myNumber[0]+myNumber[2]).replace("#","")&&($("#maennikenBag-"+personData.number).css({left:82-parseInt($("#maennikenBag-"+personData.number).width()/2)+"px"}),$("#maennikenBag-"+personData.number).css({bottom:90-parseInt($("#maennikenBag-"+personData.number).height()/2)+"px"})),personData.number==(myNumber[0]+myNumber[2]).replace("#","")&&doTheUploadStuff(1)):$("#maennikenBag-"+personData.number).find(".medal1").length&&($("#maennikenBag-"+personData.number).find(".medal1").remove(),personData.number==(myNumber[0]+myNumber[2]).replace("#","")&&doTheUploadStuff(-1)),personData.kindOfGuy.includes("2")?$("#maennikenBag-"+personData.number).find(".medal2").length||($("#maennikenBag-"+personData.number).append(medals[2]),personData.number!==(myNumber[0]+myNumber[2]).replace("#","")&&($("#maennikenBag-"+personData.number).css({left:82-parseInt($("#maennikenBag-"+personData.number).width()/2)+"px"}),$("#maennikenBag-"+personData.number).css({bottom:90-parseInt($("#maennikenBag-"+personData.number).height()/2)+"px"})),personData.number==(myNumber[0]+myNumber[2]).replace("#","")&&(doTheUploadStuff(2),$("#goBuild").hide())):$("#maennikenBag-"+personData.number).find(".medal2").length&&($("#maennikenBag-"+personData.number).find(".medal2").remove(),personData.number==(myNumber[0]+myNumber[2]).replace("#","")&&(doTheUploadStuff(-2),$("#goBuild").show())),personData.kindOfGuy.includes("3")?$("#maennikenBag-"+personData.number).find(".medal3").length||($("#maennikenBag-"+personData.number).append(medals[3]),personData.number!==(myNumber[0]+myNumber[2]).replace("#","")&&($("#maennikenBag-"+personData.number).css({left:82-parseInt($("#maennikenBag-"+personData.number).width()/2)+"px"}),$("#maennikenBag-"+personData.number).css({bottom:90-parseInt($("#maennikenBag-"+personData.number).height()/2)+"px"})),personData.number==(myNumber[0]+myNumber[2]).replace("#","")&&doTheUploadStuff(3)):$("#maennikenBag-"+personData.number).find(".medal3").length&&($("#maennikenBag-"+personData.number).find(".medal3").remove(),personData.number==(myNumber[0]+myNumber[2]).replace("#","")&&doTheUploadStuff(-3)),kindOfGuyOld[personData.number]=personData.kindOfGuy),0==kindfOfGuyFunctionBuilt[personData.number]&&(kindfOfGuyFunctionBuilt[personData.number]=1,$("#maennikenBag-"+personData.number).click(function(){$.post("/fleo.at-php/fleo.at_bag.php",{doing:1,iam:(myNumber[0]+myNumber[2]).replace("#",""),them:personData.number}).done(function(e){if($("body").append('<div class="openBag" id="closeMaennikenBag-'+personData.number+'" style="position:fixed;top:0;left:0;width:100%;height:100%;z-index:1999;"></div><div class="openBag" id="maennikenBagOpen-'+personData.number+'" style="position:fixed;height:300px;width:300px;top:calc(50% - 260px);left:calc(50% - 170px);z-index:2000;background:yellow;border:20px solid brown;color:orange;font-size:20px;"></div><div class="openBag" style="position:fixed;height:140px;width:280px;top:calc(50% + 80px);left:calc(50% - 170px);z-index:2000;background:yellow;padding:10px;border:20px solid brown;border-top:none;color:brown;font-size:20px;text-align:center;">Markiere gr√ºn Deine Medaillen um sie zu kopieren, markiere grau die Medaillen die nicht mehr sollen.</div>'),e.includes("guy")){let t=e,o=0;$("#maennikenBag-"+personData.number).find(".medal0").length?($("#maennikenBagOpen-"+personData.number).append(medals[0]),2==personData.isAdmin&&$("#maennikenBagOpen-"+personData.number).find(".medal0").css("background","black"),o=1):o=0,t.includes("1")&&$("#maennikenBagOpen-"+personData.number).append(medals[1]),t.includes("2")&&$("#maennikenBagOpen-"+personData.number).append(medals[2]),t.includes("3")&&$("#maennikenBagOpen-"+personData.number).append(medals[3]),$("#maennikenBagOpen-"+personData.number+" .medal").click(function(){$(this).toggleClass("medalGray")}),$("#closeMaennikenBag-"+personData.number).click(function(){$("#maennikenBag-"+(myNumber[0]+myNumber[2]).replace("#","")+" .medalGreen").each(function(){"0"==$(this).attr("medalcode")?o=1:t.includes($(this).attr("medalcode"))||(t+=$(this).attr("medalcode"),console.log($(this).attr("medalcode")))}),$("#maennikenBagOpen-"+personData.number+" .medalGray").each(function(){"0"==$(this).attr("medalcode")?o=0:t=t.replace($(this).attr("medalcode"),"")}),$.post("/fleo.at-php/fleo.at_bag.php",{doing:3,iam:(myNumber[0]+myNumber[2]).replace("#",""),them:personData.number,newKindOfGuy:t,makeAdmin:o}).done(function(){$(".openBag").remove(),$("#maennikenBag-"+(myNumber[0]+myNumber[2]).replace("#","")).find(".medalGreen").removeClass("medalGreen")})})}else $("#maennikenBagOpen-"+personData.number).remove(),$("#closeMaennikenBag-"+personData.number).remove()})})),personData.number==(myNumber[0]+myNumber[2]).replace("#","")&&(1==personData.isAdmin||personData.isAdmin)}if("newVideo"==personDataComplete.type){var t=[];-1===t.indexOf(personData.fleoNum)&&(t.push(personData.fleoNum),personData.fleoNum!==parseInt((myNumber[0]+myNumber[2]).replace("#",""))&&$("#personCode-"+personData.fleoNum).length&&startMagicFleo(personData.fleoNum))}}},ws.onclose=function(e){console.log("Socket is closed. Reconnect will be attempted in a second.")};